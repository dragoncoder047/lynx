var Ye=(e,t)=>()=>(e&&(t=e(e=0)),t);function Qe(e,t,...n){let[r,...i]=e.split("."),a=document.createElement(r);i.length>0&&a.classList.add(...i);for(var[u,s]of Object.entries(t??{}))a.setAttribute(u,s);return a.append(...n),a}function Ba(e){let t=Qe("span");return t.innerHTML=e,t}function zt(e){return document.querySelector(e)}function Ia(e,t,n,r=!1){zt(e)?.addEventListener(t,n,{capture:r})}var vn=Ye(()=>{});function ku(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ku=function(){return!!e})()}function Gn(e,t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Gn(e,t)}function Ar(e,t,n){if(ku())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Gn(i,n.prototype),i}function Cu(e){if(Array.isArray(e))return e}function Su(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ei(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qi(e,t){if(e){if(typeof e=="string")return Ei(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ei(e,t):void 0}}function Ou(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(e){return Cu(e)||Su(e)||qi(e)||Ou()}function ye(e){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function ls(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e,t){if(t&&(ye(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(e)}function Kn(e){return Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kn(e)}function zi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gn(e,t)}function _s(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function kr(e){var t=typeof Map=="function"?new Map:void 0;return kr=function(r){if(r===null||!_s(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Ar(r,arguments,Kn(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Gn(i,r)},kr(e)}function ja(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(f){return void n(f)}s.done?t(o):Promise.resolve(o).then(r,i)}function Se(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function u(o){ja(a,r,i,u,s,"next",o)}function s(o){ja(a,r,i,u,s,"throw",o)}u(void 0)})}}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hs(e,t){if(ye(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ye(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bu(e){var t=hs(e,"string");return ye(t)=="symbol"?t:t+""}function ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bu(r.key),r)}}function Et(e,t,n){return t&&ds(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jt(e,t,n){return(t=Bu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ms(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Cn(e,t){if(e==null)return{};var n,r,i=ms(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vs(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,u,s=[],o=!0,f=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);o=!0);}catch(c){f=!0,i=c}finally{try{if(!o&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(f)throw i}}return s}}function ve(e,t){return Cu(e)||vs(e,t)||qi(e,t)||Ou()}function ys(e){if(Array.isArray(e))return Ei(e)}function gs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function be(e){return ys(e)||Su(e)||qi(e)||gs()}function Iu(e,t){this.v=e,this.k=t}function bs(e){return new Iu(e,0)}function ws(e){return function(){return new zn(e.apply(this,arguments))}}function zn(e){var t,n;function r(a,u){try{var s=e[a](u),o=s.value,f=o instanceof Iu;Promise.resolve(f?o.v:o).then(function(c){if(f){var l=a==="return"?"return":"next";if(!o.k||c.done)return r(l,c);c=e[l](c).value}i(s.done?"return":"normal",c)},function(c){r("throw",c)})}catch(c){i("throw",c)}}function i(a,u){switch(a){case"return":t.resolve({value:u,done:!0});break;case"throw":t.reject(u);break;default:t.resolve({value:u,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(a,u){return new Promise(function(s,o){var f={key:a,arg:u,resolve:s,reject:o,next:null};n?n=n.next=f:(t=n=f,r(a,u))})},typeof e.return!="function"&&(this.return=void 0)}function Ds(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xs(){return Na||(Na=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ci)),ci.exports}function Es(){return Pa||(Pa=1,function(e){var t=xs().default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},a=Object.prototype,u=a.hasOwnProperty,s=Object.defineProperty||function(j,A,k){j[A]=k.value},o=typeof Symbol=="function"?Symbol:{},f=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(j,A,k){return Object.defineProperty(j,A,{value:k,enumerable:!0,configurable:!0,writable:!0}),j[A]}try{h({},"")}catch{h=function(k,q,te){return k[q]=te}}function w(j,A,k,q){var te=A&&A.prototype instanceof x?A:x,ne=Object.create(te.prototype),De=new T(q||[]);return s(ne,"_invoke",{value:y(j,k,De)}),ne}function B(j,A,k){try{return{type:"normal",arg:j.call(A,k)}}catch(q){return{type:"throw",arg:q}}}i.wrap=w;var b="suspendedStart",g="suspendedYield",_="executing",m="completed",d={};function x(){}function S(){}function I(){}var V={};h(V,f,function(){return this});var K=Object.getPrototypeOf,Y=K&&K(K(X([])));Y&&Y!==a&&u.call(Y,f)&&(V=Y);var M=I.prototype=x.prototype=Object.create(V);function G(j){["next","throw","return"].forEach(function(A){h(j,A,function(k){return this._invoke(A,k)})})}function ce(j,A){function k(te,ne,De,Ce){var J=B(j[te],j,ne);if(J.type!=="throw"){var at=J.arg,Xe=at.value;return Xe&&t(Xe)=="object"&&u.call(Xe,"__await")?A.resolve(Xe.__await).then(function(ut){k("next",ut,De,Ce)},function(ut){k("throw",ut,De,Ce)}):A.resolve(Xe).then(function(ut){at.value=ut,De(at)},function(ut){return k("throw",ut,De,Ce)})}Ce(J.arg)}var q;s(this,"_invoke",{value:function(ne,De){function Ce(){return new A(function(J,at){k(ne,De,J,at)})}return q=q?q.then(Ce,Ce):Ce()}})}function y(j,A,k){var q=b;return function(te,ne){if(q===_)throw Error("Generator is already running");if(q===m){if(te==="throw")throw ne;return{value:r,done:!0}}for(k.method=te,k.arg=ne;;){var De=k.delegate;if(De){var Ce=L(De,k);if(Ce){if(Ce===d)continue;return Ce}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(q===b)throw q=m,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);q=_;var J=B(j,A,k);if(J.type==="normal"){if(q=k.done?m:g,J.arg===d)continue;return{value:J.arg,done:k.done}}J.type==="throw"&&(q=m,k.method="throw",k.arg=J.arg)}}}function L(j,A){var k=A.method,q=j.iterator[k];if(q===r)return A.delegate=null,k==="throw"&&j.iterator.return&&(A.method="return",A.arg=r,L(j,A),A.method==="throw")||k!=="return"&&(A.method="throw",A.arg=new TypeError("The iterator does not provide a '"+k+"' method")),d;var te=B(q,j.iterator,A.arg);if(te.type==="throw")return A.method="throw",A.arg=te.arg,A.delegate=null,d;var ne=te.arg;return ne?ne.done?(A[j.resultName]=ne.value,A.next=j.nextLoc,A.method!=="return"&&(A.method="next",A.arg=r),A.delegate=null,d):ne:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,d)}function P(j){var A={tryLoc:j[0]};1 in j&&(A.catchLoc=j[1]),2 in j&&(A.finallyLoc=j[2],A.afterLoc=j[3]),this.tryEntries.push(A)}function R(j){var A=j.completion||{};A.type="normal",delete A.arg,j.completion=A}function T(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(P,this),this.reset(!0)}function X(j){if(j||j===""){var A=j[f];if(A)return A.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var k=-1,q=function te(){for(;++k<j.length;)if(u.call(j,k))return te.value=j[k],te.done=!1,te;return te.value=r,te.done=!0,te};return q.next=q}}throw new TypeError(t(j)+" is not iterable")}return S.prototype=I,s(M,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:S,configurable:!0}),S.displayName=h(I,l,"GeneratorFunction"),i.isGeneratorFunction=function(j){var A=typeof j=="function"&&j.constructor;return!!A&&(A===S||(A.displayName||A.name)==="GeneratorFunction")},i.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,I):(j.__proto__=I,h(j,l,"GeneratorFunction")),j.prototype=Object.create(M),j},i.awrap=function(j){return{__await:j}},G(ce.prototype),h(ce.prototype,c,function(){return this}),i.AsyncIterator=ce,i.async=function(j,A,k,q,te){te===void 0&&(te=Promise);var ne=new ce(w(j,A,k,q),te);return i.isGeneratorFunction(A)?ne:ne.next().then(function(De){return De.done?De.value:ne.next()})},G(M),h(M,l,"Generator"),h(M,f,function(){return this}),h(M,"toString",function(){return"[object Generator]"}),i.keys=function(j){var A=Object(j),k=[];for(var q in A)k.push(q);return k.reverse(),function te(){for(;k.length;){var ne=k.pop();if(ne in A)return te.value=ne,te.done=!1,te}return te.done=!0,te}},i.values=X,T.prototype={constructor:T,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(R),!A)for(var k in this)k.charAt(0)==="t"&&u.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=r)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var k=this;function q(at,Xe){return De.type="throw",De.arg=A,k.next=at,Xe&&(k.method="next",k.arg=r),!!Xe}for(var te=this.tryEntries.length-1;te>=0;--te){var ne=this.tryEntries[te],De=ne.completion;if(ne.tryLoc==="root")return q("end");if(ne.tryLoc<=this.prev){var Ce=u.call(ne,"catchLoc"),J=u.call(ne,"finallyLoc");if(Ce&&J){if(this.prev<ne.catchLoc)return q(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return q(ne.finallyLoc)}else if(Ce){if(this.prev<ne.catchLoc)return q(ne.catchLoc,!0)}else{if(!J)throw Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return q(ne.finallyLoc)}}}},abrupt:function(A,k){for(var q=this.tryEntries.length-1;q>=0;--q){var te=this.tryEntries[q];if(te.tryLoc<=this.prev&&u.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var ne=te;break}}ne&&(A==="break"||A==="continue")&&ne.tryLoc<=k&&k<=ne.finallyLoc&&(ne=null);var De=ne?ne.completion:{};return De.type=A,De.arg=k,ne?(this.method="next",this.next=ne.finallyLoc,d):this.complete(De)},complete:function(A,k){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&k&&(this.next=k),d},finish:function(A){for(var k=this.tryEntries.length-1;k>=0;--k){var q=this.tryEntries[k];if(q.finallyLoc===A)return this.complete(q.completion,q.afterLoc),R(q),d}},catch:function(A){for(var k=this.tryEntries.length-1;k>=0;--k){var q=this.tryEntries[k];if(q.tryLoc===A){var te=q.completion;if(te.type==="throw"){var ne=te.arg;R(q)}return ne}}throw Error("illegal catch attempt")},delegateYield:function(A,k,q){return this.delegate={iterator:X(A),resultName:k,nextLoc:q},this.method==="next"&&(this.arg=r),d}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(si)),si.exports}function As(){if(La)return fi;La=1;var e=Es()();fi=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return fi}function ar(){try{let e=me();if(Re){if(N>=Re.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}N=Re.postBundlePosition,Re=null}if(N==_n)Ie=null,ee=null,ot&&(ot=null);else if(N>_n){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!Xn)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Oi(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function me(){let e=ee[N++],t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=ee[N++];break;case 25:if(t==7)return js();e=Ze.getUint16(N),N+=2;break;case 26:if(t==7){let n=Ze.getFloat32(N);if(de.useFloat32>2){let r=Hi[(ee[N]&127)<<1|ee[N+1]>>7];return N+=4,(r*n+(n>0?.5:-.5)>>0)/r}return N+=4,n}e=Ze.getUint32(N),N+=4;break;case 27:if(t==7){let n=Ze.getFloat64(N);return N+=8,n}if(t>1){if(Ze.getUint32(N)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=Ze.getUint32(N+4)}else de.int64AsNumber?(e=Ze.getUint32(N)*4294967296,e+=Ze.getUint32(N+4)):e=Ze.getBigUint64(N);N+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],r,i=0;for(;(r=me())!=yn;){if(i>=Mn)throw new Error(`Array length exceeds ${Mn}`);n[i++]=r}return t==4?n:t==3?n.join(""):Buffer.concat(n);case 5:let a;if(de.mapsAsObjects){let u={},s=0;if(de.keyMap)for(;(a=me())!=yn;){if(s++>=St)throw new Error(`Property count exceeds ${St}`);u[st(de.decodeKey(a))]=me()}else for(;(a=me())!=yn;){if(s++>=St)throw new Error(`Property count exceeds ${St}`);u[st(a)]=me()}return u}else{Vn&&(de.mapsAsObjects=!0,Vn=!1);let u=new Map;if(de.keyMap){let s=0;for(;(a=me())!=yn;){if(s++>=St)throw new Error(`Map size exceeds ${St}`);u.set(de.decodeKey(a),me())}}else{let s=0;for(;(a=me())!=yn;){if(s++>=St)throw new Error(`Map size exceeds ${St}`);u.set(a,me())}}return u}case 7:return yn;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return Is(e);case 3:if(Jn>=N)return Cr.slice(N-Sr,(N+=e)-Sr);if(Jn==0&&_n<140&&e<32){let i=e<16?Nu(e):Bs(e);if(i!=null)return i}return Os(e);case 4:if(e>=Mn)throw new Error(`Array length exceeds ${Mn}`);let n=new Array(e);for(let i=0;i<e;i++)n[i]=me();return n;case 5:if(e>=St)throw new Error(`Map size exceeds ${Mn}`);if(de.mapsAsObjects){let i={};if(de.keyMap)for(let a=0;a<e;a++)i[st(de.decodeKey(me()))]=me();else for(let a=0;a<e;a++)i[st(me())]=me();return i}else{Vn&&(de.mapsAsObjects=!0,Vn=!1);let i=new Map;if(de.keyMap)for(let a=0;a<e;a++)i.set(de.decodeKey(me()),me());else for(let a=0;a<e;a++)i.set(me(),me());return i}case 6:if(e>=Ta){let i=Ie[e&8191];if(i)return i.read||(i.read=ki(i)),i.read();if(e<65536){if(e==Ss){let a=Dn(),u=me(),s=me();Si(u,s);let o={};if(de.keyMap)for(let f=2;f<a;f++){let c=de.decodeKey(s[f-2]);o[st(c)]=me()}else for(let f=2;f<a;f++){let c=s[f-2];o[st(c)]=me()}return o}else if(e==Cs){let a=Dn(),u=me();for(let s=2;s<a;s++)Si(u++,me());return me()}else if(e==Ta)return Rs();if(de.getShared&&(Vi(),i=Ie[e&8191],i))return i.read||(i.read=ki(i)),i.read()}}let r=Ne[e];if(r)return r.handlesRead?r(me):r(me());{let i=me();for(let a=0;a<Fi.length;a++){let u=Fi[a](e,i);if(u!==void 0)return u}return new It(i,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let i=(rt||cn())[e];if(i!==void 0)return i;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let i=new Error("Unexpected end of CBOR data");throw i.incomplete=!0,i}throw new Error("Unknown CBOR token "+e)}}function ki(e){if(!e)throw new Error("Structure is required in record definition");function t(){let n=ee[N++];if(n=n&31,n>23)switch(n){case 24:n=ee[N++];break;case 25:n=Ze.getUint16(N),N+=2;break;case 26:n=Ze.getUint32(N),N+=4;break;default:throw new Error("Expected array header, but got "+ee[N-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===n)return r(me);r=r.next}if(this.slowReads++>=ju){let a=this.length==n?this:this.slice(0,n);return r=de.keyMap?new Function("r","return {"+a.map(u=>de.decodeKey(u)).map(u=>$a.test(u)?st(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>$a.test(u)?st(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=n,this.compiledReader=r,r(me)}let i={};if(de.keyMap)for(let a=0;a<n;a++)i[st(de.decodeKey(this[a]))]=me();else for(let a=0;a<n;a++)i[st(this[a])]=me();return i}return e.slowReads=0,t}function st(e){if(typeof e=="string")return e==="__proto__"?"__proto_":e;if(typeof e=="number"||typeof e=="boolean"||typeof e=="bigint")return e.toString();if(e==null)return e+"";throw new Error("Invalid property name type "+typeof e)}function Ci(e){let t;if(e<16&&(t=Nu(e)))return t;if(e>64&&Ai)return Ai.decode(ee.subarray(N,N+=e));let n=N+e,r=[];for(t="";N<n;){let i=ee[N++];if((i&128)===0)r.push(i);else if((i&224)===192){let a=ee[N++]&63;r.push((i&31)<<6|a)}else if((i&240)===224){let a=ee[N++]&63,u=ee[N++]&63;r.push((i&31)<<12|a<<6|u)}else if((i&248)===240){let a=ee[N++]&63,u=ee[N++]&63,s=ee[N++]&63,o=(i&7)<<18|a<<12|u<<6|s;o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o)}else r.push(i);r.length>=4096&&(t+=Ue.apply(String,r),r.length=0)}return r.length>0&&(t+=Ue.apply(String,r)),t}function Bs(e){let t=N,n=new Array(e);for(let r=0;r<e;r++){let i=ee[N++];if((i&128)>0){N=t;return}n[r]=i}return Ue.apply(String,n)}function Nu(e){if(e<4)if(e<2){if(e===0)return"";{let t=ee[N++];if((t&128)>1){N-=1;return}return Ue(t)}}else{let t=ee[N++],n=ee[N++];if((t&128)>0||(n&128)>0){N-=2;return}if(e<3)return Ue(t,n);let r=ee[N++];if((r&128)>0){N-=3;return}return Ue(t,n,r)}else{let t=ee[N++],n=ee[N++],r=ee[N++],i=ee[N++];if((t&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){N-=4;return}if(e<6){if(e===4)return Ue(t,n,r,i);{let a=ee[N++];if((a&128)>0){N-=5;return}return Ue(t,n,r,i,a)}}else if(e<8){let a=ee[N++],u=ee[N++];if((a&128)>0||(u&128)>0){N-=6;return}if(e<7)return Ue(t,n,r,i,a,u);let s=ee[N++];if((s&128)>0){N-=7;return}return Ue(t,n,r,i,a,u,s)}else{let a=ee[N++],u=ee[N++],s=ee[N++],o=ee[N++];if((a&128)>0||(u&128)>0||(s&128)>0||(o&128)>0){N-=8;return}if(e<10){if(e===8)return Ue(t,n,r,i,a,u,s,o);{let f=ee[N++];if((f&128)>0){N-=9;return}return Ue(t,n,r,i,a,u,s,o,f)}}else if(e<12){let f=ee[N++],c=ee[N++];if((f&128)>0||(c&128)>0){N-=10;return}if(e<11)return Ue(t,n,r,i,a,u,s,o,f,c);let l=ee[N++];if((l&128)>0){N-=11;return}return Ue(t,n,r,i,a,u,s,o,f,c,l)}else{let f=ee[N++],c=ee[N++],l=ee[N++],h=ee[N++];if((f&128)>0||(c&128)>0||(l&128)>0||(h&128)>0){N-=12;return}if(e<14){if(e===12)return Ue(t,n,r,i,a,u,s,o,f,c,l,h);{let w=ee[N++];if((w&128)>0){N-=13;return}return Ue(t,n,r,i,a,u,s,o,f,c,l,h,w)}}else{let w=ee[N++],B=ee[N++];if((w&128)>0||(B&128)>0){N-=14;return}if(e<15)return Ue(t,n,r,i,a,u,s,o,f,c,l,h,w,B);let b=ee[N++];if((b&128)>0){N-=15;return}return Ue(t,n,r,i,a,u,s,o,f,c,l,h,w,B,b)}}}}}function Is(e){return de.copyBuffers?Uint8Array.prototype.slice.call(ee,N,N+=e):ee.subarray(N,N+=e)}function js(){let e=ee[N++],t=ee[N++],n=(e&127)>>2;if(n===31)return t||e&3?NaN:e&128?-1/0:1/0;if(n===0){let r=((e&3)<<8|t)/16777216;return e&128?-r:r}return ur[3]=e&128|(n>>1)+56,ur[2]=(e&7)<<5|t>>3,ur[1]=t<<5,ur[0]=0,Pu[0]}function gn(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function cn(){if(!rt)if(de.getShared)Vi();else throw new Error("No packed values available");return rt}function Ms(e,t){let n="get"+e.name.slice(0,-5),r;typeof e=="function"?r=e.BYTES_PER_ELEMENT:e=null;for(let i=0;i<2;i++){if(!i&&r==1)continue;let a=r==2?1:r==4?2:r==8?3:0;Ne[i?t:t-4]=r==1||i==Ls?u=>{if(!e)throw new Error("Could not find typed array for code "+t);return!de.copyBuffers&&(r===1||r===2&&!(u.byteOffset&1)||r===4&&!(u.byteOffset&3)||r===8&&!(u.byteOffset&7))?new e(u.buffer,u.byteOffset,u.byteLength>>a):new e(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!e)throw new Error("Could not find typed array for code "+t);let s=new DataView(u.buffer,u.byteOffset,u.byteLength),o=u.length>>a,f=new e(o),c=s[n];for(let l=0;l<o;l++)f[l]=c.call(s,l<<a,i);return f}}}function Rs(){let e=Dn(),t=N+me();for(let r=2;r<e;r++){let i=Dn();N+=i}let n=N;return N=t,Re=[Ci(Dn()),Ci(Dn())],Re.position0=0,Re.position1=0,Re.postBundlePosition=N,N=n,me()}function Dn(){let e=ee[N++]&31;if(e>23)switch(e){case 24:e=ee[N++];break;case 25:e=Ze.getUint16(N),N+=2;break;case 26:e=Ze.getUint32(N),N+=4;break}return e}function Vi(){if(de.getShared){let e=Tu(()=>(ee=null,de.getShared()))||{},t=e.structures||[];de.sharedVersion=e.version,rt=de.sharedValues=e.packedValues,Ie===!0?de.structures=Ie=t:Ie.splice.apply(Ie,[0,t.length].concat(t))}}function Tu(e){let t=_n,n=N,r=Sr,i=Jn,a=Cr,u=ot,s=Re,o=new Uint8Array(ee.slice(0,_n)),f=Ie,c=de,l=Xn,h=e();return _n=t,N=n,Sr=r,Jn=i,Cr=a,ot=u,Re=s,ee=o,Xn=l,Ie=f,de=c,Ze=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),h}function Oi(){ee=null,ot=null,Ie=null}function $s(e){Ne[e.tag]=e.decode}function Ha(e,t){e<24?E[v++]=t|e:e<256?(E[v++]=t|24,E[v++]=e):e<65536?(E[v++]=t|25,E[v++]=e>>8,E[v++]=e&255):(E[v++]=t|26,Fe.setUint32(v,e),v+=4)}function gt(e){e<24?E[v++]=128|e:e<256?(E[v++]=152,E[v++]=e):e<65536?(E[v++]=153,E[v++]=e>>8,E[v++]=e&255):(E[v++]=154,Fe.setUint32(v,e),v+=4)}function _i(e){if(e instanceof zs)return!0;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function mr(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let r=t.get(e);if(r)++r.count==2&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let i=t.samplingPackedValues.get(e);i?i.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let r=0,i=e.length;r<i;r++)mr(e[r],t);else{let r=!t.encoder.useRecords;for(var n in e)e.hasOwnProperty(n)&&(r&&mr(n,t),mr(e[n],t))}break;case"function":console.log(e)}}function yt(e,t){return!Vs&&t>1&&(e-=4),{tag:e,encode:function(r,i){let a=r.byteLength,u=r.byteOffset||0,s=r.buffer||r;i(Zn?qr.from(s,u,a):new Uint8Array(s,u,a))}}}function Bi(e,t){let n=e.byteLength;n<24?E[v++]=64+n:n<256?(E[v++]=88,E[v++]=n):n<65536?(E[v++]=89,E[v++]=n>>8,E[v++]=n&255):(E[v++]=90,Fe.setUint32(v,n),v+=4),v+n>=E.length&&t(v+n),E.set(e.buffer?e:new Uint8Array(e),v),v+=n}function Hs(e,t){let n,r=t.length*2,i=e.length-r;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let s of u.references)e[s++]=a>>8,e[s]=a&255}for(;n=t.pop();){let a=n.offset;e.copyWithin(a+r,a,i),r-=2;let u=a+r;e[u++]=216,e[u++]=28,i=a}return e}function Wa(e,t){Fe.setUint32(Te.position+e,v-Te.position-e+1);let n=Te;Te=null,t(n[0]),t(n[1])}function Ya(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");Yi.unshift(e.Class),Br.unshift(e)}$s(e)}function Ys(){if(Ka)return Rn;Ka=1,Object.defineProperty(Rn,"__esModule",{value:!0});let e=8,t=6,n=3,r=(1<<t)+(n-1),i=(1<<16-t)-1,a=256;function u(g,_){var m=0,d=0,x=0,S=0,I=0,V=1<<e-1,K=0,Y=0,M=0,G=new Int32Array(a),ce=0;for(ce=0;ce<a;ce++)G[ce]=-858993460;for(m=g.length;d<m;){if((V<<=1)==1<<e&&(V=1,I=x,_[x++]=0),d>m-r){_[x++]=g[d++];continue}if(M=(g[d]+13^g[d+1]-13^g[d+2])&a-1,Y=d-G[M]&i,G[M]=d,S=d-Y,S>=0&&S!=d&&g[d]==g[S]&&g[d+1]==g[S+1]&&g[d+2]==g[S+2]){for(_[I]|=V,K=n;K<r&&g[d+K]==g[S+K];K++);_[x++]=K-n<<e-t|Y>>e,_[x++]=Y,d+=K}else _[x++]=g[d++]}return console.assert(g.length>=d),x}function s(g,_,m){_=_|0;for(var d=0,x=0,S=0,I=0,V=1<<(e-1|0),K=0,Y=0;d<_;)if((V<<=1)===1<<e&&(V=1,I=g[d],d=d+1|0),I&V){K=(g[d]>>(e-t|0))+n|0,Y=(g[d]<<e|g[d+1|0])&i,d=d+2|0,S=x-Y|0;{for(;K>4;)m[x]=m[S],x=x+1|0,S=S+1|0,m[x]=m[S],x=x+1|0,S=S+1|0,m[x]=m[S],x=x+1|0,S=S+1|0,m[x]=m[S],x=x+1|0,S=S+1|0,K=K-4|0;for(;K>0;)m[x]=m[S],x=x+1|0,S=S+1|0,K=K-1|0}}else m[x]=g[d],x=x+1|0,d=d+1|0;return x}function o(){return new TextEncoder("utf-8").encode(f)}let f="@lzjb",c=o();function l(...g){if(g.length>1){let _=g.reduce((x,S)=>x+S.length,0),m=new Uint8Array(_),d=0;return g.forEach(x=>{m.set(x,d),d+=x.length}),m}else if(g.length)return g[0]}function h(g){let _=Math.ceil(Math.log2(g)/8),m=new Uint8Array(_);for(let d=0;d<m.length;d++){let x=g&255;m[d]=x,g=(g-x)/256}return m}function w(g){let _=0;for(let m=g.length-1;m>=0;m--)_=_*256+g[m];return _}function B(g,{magic:_=!0}={}){let m=new Uint8Array(Math.max(g.length*1.5|0,16384)),d=u(g,m),x=h(g.length),S=[Uint8Array.of(x.length),x,m.slice(0,d)];return _&&S.unshift(c),l(...S)}function b(g,{magic:_=!0}={}){if(_&&new TextDecoder("utf-8").decode(g.slice(0,c.length))!==f)throw new Error("Invalid magic value");let m=_?c.length:0,d=g[m],x=m+1,S=m+d+1,I=w(g.slice(x,S));g=g.slice(S);let V=new Uint8Array(I);return s(g,g.length,V),V}return Rn.pack=B,Rn.unpack=b,Rn}function Gs(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest,a=[],u={},s=function f(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:f,headers:{keys:function(){return a},entries:function(){return a.map(function(c){return[c,i.getResponseHeader(c)]})},get:function(c){return i.getResponseHeader(c)},has:function(c){return i.getResponseHeader(c)!=null}}}};for(var o in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,function(f,c){u[c]||a.push(u[c]=c)}),n(s())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(o,t.headers[o]);i.send(t.body||null)})}function tc(e,t,n){nc(e,t),t.set(e,n)}function nc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rc(e,t){return e.get(Ru(e,t))}function Ja(e,t,n){return e.set(Ru(e,t),n),n}function Ru(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Ki(e,t,n){return t=Kn(t),ps(e,$u()?Reflect.construct(t,n||[],Kn(e).constructor):t.apply(e,n))}function $u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($u=function(){return!!e})()}function Tt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ic(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return u=f.done,f},e:function(f){s=!0,a=f},f:function(){try{u||n.return==null||n.return()}finally{if(s)throw a}}}}function ic(e,t){if(e){if(typeof e=="string")return Xa(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xa(e,t):void 0}}function Xa(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qa(Object(n),!0).forEach(function(r){Jt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uu(e){var t,n,r,i=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&(t=e[n])!=null)return t.call(e);if(r&&(t=e[r])!=null)return new vr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function vr(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return vr=function(r){this.s=r,this.n=r.next},vr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):t(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):t(i.apply(this.s,arguments))}},new vr(e)}function oc(e,t){var n=!1,r=!0,i=e.document,a=i.documentElement,u=i.addEventListener,s=u?"addEventListener":"attachEvent",o=u?"removeEventListener":"detachEvent",f=u?"":"on",c=function(w){w.type=="readystatechange"&&i.readyState!="complete"||((w.type=="load"?e:i)[o](f+w.type,c,!1),!n&&(n=!0)&&t.call(e,w.type||w))},l=function(){try{a.doScroll("left")}catch{setTimeout(l,50);return}c("poll")};if(i.readyState=="complete")t.call(e,"lazy");else{if(!u&&a.doScroll){try{r=!e.frameElement}catch{}r&&l()}i[s](f+"DOMContentLoaded",c,!1),i[s](f+"readystatechange",c,!1),e[s](f+"load",c,!1)}}function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(pt(e)&&Ii(n[0]))console.log(yo(e,function(a){return He(a,!0)}));else if(Ii()){var i;(i=console).log.apply(i,[He(e,!0)].concat(be(n.map(function(a){return He(a,!0)}))))}}function Ii(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=we&&we.get("DEBUG",{throwError:!1});return e===null?t===!0:t?.valueOf()===e.valueOf()}function Ji(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function zu(e,t){return"".concat(Ji(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Xi(e,t){return"".concat(Ji(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function Vu(e,t){return"".concat(Ji(e),"[+-]?").concat(t,"+")}function Hu(e,t){var n=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")"),r="";return e===""&&(r="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"),new RegExp("^((?:(?:".concat(r,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(n,")?)(").concat(r,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}function fc(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)===56320?t.push(((i&1023)<<10)+(a&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function _c(e){var t=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]],n=t.map(function(r){var i=ve(r,2),a=i[0],u=i[1];return e(a,u)}).join("|");return e===Xi&&(n=sc+"|"+n),n}function Zi(e){return new RegExp("^(?:"+_c(e)+")$","i")}function Vr(e){var t=e.match(mc),n={};if(t[1]){var r=t[1].replace(/#/g,"").toLowerCase().split("");r.includes("x")?n.radix=16:r.includes("o")?n.radix=8:r.includes("b")?n.radix=2:r.includes("d")&&(n.radix=10),r.includes("i")&&(n.inexact=!0),r.includes("e")&&(n.exact=!0)}return n.number=t[2],n}function Ju(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=Vr(e),r=n.number.split("/"),i=le({num:p([r[0],n.radix||t]),denom:p([r[1],n.radix||t])});return n.inexact?i.valueOf():i}function Xu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=Vr(e);return n.inexact?ue(parseInt(n.number,n.radix||t)):p([n.number,n.radix||t])}function Za(e){var t=e.match(/#\\x([0-9a-f]+)$/i),n;if(t){var r=parseInt(t[1],16);n=String.fromCodePoint(r)}else t=e.match(/#\\([\s\S]+)$/),t&&(n=t[1]);if(n)return he(n);throw new Error("Parse: invalid character")}function Qu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;function n(o){var f;if(o==="+")f=p(1);else if(o==="-")f=p(-1);else if(o.match(Gu))f=p([o,t]);else if(o.match(Ku)){var c=o.split("/");f=le({num:p([c[0],t]),denom:p([c[1],t])})}else if(o.match(zr)){var l=ra(o);return r.exact?l.toRational():l}else{if(o.match(/nan.0$/))return p(NaN);if(o.match(/inf.0$/))return o[0]==="-"?p(Number.NEGATIVE_INFINITY):p(Number.POSITIVE_INFINITY);throw new Error("Internal Parser Error")}return r.inexact?ue(f.valueOf()):f}var r=Vr(e);t=r.radix||t;var i,a=r.number.match(dc);t!==10&&a?i=a:i=r.number.match(cc[t]);var u,s;return s=n(i[2]),i[1]?u=n(i[1]):s instanceof ue?u=ue(0):u=p(0),s.cmp(0)===0&&s.__type__==="bigint"?u:oe({im:s,re:u})}function vc(e){return parseInt(e.toString(),10)===e}function yc(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var n=parseInt(t[4],10),r,i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length,a=t[3]&&t[3].length;i<Math.abs(n)&&(r=p([t[1].replace(/\./,""),10]),a&&(n-=a))}return{exponent:n,mantisa:r}}function gc(e){if(e.match(/e/i)){var t=e.split("e"),n=ve(t,2),r=n[0],i=n[1],a=Math.abs(parseInt(i));if(a<7&&i<0){var u="0".repeat(a-1),s=r[0]==="-"?"-":"+",o=r.replace(/(^[-+])|\./g,""),f="".concat(s,"0.").concat(u).concat(o);return parseFloat(f)}}return parseFloat(e)}function ra(e){var t=Vr(e),n=gc(t.number),r=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&r||vc(n)&&Number.isSafeInteger(n)&&t.number.match(/e\+?[0-9]/i))return p(n);var i=yc(t.number),a=i.mantisa,u=i.exponent;if(a!==void 0&&u!==void 0){var s=p(10).pow(p(Math.abs(u)));if(t.exact&&u<0)return le({num:a,denom:s});if(u>0&&(t.exact||!t.number.match(/\./)))return p(a).mul(s)}}return n=ue(n),t.exact?n.toRational():n}function bc(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(i,a){return"\\u"+a.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0)throw new Error("Invalid string literal, unclosed ".concat(t[2]));try{var n=Q(JSON.parse(e));return n.freeze(),n}catch(i){var r=i.message.replace(/in JSON /,"").replace(/.*Error: /,"");throw new Error("Invalid string literal: ".concat(r))}}function wc(e){e.match(/^name/);var t=/(^|.)\|/g;if(e.match(t)){e=e.split("|").filter(Boolean).reduce(function(r,i){var a="";if(i.match(/^\\+$/)){if(i.length>1){var u=Math.floor(i.length/2);a="\\".repeat(u)}i.length%2!==0&&(a+="|")}else a=i;return r+a});var n={t:"	",r:"\r",n:`
`};e=e.replace(/\\(x[^;]+);/g,function(r,i){return String.fromCharCode(parseInt("0"+i,16))}).replace(/\\([trn])/g,function(r,i){return n[i]})}return new D(e)}function Dc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.token;if(gu.hasOwnProperty(n))return gu[n];var r;if(n.match(/^"[\s\S]*"$/))r=bc(n);else if(n[0]==="#"){var i=n.match(Qi);i?r=new RegExp(i[1],i[2]):n.match(Yu)&&(r=Za(n));var a=n.match(/#\\(.+)/);a&&fc(a[1]).length===1&&(r=Za(n))}if(n.match(/[0-9a-f]|[+-]i/i)&&(n.match(na)?r=Xu(n):n.match(zr)?r=ra(n):n.match(ta)?r=Ju(n):n.match(ea)&&(r=Qu(n))),!r&&n.match(/^#[iexobd]/))throw new Error("Invalid numeric constant: "+e);if(r||(r=wc(n)),t){var u=e.col,s=e.offset,o=e.line;Z(r,"__col__",u),Z(r,"__offset__",s),Z(r,"__line__",o)}return r}function xc(e){return!(["(",")","[","]"].includes(e)||Oe.names().includes(e))}function Ec(e){return xc(e)&&!(e.match(Qi)||e.match(/^"[\s\S]*"$/)||e.match(na)||e.match(zr)||e.match(ea)||e.match(ta)||e.match(Yu)||["#t","#f","nil"].includes(e))}function Ac(e){if(typeof e=="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function er(){this.data=[]}function eu(e){e instanceof Q&&(e=e.valueOf());for(var t=new $(e,{whitespace:!0}),n=[];;){var r=t.peek(!0);if(r===Be)break;n.push(r),t.skip()}return n}function Fc(e){var t=e.token,n=Cn(e,Ks);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var r=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(r,"")}return se({token:t},n)}function Pr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};this.fn=e,this.cont=t}function kc(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Cc(e.apply(this,n))}}function Cc(e){for(;e instanceof Pr;){var t=e;e=e.fn(),e instanceof Pr||t.cont()}return e}function Sn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e instanceof Q&&(e=e.toString()),t)return eu(e);var n=eu(e).map(function(r){return r.token==="#\\ "||r.token==`#\\
`?r.token:r.token.trim()}).filter(function(r){return r&&!r.match(/^;/)&&!r.match(/^#\|[\s\S]*\|#$/)});return Sc(n)}function Sc(e){for(var t=0,n=null,r=[],i=0;i<e.length;++i){var a=e[i];if(a==="#;"){["(","["].includes(e[i+1])?(t=1,n=i):r.push([i,i+2]),i+=1;continue}n!==null&&([")","]"].includes(a)?t--:["(","["].includes(a)&&t++,t===0&&(r.push([n,i+1]),n=null))}e=e.slice(),r.reverse();for(var u=0,s=r;u<s.length;u++){var o=ve(s[u],2),f=o[0],c=o[1];e.splice(f,c-f)}return e}function Oc(e){return ye(e)==="symbol"||ye(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function D(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e instanceof Q&&(e=e.valueOf()),t&&D.list[e]instanceof D)return D.list[e];if(typeof this<"u"&&this.constructor!==D||typeof this>"u")return new D(e,t);this.__name__=e,t&&typeof e=="string"&&(D.list[e]=this)}function ia(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function aa(e){return ye(e)==="symbol"?!!e.toString().match(/^Symbol\(#:/):!1}function Ni(e,t){var n=H.get("begin"),r=ua("begin");return e.forEach(function(i){i.set(r,n)}),new O(r,t)}function Pe(e){var t=this,n={pending:!0,rejected:!1,fulfilled:!1,reason:void 0,type:void 0};e=e.then(function(r){return n.type=ke(r),n.fulfilled=!0,n.pending=!1,r}),Z(this,"_promise",e,{hidden:!0}),_e(e.catch)&&(e=e.catch(function(r){n.rejected=!0,n.pending=!1,n.reason=r})),Object.keys(n).forEach(function(r){Object.defineProperty(t,"__".concat(r,"__"),{enumerable:!0,get:function(){return n[r]}})}),Z(this,"__promise__",e),this.then=!1}function On(e){return Array.isArray(e)?Promise.all(Bc(e)).then(Ic):e}function Bc(e){for(var t=new Array(e.length),n=e.length;n--;){var r=e[n];r instanceof Pe?t[n]=new Ke(r):t[n]=r}return t}function Ic(e){for(var t=new Array(e.length),n=e.length;n--;){var r=e[n];r instanceof Ke?t[n]=r.valueOf():t[n]=r}return t}function yr(e){return Oe.names().includes(e)}function jc(e){return Oe.__builtins__.includes(e)}function tu(e){return Oe.type(e)===Oe.LITERAL}function Nc(e){return Oe.type(e)===Oe.SYMBOL}function ru(e,t){return _o(e)?e===t:e===null||t.match(e)}function oa(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=ws(ae.mark(function e(t,n){var r,i,a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n||(H?n=H.get("**interaction-environment**",{throwError:!1}):n=we),t instanceof Nt?r=t:(r=new Nt({env:n}),r.prepare(t));case 2:return s.next=5,bs(r.read_object());case 5:if(a=s.sent,r.balanced()||r._ballancing_error(a,i),a!==Be){s.next=9;break}return s.abrupt("break",14);case 9:return i=a,s.next=12,a;case 12:s.next=2;break;case 14:case"end":return s.stop()}},e)})),Pi.apply(this,arguments)}function pe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i){return i},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(et(e)){var r=e.then(t);return n===null?r:r.catch(n)}return e instanceof Array?Pc(e,t,n):pt(e)?Lc(e,t,n):t(e)}function Pc(e,t,n){return e.find(et)?pe(On(e),function(r){return Object.isFrozen(e)&&Object.freeze(r),t(r)},n):t(e)}function Lc(e,t,n){for(var r=Object.keys(e),i=[],a=[],u=r.length;u--;){var s=r[u],o=e[s];i[u]=o,et(o)&&a.push(o)}return a.length?pe(On(i),function(f){var c={};return f.forEach(function(l,h){var w=r[h];c[w]=l}),Object.isFrozen(e)&&Object.freeze(c),c},n):t(e)}function Z(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=r.hidden,a=i===void 0?!1:i;Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0,enumerable:!a})}function Tc(e){return Li.apply(this,arguments)}function Li(){return Li=Se(ae.mark(function e(t){var n,r,i,a,u,s,o;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=[],r=!1,i=!1,c.prev=3,u=Uu(t);case 5:return c.next=7,u.next();case 7:if(!(r=!(s=c.sent).done)){c.next=13;break}o=s.value,n.push(o);case 10:r=!1,c.next=5;break;case 13:c.next=19;break;case 15:c.prev=15,c.t0=c.catch(3),i=!0,a=c.t0;case 19:if(c.prev=19,c.prev=20,!(r&&u.return!=null)){c.next=24;break}return c.next=24,u.return();case 24:if(c.prev=24,!i){c.next=27;break}throw a;case 27:return c.finish(24);case 28:return c.finish(19);case 29:return c.abrupt("return",n);case 30:case"end":return c.stop()}},e,null,[[3,15,19,29],[20,,24,28]])})),Li.apply(this,arguments)}function iu(e,t){if(t instanceof RegExp)return function(a){return String(a).match(t)};if(_e(t))return t;if(t instanceof p)return function(a){return p(a).cmp(t)===0};if(t instanceof Q){var n=t.__string__;return function(a){return Q.is(a,n)}}else if(t instanceof D){var r=t.__name__;return function(a){return D.is(a,r)}}else if(t instanceof he){var i=t.__char__;return function(a){return he.is(a,i)}}return function(a){return t===a}}function F(e,t,n,r){return typeof e!="string"&&(t=arguments[0],n=arguments[1],r=arguments[2],e=null),n&&(r?t.__doc__=n:t.__doc__=sa(n)),e?t.__name__=e:t.name&&!Qt(t)&&(t.__name__=t.name),t}function sa(e){return e.split(`
`).map(function(t){return t.trim()}).join(`
`)}function ro(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=e.length;if(t<=0)throw Error("previousSexp: Invalid argument sexp = ".concat(t));e:for(;t--&&n>=0;){for(var r=1;r>0;){var i=e[--n];if(!i)break e;i==="("||i.token==="("?r--:(i===")"||i.token===")")&&r++}n--}return e.slice(n+1)}function Mc(e){if(!e||!e.length)return 0;var t=e.length;if(e[t-1].token===`
`)return 0;for(;--t;)if(e[t].token===`
`){var n=(e[t+1]||{}).token;if(n)return n.length}return 0}function io(e,t){return n(e,t)===t.length;function n(r,i){function a(w,B){var b=Tt(w),g;try{for(b.s();!(g=b.n()).done;){var _=g.value,m=n(_,B);if(m!==-1)return m}}catch(d){b.e(d)}finally{b.f()}return-1}function u(){return r[o]===Symbol.for("symbol")&&!Ec(i[c])}function s(){var w=r[o+1],B=i[c+1];if(w!==void 0&&B!==void 0)return n([w],[B])}for(var o=0,f={},c=0;c<i.length;++c){if(typeof r[o]>"u")return c;if(r[o]instanceof At){var l;if(["+","*"].includes(r[o].flag)){for(;c<i.length&&(l=a(r[o].patterns,i.slice(c)),l!==-1);)c+=l;c-=1,o++;continue}else if(r[o].flag==="?"){l=a(r[o].patterns,i.slice(c)),l===-1?c-=2:o++;continue}}else if(r[o]instanceof RegExp){if(!i[c].match(r[o]))return-1}else if(Dt.LString.isString(r[o])){if(r[o].valueOf()!==i[c])return-1}else if(ye(r[o])==="symbol"){if(r[o]===Symbol.for("*")){if(f[o]=f[o]||0,["(","["].includes(i[c])?f[o]++:[")","]"].includes(i[c])&&f[o]--,typeof r[o+1]<"u"&&f[o]===0&&s()===-1||f[o]>0)continue}else if(u())return-1}else if(r[o]instanceof Array){var h=n(r[o],i.slice(c));if(h===-1||h+c>i.length)return-1;c+=h-1,o++;continue}else return-1;o++}return r.length!==o?-1:i.length}}function qe(e){this.__code__=e.replace(/\r/g,"")}function Bn(e){this.pattern=e}function At(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();this.patterns=t,this.flag=r}function pn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}function uo(e){return e=e.valueOf(),Array.from(e).map(function(t){var n=t.codePointAt(0),r=qc[n];return r?String.fromCodePoint(r):t}).join("")}function zc(e,t){var n=Object.prototype.toString,r="[object Array]",i=[],a=e.slice(),u;if(!e.length)return i;u=a.pop();do n.call(u)===r?a.push.apply(a,u):i.push(u);while(a.length&&(u=a.pop())!==void 0);return i.reverse(),i}function ou(e,t){for(var n=e.length,r;n>0;){r=Math.floor(t()*n),n--;var i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e}function Mt(){}function O(e,t){if(typeof this<"u"&&this.constructor!==O||typeof this>"u")return new O(e,t);this.car=e,this.cdr=t}function su(e,t){return function(r){if(U(e,r,["pair","nil"]),z(r))return[];for(var i=[],a=r;;)if(C(a)){if(a.have_cycles("cdr"))break;var u=a.car;t&&C(u)&&(u=this.get(e).call(this,u)),i.push(u),a=a.cdr}else{if(z(a))break;throw new Error("".concat(e,": can't convert improper list"))}return i}}function pt(e){return e&&ye(e)==="object"&&e.constructor===Object}function Vc(e){return e=nt(e),so.includes(e)}function mi(e){return _e(e)&&(Qt(e)||e.__doc__)}function Hc(e){var t=e.constructor||Object,n=pt(e),r=_e(e[Symbol.asyncIterator])||_e(e[Symbol.iterator]),i;return Hn.has(t)?i=Hn.get(t):Hn.forEach(function(a,u){u=nt(u),t===u&&(u===Object&&n&&!r||u!==Object)&&(i=a)}),i}function co(e){if(e&&ye(e)==="object"){var t={},n=Object.getOwnPropertySymbols(e);n.forEach(function(i){var a=i.toString().replace(/Symbol\(([^)]+)\)/,"$1");t[a]=He(e[i])});var r=Object.getOwnPropertyNames(e);return r.forEach(function(i){var a=e[i];a&&ye(a)==="object"&&a.constructor===Object?t[i]=co(a):t[i]=He(a)}),t}return e}function fo(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Wc(e,t){return e.hasOwnProperty(t)&&_e(e.toString)}function Yc(e){if(Yr(e))return"#<procedure(native)>";var t=e.prototype&&e.prototype.constructor;if(_e(t)&&Qt(t)&&e[_f]&&t.hasOwnProperty("__name__")){var n=t.__name__;return Q.isString(n)?(n=n.toString(),"#<class:".concat(n,">")):"#<class>"}if(e.hasOwnProperty("__name__")){var r=e.__name__;if(ye(r)==="symbol"&&(r=ia(r)),typeof r=="string")return"#<procedure:".concat(r,">")}return Wc(e,"toString")?e.toString():e.name&&!Qt(e)?"#<procedure:".concat(e.name.trim(),">"):"#<procedure>"}function He(e,t,n){if(typeof jQuery<"u"&&e instanceof jQuery.fn.init)return"#<jQuery("+e.length+")>";if(Ti.has(e))return Ti.get(e);if(gr(e))return"#<prototype>";if(e){var r=e.constructor;if(Mi.has(r)){for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return Mi.get(r)(e,{quote:t,skip_cycles:n,pair_args:a})}}var s=Tt(Gc),o;try{for(s.s();!(o=s.n()).done;){var f=o.value;if(e instanceof f)return e.toString(t)}}catch(w){s.e(w)}finally{s.f()}if(e instanceof p||[re,Be].includes(e))return e.toString();if(e===jt)return"#<js:global>";if(e===null)return"null";if(_e(e))return _e(e.toString)&&e.hasOwnProperty("toString")?e.toString().valueOf():Yc(e);if(ye(e)==="object"){var c=e.constructor;c||(c=Object);var l;if(typeof c.__class__=="string")l=c.__class__;else{var h=Hc(e);if(h){if(_e(h))return h(e,t);throw new Error("toString: Invalid repr value")}l=c.name}return _e(e.toString)&&e.hasOwnProperty("toString")?e.toString().valueOf():(ke(e)==="instance"&&(Qt(c)&&c.__name__?(l=c.__name__.valueOf(),ye(l)==="symbol"&&(l=l.toString().replace(/^Symbol\((?:#:)?([^\)]+)\)$/,"$1"))):Yr(c)||(l="instance")),Lr(e,Symbol.iterator)?l?"#<iterator(".concat(l,")>"):"#<iterator>":Lr(e,Symbol.asyncIterator)?l?"#<asyncIterator(".concat(l,")>"):"#<asyncIterator>":l!==""?"#<"+l+">":"#<Object>")}return typeof e!="string"?e.toString():e}function Ri(e){return C(e)?e.have_cycles()?!0:Ri(e.car,fn)||Ri(e.cdr,fn):!1}function Kc(e){var t=[],n=[],r=[];function i(f){t.includes(f)||t.push(f)}function a(f,c,l,h){if(C(l)&&h.includes(l))return r.includes(l)||r.push(l),f[Ve]||(f[Ve]={}),f[Ve][c]=l,n.includes(f)||n.push(f),!0}var u=kc(function f(c,l){if(C(c)){delete c[xn],delete c[Ve],i(c),l.push(c);var h=a(c,"car",c.car,l),w=a(c,"cdr",c.cdr,l);if(h||u(c.car,l.slice()),!w)return new Pr(function(){return f(c.cdr,l.slice())})}});function s(f,c){if(C(f[Ve][c])){var l=o.indexOf(f[Ve][c]);f[Ve][c]="#".concat(l,"#")}}u(e,[]);var o=t.filter(function(f){return r.includes(f)});o.forEach(function(f,c){f[xn]="#".concat(c,"=")}),n.forEach(function(f){s(f,"car"),s(f,"cdr")})}function vi(e){return e<0?-e:e}function $n(e,t){for(var n=Fr(t),r=n[0],i=n.slice(1);i.length>0;){var a=i,u=ve(a,1),s=u[0];if(!e(r,s))return!1;var o=i,f=Fr(o);r=f[0],i=f.slice(1)}return!0}function ca(e,t){if(_e(e))return _e(t)&&nt(e)===nt(t);if(e instanceof p){if(!(t instanceof p))return!1;var n;return e.__type__===t.__type__&&(e.__type__==="complex"?n=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__:n=!0,n&&e.cmp(t)===0)?e.valueOf()===0?Object.is(e.valueOf(),t.valueOf()):!0:!1}else return typeof e=="number"?typeof t!="number"?!1:Number.isNaN(e)?Number.isNaN(t):e===Number.NEGATIVE_INFINITY?t===Number.NEGATIVE_INFINITY:e===Number.POSITIVE_INFINITY?t===Number.POSITIVE_INFINITY:ca(p(e),p(t)):e instanceof he?t instanceof he?e.__char__===t.__char__:!1:e===t}function Jc(e,t){return ke(e)!==ke(t)||!fa(e)?!1:e instanceof RegExp?e.source===t.source:e instanceof Q?e.valueOf()===t.valueOf():ca(e,t)}function fa(e){return e instanceof D||Q.isString(e)||z(e)||e===null||e instanceof he||e instanceof p||e===!0||e===!1}function fe(e,t,n,r){if(typeof this<"u"&&this.constructor!==fe||typeof this>"u")return new fe(e,t);U("Macro",e,"string",1),U("Macro",t,"function",2),n&&(r?this.__doc__=n:this.__doc__=sa(n)),this.__name__=e,this.__fn__=t}function Qc(e){return e.car instanceof D&&C(e.cdr)&&C(e.cdr.car)&&D.is(e.cdr.car.car,"lambda")}function Zc(e){return C(e.car)&&e.car.car instanceof D}function ef(e,t,n,r,i){var a=i.use_dynamic,u=i.error,s=fe.defmacro(e,function(o){var f=tf(t,o,this),c={env:f,dynamic_env:f,use_dynamic:a,error:u};if(C(n)){var l=n.reduce(function(h,w){return ie(w,c)});return pe(l,function(h){return ye(h)==="object"&&delete h[wt],h})}},r,!0);return s.__code__=new O(new D("define-macro"),lo),s}function tf(e,t,n){for(var r=new xe({},n,"defmacro"),i=t;!z(e);){if(e instanceof D){r.__env__[e.__name__]=i;break}else z(e.car)||(z(i)?r.__env__[e.car.__name__]=re:(C(i.car)&&(i.car[wt]=!0),r.__env__[e.car.__name__]=i.car));if(z(e.cdr))break;z(i)||(i=i.cdr),e=e.cdr}return r}function fu(e){return function(){var t=Se(ae.mark(function n(r,i){var a,u,s,o,f,c,l,h,w,B,b,g,_,m,d,x,S;return ae.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(S=function(){return S=Se(ae.mark(function Y(M,G,ce){var y,L,P,R,T,X,j,A,k,q,te,ne,De;return ae.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!(C(M)&&M.car instanceof D)){J.next=50;break}if(!M[wt]){J.next=3;break}return J.abrupt("return",M);case 3:if(y=M.car.valueOf(),L=ce.get(M.car,{throwError:!1}),P=l(y),R=P||w(L,M)||B(L),!(_(y,L)&&!h(y))){J.next=31;break}return T=L instanceof Me?M:M.cdr,J.next=11,L.invoke(T,se(se({},i),{},{env:ce}),!0);case 11:if(X=J.sent,!(L instanceof Me)){J.next=20;break}if(j=X,A=j.expr,k=j.scope,!C(A)){J.next=19;break}if(!(G!==-1&&G<=1||G<cu)){J.next=17;break}return J.abrupt("return",A);case 17:return G!==-1&&(G=G-1),J.abrupt("return",x(A,G,k));case 19:X=A;case 20:if(!(X instanceof D)){J.next=22;break}return J.abrupt("return",Ge(X));case 22:if(!C(X)){J.next=27;break}if(!(G!==-1&&G<=1||G<cu)){J.next=25;break}return J.abrupt("return",X);case 25:return G!==-1&&(G=G-1),J.abrupt("return",x(X,G,ce));case 27:if(!fa(X)){J.next=29;break}return J.abrupt("return",X);case 29:J.next=50;break;case 31:if(!(R&&C(M.cdr.car))){J.next=50;break}if(!P){J.next=39;break}return u=g(M.cdr.car),J.next=36,m(M.cdr.car,G);case 36:q=J.sent,J.next=41;break;case 39:u=b(M.cdr.car),q=M.cdr.car;case 41:return J.t0=O,J.t1=M.car,J.t2=O,J.t3=q,J.next=47,x(M.cdr.cdr,G,ce);case 47:return J.t4=J.sent,J.t5=new J.t2(J.t3,J.t4),J.abrupt("return",new J.t0(J.t1,J.t5));case 50:if(te=M.car,!C(te)){J.next=55;break}return J.next=54,x(te,G,ce);case 54:te=J.sent;case 55:if(ne=M.cdr,!C(ne)){J.next=60;break}return J.next=59,x(ne,G,ce);case 59:ne=J.sent;case 60:return De=new O(te,ne),J.abrupt("return",De);case 62:case"end":return J.stop()}},Y)})),S.apply(this,arguments)},x=function(Y,M,G){return S.apply(this,arguments)},d=function(){return d=Se(ae.mark(function Y(M,G){var ce;return ae.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!z(M)){L.next=2;break}return L.abrupt("return",re);case 2:return ce=M.car,L.t0=O,L.t1=O,L.t2=ce.car,L.next=8,x(ce.cdr,G,a);case 8:return L.t3=L.sent,L.t4=new L.t1(L.t2,L.t3),L.next=12,m(M.cdr);case 12:return L.t5=L.sent,L.abrupt("return",new L.t0(L.t4,L.t5));case 14:case"end":return L.stop()}},Y)})),d.apply(this,arguments)},m=function(Y,M){return d.apply(this,arguments)},_=function(Y,M){return M instanceof fe&&M.__defmacro__&&!u.includes(Y)},g=function(Y){return[].concat(be(u),be(Y.to_array(!1).map(function(M){if(C(M))return M.car.valueOf();var G=ke(M),ce="macroexpand: Invalid let binding expectig pair got ".concat(G);throw new Error(ce)})))},b=function(Y){for(var M=[];!z(Y);){if(Y instanceof D){M.push(Y.valueOf());break}M.push(Y.car.valueOf()),Y=Y.cdr}return[].concat(be(u),M)},B=function(Y){return Y===f},w=function(Y,M){return Y===c&&C(M.cdr.car)},h=function(Y){return l(Y)?o.includes(a.get(Y)):!1},l=function(Y){return s.includes(Y)},a=i.env=this,u=[],s=["let","let*","letrec","letrec*"],o=s.map(function(K){return H.get(K)}),f=H.get("lambda"),c=H.get("define"),!(C(r.cdr)&&p.isNumber(r.cdr.car))){V.next=23;break}return V.t0=Ge,V.next=21,x(r,r.cdr.car.valueOf(),a);case 21:return V.t1=V.sent.car,V.abrupt("return",(0,V.t0)(V.t1));case 23:if(!e){V.next=29;break}return V.t2=Ge,V.next=27,x(r,1,a);case 27:return V.t3=V.sent.car,V.abrupt("return",(0,V.t2)(V.t3));case 29:return V.t4=Ge,V.next=32,x(r,-1,a);case 32:return V.t5=V.sent.car,V.abrupt("return",(0,V.t4)(V.t5));case 34:case"end":return V.stop()}},n,this)}));return function(n,r){return t.apply(this,arguments)}}()}function Me(e,t){this.__env__=t,this.__fn__=e,this.__defmacro__=!0}function nf(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a={"...":{symbols:{},lists:[]},symbols:{}},u=i.expansion,s=i.define;W(n);function o(f,c){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=l.ellipsis,w=h===void 0?!1:h,B=l.trailing,b=B===void 0?!1:B,g=l.pattern_names,_=g===void 0?[]:g;if(W({code:c,pattern:f}),fa(f)&&!(f instanceof D))return Jc(f,c);if(f instanceof D){var m=f.literal();if(n.includes(m)){if(!D.is(c,m)&&!D.is(f,c))return!1;var d=u.ref(m);return!d||d===s||d===H}}if(Array.isArray(f)&&Array.isArray(c)){if(W("<<< a 1"),f.length===0&&c.length===0)return!0;if(D.is(f[1],r)){if(f[0]instanceof D){var x=f[0].valueOf();if(W("<<< a 2 "+w),w){var S=c.length-2,I=S>0?c.slice(0,S):c,V=O.fromArray(I,!1);a["..."].symbols[x]?a["..."].symbols[x].append(new O(V,re)):a["..."].symbols[x]=new O(V,re)}else a["..."].symbols[x]=O.fromArray(c,!1)}else if(Array.isArray(f[0])){W("<<< a 3");var K=be(_),Y=se(se({},l),{},{pattern_names:K,ellipsis:!0});if(!c.every(function(fs){return o(f[0],fs,Y)}))return!1}if(f.length>2){var M=f.slice(2);return o(M,c.slice(-M.length),l)}return!0}var G=o(f[0],c[0],l);W({first:G,pattern:f[0],code:c[0]});var ce=o(f.slice(1),c.slice(1),l);return W({first:G,rest:ce}),G&&ce}if(C(f)&&C(f.car)&&C(f.car.cdr)&&D.is(f.car.cdr.car,r)&&(W(">> 0"),z(c)&&(W({pattern:f}),f.car.car instanceof D))){var y=f.car.car.valueOf();if(a["..."].symbols[y])throw new Error("syntax: named ellipsis can only appear onces");a["..."].symbols[y]=c}if(C(f)&&C(f.cdr)&&D.is(f.cdr.car,r)){if(W(">> 1 (a)"),!z(f.cdr.cdr)&&C(f.cdr.cdr)){W(">> 1 (b)");var L=f.cdr.cdr.length(),P=!z(f.last_pair().cdr);if(!C(c))return!1;for(var R=c.length(),T=c,X=1;R-X>L;)T=T.cdr,R--;var j=T.cdr;T.cdr=re;var A=se(se({},l),{},{trailing:P});if(!o(f.cdr.cdr,j,A))return!1}if(f.car instanceof D){var k=f.car.__name__;if(a["..."].symbols[k]&&!_.includes(k)&&!w)throw new Error("syntax: named ellipsis can only appear onces");if(W(">> 1 (next)"),z(c))W(">> 2"),w?(W("NIL"),a["..."].symbols[k]=re):(W("NULL"),a["..."].symbols[k]=null);else if(C(c)&&(C(c.car)||z(c.car)))if(W(">> 3 "+w),w)if(a["..."].symbols[k]){var q=a["..."].symbols[k];z(q)?q=new O(re,new O(c,re)):q=q.append(new O(c,re)),a["..."].symbols[k]=q}else a["..."].symbols[k]=new O(c,re);else W(">> 4"),a["..."].symbols[k]=new O(c,re);else if(W(">> 6"),C(c)){if(W(">> 7 "+w),!C(c.cdr)&&!z(c.cdr)){if(W(">> 7 (b)"),z(f.cdr.cdr))return!1;if(!a["..."].symbols[k])return a["..."].symbols[k]=new O(c.car,re),o(f.cdr.cdr,c.cdr,l)}var te=c.last_pair();if(W({last_pair:te}),!z(te.cdr)){if(W(">> 7 (c)"),z(f.cdr.cdr))return!1;W(">> 7 (d)");var ne=c.clone();return ne.last_pair().cdr=re,a["..."].symbols[k]=ne,o(f.cdr.cdr,te.cdr,l)}if(_.push(k),!a["..."].symbols[k])W(">> 7 (e)"),a["..."].symbols[k]=new O(c,re);else{W(">> 7 (f)");var De=a["..."].symbols[k];a["..."].symbols[k]=De.append(new O(c,re))}W({IIIIII:a["..."].symbols[k]})}else return f.car instanceof D&&C(f.cdr)&&D.is(f.cdr.car,r)?(W(">> 8"),a["..."].symbols[k]=null,o(f.cdr.cdr,c,l)):(W(">> 9"),!1);return!0}else if(C(f.car)){var Ce=be(_);if(z(c))return W(">> 10"),a["..."].lists.push(re),!0;W(">> 11");for(var J=c,at=se(se({},l),{},{pattern_names:Ce,ellipsis:!0});C(J);){if(!o(f.car,J.car,at))return!1;J=J.cdr}return!0}if(Array.isArray(f.car)){for(var Ce=be(_),Xe=c,ut=se(se({},l),{},{pattern_names:Ce,ellipsis:!0});C(Xe);){if(!o(f.car,Xe.car,ut))return!1;Xe=Xe.cdr}return!0}return!1}if(f instanceof D){if(D.is(f,r))throw new Error("syntax: invalid usage of ellipsis");W(">> 12");var vt=f.__name__;if(n.includes(vt))return!0;if(w){var qt,on;W(a["..."].symbols[vt]),(on=(qt=a["..."].symbols)[vt])!==null&&on!==void 0||(qt[vt]=[]),a["..."].symbols[vt].push(c)}else a.symbols[vt]=c;return!0}if(C(f)&&C(c)){W(">> 13"),W({a:13,code:c,pattern:f});var je=f.car instanceof D&&f.cdr instanceof D;if(b&&je){if(W(">> 13 (a)"),!z(c.cdr))return!1;var Ln=f.car.valueOf(),ir=f.cdr.valueOf();return a.symbols[Ln]=c.car,a.symbols[ir]=re,!0}if(z(c.cdr)&&(W(">> 13 (b)"),je)){if(!o(f.car,c.car,l))return!1;W(">> 14");var Ct=f.cdr.valueOf();return Ct in a.symbols||(a.symbols[Ct]=re),Ct=f.car.valueOf(),Ct in a.symbols||(a.symbols[Ct]=c.car),!0}if(W({pattern:f,code:c}),C(f.cdr)&&C(f.cdr.cdr)&&f.cdr.car instanceof D&&D.is(f.cdr.cdr.car,r)&&C(f.cdr.cdr.cdr)&&!D.is(f.cdr.cdr.cdr.car,r)&&o(f.car,c.car,l)&&o(f.cdr.cdr.cdr,c.cdr,se(se({},l),{},{trailing:!0}))){var Tn=f.cdr.car.__name__;return W({pattern:f,code:c,name:Tn}),n.includes(Tn)||(a["..."].symbols[Tn]=null),!0}W("recur"),W({pattern:f,code:c});var Sa=o(f.car,c.car,l),Oa=o(f.cdr,c.cdr,l);if(W({$car_code:c.car,$car_pattern:f.car,car:Sa,$cdr_code:c.cdr,$cdr_pattern:f.cdr,cdr:Oa}),Sa&&Oa)return!0}else{if(z(f)&&(z(c)||c===void 0))return!0;if(C(f.car)&&D.is(f.car.car,r))throw new Error("syntax: invalid usage of ellipsis");return!1}}if(o(e,t))return a}function rf(e,t){function n(r){if(C(r)){if(!t.length)return r;var i=n(r.car),a=n(r.cdr);return new O(i,a)}else if(r instanceof D){var u=t.find(function(s){return s.gensym===r});return u?D(u.name):r}else return r}return n(e)}function af(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.bindings,n=e.expr,r=e.scope,i=e.symbols,a=e.names,u=e.ellipsis,s={};function o(b){return b instanceof D?!0:["string","symbol"].includes(ye(b))}function f(b){if(!o(b)){var g=ke(b);throw new Error("syntax: internal error, need symbol got ".concat(g))}var _=b.valueOf();if(_===u)throw new Error("syntax: internal error, ellipis not transformed");var m=ye(_);if(["string","symbol"].includes(m)){if(_ in t.symbols)return t.symbols[_];if(m==="string"&&_.match(/\./)){var d=_.split("."),x=d[0];if(x in t.symbols)return O.fromArray([D("."),t.symbols[x]].concat(d.slice(1).map(function(S){return Q(S)})))}}return i.includes(_)?b:c(_,b)}function c(b,g){if(!s[b]){var _=r.ref(b);if(ye(b)==="symbol"&&!_&&(b=g.literal()),s[b])return s[b];var m=ua(b);if(_){var d=r.get(b);r.set(m,d)}else{var x=r.get(b,{throwError:!1});typeof x<"u"&&r.set(m,x)}if(a.push({name:b,gensym:m}),s[b]=m,typeof b=="string"&&b.match(/\./)){var S=b.split(".").filter(Boolean),I=Fr(S),V=I[0],K=I.slice(1);s[V]&&Bt(m,"__object__",[s[V]].concat(be(K)))}}return s[b]}function l(b,g,_){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},d=_.nested;if(W({bindings:g,expr:b}),Array.isArray(b)&&!b.length)return b;if(b instanceof D){var x=b.valueOf();if(aa(b)&&g[x],W("[t 1"),g[x]){if(C(g[x])){var S=g[x],I=S.car,V=S.cdr;if(d){var K=I.car,Y=I.cdr;return z(Y)||m(x,new O(Y,re)),K}return z(V)||m(x,V),I}else if(g[x]instanceof Array)return m(x,g[x].slice(1)),g[x][0]}return f(b)}var M=Array.isArray(b);if(C(b)||M){var G=M?b[0]:b.car,ce=M?b[1]:C(b.cdr)&&b.cdr.car;if(G instanceof D&&D.is(ce,u)){M?b.slice(2):b.cdr.cdr,W("[t 2");var y=G.valueOf(),L=g[y];if(L===null)return;if(y in g)if(W({name:y,binding:g[y]}),C(L)){W("[t 2 Pair "+d);var P=L.car,R=L.cdr,T=M?b.slice(2):b.cdr.cdr;if(d){if(z(R)||(W("|| next 1"),m(y,R)),M&&T.length||!z(T)&&!M){var X=l(T,g,_,m);if(M)return P.concat(X);if(C(P))return P.append(X);W("UNKNOWN")}return P}else{if(C(P))return z(P.cdr)||(W("|| next 2"),m(y,new O(P.cdr,R))),new Ke(P.car);if(z(R))return P;var j=b.last_pair();if(j.cdr instanceof D)return W("|| next 3"),m(y,L.last_pair()),P}}else if(L instanceof Array){if(W("[t 2 Array "+d),d)return m(y,L.slice(1)),O.fromArray(L);var A=L.slice(1);return A.length&&m(y,A),L[0]}else return L}W("[t 3 recur ",b);var k=M?b.slice(1):b.cdr,q=l(G,g,_,m),te=l(k,g,_,m);return W({head:q,rest:te}),M?[q].concat(te):new O(q,te)}return b}function h(b,g){var _=Object.values(b),m=Object.getOwnPropertySymbols(b);return m.length&&_.push.apply(_,be(m.map(function(d){return b[d]}))),_.length&&_.every(function(d){return d===null?!g:C(d)||z(d)||Array.isArray(d)&&d.length})}function w(b){return Object.keys(b).concat(Object.getOwnPropertySymbols(b))}function B(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=g.disabled;W("traverse>> ",b);var m=Array.isArray(b);if(m&&b.length===0)return b;if(C(b)||m){W(">> 0");var d=m?b[0]:b.car,x,S;if(m?(x=b[1],S=b.slice(2)):C(b.cdr)&&(x=b.cdr.car,S=b.cdr.cdr),W({first:d,second:x,rest_second:S}),!_&&C(d)&&D.is(d.car,u))return new O(d.cdr.car,B(b.cdr));if(x&&D.is(x,u)&&!_){W(">> 1");var I=t["..."].symbols,V=Object.values(I);if(V.length&&V.every(function(vt){return vt===null}))return W(">>> 1 (a)"),B(S,{disabled:_});var K=w(I),Y=d instanceof D&&D.is(S.car,u);if(C(d)||Y){if(W(">>> 1 (b)"),z(t["..."].lists[0]))return Y?(W(S),re):B(S,{disabled:_});var M=d;Y&&(W(">>> 1 (c)"),M=new O(d,new O(x,re))),W(">> 2");var G;if(K.length){W(">> 2 (a)");var ce=se({},I);G=m?[]:re;for(var y=function(){if(W({bind:ce}),!h(ce))return 1;var qt={},on=function(Ct,Tn){qt[Ct]=Tn},je=l(M,ce,{nested:!0},on);if(je!==void 0)if(je instanceof Ke&&(je=je.valueOf()),Y)if(m)if(Array.isArray(je)){var Ln;(Ln=G).push.apply(Ln,be(je))}else W("ZONK {1}");else z(G)?G=je:G=G.append(je);else m?G.push(je):G=new O(je,G);ce=qt};!y(););if(!z(G)&&!Y&&!m&&(G=G.reverse()),m){if(S){W({rest_second:S,expr:b});var L=B(S,{disabled:_});return G.concat(L)}return G}if(!z(b.cdr.cdr)&&!D.is(b.cdr.cdr.car,u)){var P=B(b.cdr.cdr,{disabled:_});return G.append(P)}return G}else{W(">> 3");var R=l(d,I,{nested:!0});return R?(R instanceof Ke&&(R=R.valueOf()),new O(R,re)):re}}else if(d instanceof D){W(">> 4"),D.is(S.car,u)?W(">> 4 (a)"):W(">> 4 (b)");var T=d.__name__,X=Jt({},T,I[T]);W({bind:X});for(var j=I[T]===null,A=m?[]:re,k=function(){if(!h(X,!0))return W({bind:X}),1;var qt={},on=function(ir,Ct){qt[ir]=Ct},je=l(b,X,{nested:!1},on);W({value:je}),typeof je<"u"&&(je instanceof Ke&&(je=je.valueOf()),m?A.push(je):A=new O(je,A)),X=qt};!k(););if(!z(A)&&!m&&(A=A.reverse()),C(b.cdr)&&(C(b.cdr.cdr)||b.cdr.cdr instanceof D)){var q=B(b.cdr.cdr,{disabled:_});if(W({node:q}),j)return q;z(A)?A=q:A.append(q),W({result:A,node:q})}return W("<<<< 2"),W({result:A}),A}}var te=B(d,{disabled:_}),ne,De;if(d instanceof D){var Ce=r.get(d,{throwError:!1});De=Ce instanceof fe&&Ce.__name__==="syntax-rules"}return De?(b.cdr.car instanceof D?ne=new O(B(b.cdr.car,{disabled:_}),new O(b.cdr.cdr.car,B(b.cdr.cdr.cdr,{disabled:_}))):ne=new O(b.cdr.car,B(b.cdr.cdr,{disabled:_})),W("REST >>>> ",ne)):ne=B(b.cdr,{disabled:_}),W({a:!0,car:He(b.car),cdr:He(b.cdr),head:He(te),rest:He(ne)}),new O(te,ne)}if(b instanceof D){if(_&&D.is(b,u))return b;var J=Object.keys(t["..."].symbols),at=b.literal();if(J.includes(at)){var Xe="missing ellipsis symbol next to name `".concat(at,"'");throw new Error("syntax-rules: ".concat(Xe))}var ut=f(b);if(typeof ut<"u")return ut}return b}return B(n,{})}function Kt(e){return _a(e)||z(e)||e===null}function z(e){return e===re}function _e(e){return typeof e=="function"&&typeof e.bind=="function"}function po(e){return no.includes(e)}function Un(e){return e===!1||e===null}function _o(e){return typeof e=="string"}function Qt(e){return e&&e[xo]}function uf(e){return e&&e[hf]}function ho(e){return Qt(e)&&!e[Do]&&!uf(e)&&!go(e)}function Yr(e){var t=Symbol.for("__native__");return _e(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===!0||!e.name.match(/^bound /)&&!e[t])}function gr(e){return e&&ye(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor=="function"&&e.constructor.prototype===e}function la(e){return e instanceof Lo}function lu(e){return e instanceof Qr}function Fn(e){return e instanceof Xr}function C(e){return e instanceof O}function pa(e){return e instanceof xe}function pu(e){return _e(e)||la(e)||Fn(e)||of(e)}function of(e){return e instanceof fe||e instanceof An}function et(e){return e instanceof Pe?!1:e instanceof Promise?!0:!!e&&_e(e.then)}function _a(e){return typeof e>"u"}function sf(e){return Object.getPrototypeOf(e)}function Lr(e,t){if(_u(e,t)||_u(sf(e),t))return _e(e[t])}function mo(e){return!e||ye(e)!=="object"?!1:e.__instance__?(e.__instance__=!1,e.__instance__):!1}function cf(e){var t=ye(e);return["string","function"].includes(t)||ye(e)==="symbol"||e instanceof Pe||e instanceof D||e instanceof p||e instanceof Q||e instanceof RegExp}function vo(e){return e&&(e instanceof p||e instanceof Q||e instanceof he)}function _u(e,t){return e===null?!1:ye(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function ha(e){switch(ye(e)){case"string":return Q(e);case"bigint":return p(e);case"number":return Number.isNaN(e)?Rr:p(e)}return e}function yo(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e),i={};return n.concat(r).forEach(function(a){var u=t(e[a]);i[a]=u}),i}function Zt(e){var t=[Q,p,he].some(function(n){return e instanceof n});return t?e.valueOf():e instanceof Array?e.map(Zt):(e instanceof Pe&&delete e.then,pt(e)?yo(e,Zt):e)}function Tr(e,t){return C(e)?(e.mark_cycles(),Ge(e)):_e(e)&&t?ff(e,t):ha(e)}function nt(e){return da(e)?e[wo]:e}function ff(e,t){if(e[Symbol.for("__bound__")])return e;var n=e.bind(t),r=Object.getOwnPropertyNames(e),i=Tt(r),a;try{for(i.s();!(a=i.n()).done;){var u=a.value;if(mf(u))try{n[u]=e[u]}catch{}}}catch(s){i.e(s)}finally{i.f()}return Bt(n,"__fn__",e),Bt(n,"__context__",t),Bt(n,"__bound__",!0),Yr(e)&&Bt(n,"__native__",!0),pt(t)&&Qt(e)&&Bt(n,"__method__",!0),n.valueOf=function(){return e},n}function lf(e){return da(e)&&e[Symbol.for("__context__")]===Object}function da(e){return!!(_e(e)&&e[wo])}function pf(e){if(_e(e)){var t=e[bo];if(t&&(t===Dt||t.constructor&&t.constructor.__class__))return!0}return!1}function br(e){return e instanceof Je||e instanceof We}function go(e){return!!(_e(e)&&br(e[bo]))}function mf(e){return!df.includes(e)}function _t(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function Bt(e,t,n){Object.defineProperty(e,Symbol.for(t),{get:function(){return n},set:function(){},configurable:!1,enumerable:!1})}function vf(e,t){try{return Object.defineProperty(e,"length",{get:function(){return t}}),e}catch{var n=new Array(t).fill(0).map(function(a,u){return"a"+u}).join(","),r=new Function("f","return function(".concat(n,`) {
                return f.apply(this, arguments);
            };`));return r(e)}}function fr(e){var t;switch(e){case Symbol.for("letrec"):t="letrec";break;case Symbol.for("let"):t="let";break;case Symbol.for("let*"):t="let*";break;default:throw new Error("Invalid let_macro value")}return fe.defmacro(t,function(n,r){var i=r.dynamic_env,a=r.error,u=r.macro_expand,s=r.use_dynamic,o;if(n.car instanceof D){if(!(C(n.cdr.car)||z(n.cdr.car)))throw new Error("let require list of pairs");var f;return z(n.cdr.car)?(o=re,f=re):(f=n.cdr.car.map(function(_){return _.car}),o=n.cdr.car.map(function(_){return _.cdr.car})),new O(O.fromArray([D("letrec"),[[n.car,O(D("lambda"),O(f,n.cdr.cdr))]],n.car]),o)}else if(u)return;var c=this;o=H.get("list->array")(n.car);var l=c.inherit(t),h,w;t==="let*"?w=l:t==="let"&&(h=[]);var B=0;function b(){var _=Ni([l],n.cdr);return ie(_,{env:l,dynamic_env:l,use_dynamic:s,error:a})}function g(_){if(_ in l.__env__)throw new Error("Duplicated let variable ".concat(_))}return function _(){var m=o[B++];if(i=t==="let*"?l:c,m){t==="let"?w=c:t==="letrec"&&(w=l);var M=ie(m.cdr.car,{env:w,dynamic_env:i,use_dynamic:s,error:a});return t==="let*"&&(w=l=w.inherit("let*["+B+"]")),h?(h.push({name:m.car,value:M}),_()):pe(M,function(G){return l.set(m.car,G),_()})}else{if(h&&h.length){var d=h.map(function(G){return G.value}),x=d.filter(et);if(x.length)return On(d).then(function(G){for(var ce=0,y=G.length;ce<y;++ce){var L=h[ce].name;g(L),l.set(L,G[ce])}}).then(b);var S=Tt(h),I;try{for(S.s();!(I=S.n()).done;){var V=I.value,K=V.name,Y=V.value;g(K),l.set(K,Y)}}catch(G){S.e(G)}finally{S.f()}}return b()}}()})}function yf(e,t){return new fe(e,function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.use_dynamic,a=r.error,u=this,s=this,o=[],f=n;C(f);)o.push(ie(f.car,{env:u,dynamic_env:s,use_dynamic:i,error:a})),f=f.cdr;var c=o.filter(et).length;return c?On(o).then(t.bind(this)):t.call(this,o)})}function gf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(i){U("",i,"number")}),e.apply(void 0,n)}function Eo(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i,a){U("pipe",i,"function",a+1)}),function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n.reduce(function(s,o){return[o.apply(e,s)]},a)[0]}}function Ao(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(r,i){U("compose",r,"function",i+1)}),Eo.apply(void 0,be(t.reverse()))}function hu(e,t){var n=this;return function r(i,a){U(e,i,"function");for(var u=arguments.length,s=new Array(u>2?u-2:0),o=2;o<u;o++)s[o-2]=arguments[o];return s.some(Kt)?typeof a=="number"?p(a):a:t.call.apply(t,[n,r,i,a].concat(s))}}function Fo(e,t){return bf(e+1,Gr(gf,t))}function du(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t!==null&&(r=[t].concat(be(r))),r.reduce(wr(e))}}function Gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];U("curry",e,"function");var i=e.length;return function(){var a=this,u=n.slice(),s=function(){return function(){for(var o=arguments.length,f=new Array(o),c=0;c<o;c++)f[c]=arguments[c];return u=u.concat(f),u.length>=i?e.apply(a,u):s}}();return s.apply(void 0,arguments)}}function bf(e,t){return U("limit",t,"function",2),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,be(r.slice(0,e)))}}function he(e){if(typeof this<"u"&&!(this instanceof he)||typeof this>"u")return new he(e);e instanceof Q&&(e=e.valueOf());var t;if(Array.from(e).length>1)if(e=e.toLowerCase(),he.__names__[e])t=e,e=he.__names__[e];else throw new Error("Internal: Unknown named character");else t=he.__rev_names__[e];_t(this,"__char__",e),t&&_t(this,"__name__",t)}function Q(e){if(typeof this<"u"&&!(this instanceof Q)||typeof this>"u")return new Q(e);e instanceof Array?this.__string__=e.map(function(t,n){return U("LString",t,"character",n+1),t.toString()}).join(""):this.__string__=e.valueOf()}function p(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e instanceof p)return e;if(typeof this<"u"&&!(this instanceof p)||typeof this>"u")return new p(e,t);if(typeof e>"u")throw new Error("Invalid LNumber constructor call");var n=p.getType(e);if(p.types[n])return p.types[n](e,t);var r=e instanceof Array&&Q.isString(e[0])&&p.isNumber(e[1]);if(e instanceof p)return p(e.value);if(!p.isNumber(e)&&!r)throw new Error("You can't create LNumber from ".concat(ke(e)));e===null&&(e=0);var i;if(r){var a=e,u=ve(a,2),s=u[0],o=u[1];s instanceof Q&&(s=s.valueOf()),o instanceof p&&(o=o.valueOf());var f=s.match(/^([+-])/),c=!1;f&&(s=s.replace(/^[+-]/,""),f[1]==="-"&&(c=!0))}if(Number.isNaN(e))return ue(e);if(r&&Number.isNaN(parseInt(s,o)))return Rr;if(typeof BigInt<"u"){if(typeof e!="bigint"){if(r){var l;switch(o){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l>"u"){var h=BigInt(o);i=be(s).map(function(w,B){return BigInt(parseInt(w,o))*Kr(h,BigInt(B))}).reduce(function(w,B){return w+B})}else i=BigInt(l+s)}else i=BigInt(e);c&&(i*=BigInt(-1))}else i=e;return Ee(i,!0)}else{if(typeof bt<"u"&&!(e instanceof bt))return e instanceof Array?Ee(Ar(bt,be(e))):Ee(new bt(e));r?this.constant(parseInt(s,o),"integer"):this.constant(e,"integer")}}function Wt(e,t,n,r){return Dr[e][t](n,r)}function oe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof this<"u"&&!(this instanceof oe)||typeof this>"u")return new oe(e,t);if(e instanceof oe)return oe({im:e.__im__,re:e.__re__});if(p.isNumber(e)&&t){if(!t)return Number(e)}else if(!p.isComplex(e)){var n="Invalid constructor call for LComplex expect &(:im <num> :re <num>) object but got ".concat(toString(e));throw new Error(n)}var r=e.im instanceof p?e.im:p(e.im),i=e.re instanceof p?e.re:p(e.re);this.constant(r,i)}function ue(e){if(typeof this<"u"&&!(this instanceof ue)||typeof this>"u")return new ue(e);if(!p.isNumber(e))throw new Error("Invalid constructor call for LFloat");if(e instanceof p)return ue(e.valueOf());typeof e=="number"&&(Object.is(e,-0)&&Object.defineProperty(this,"_minus",{value:!0}),this.constant(e,"float"))}function Co(e){return function(t){var n=function(a,u,s){var o=function(c,l){return l<a?c:o(l,c%l)};return Number.isNaN(u)||Number.isNaN(s)?NaN:o(Math.abs(u),Math.abs(s))},r=n(e||1e-4,1,t);return le({num:Math.floor(t/r),denom:Math.floor(1/r)})}}function Df(e,t){var n=e.sub(t),r=e.add(t),i;return n.cmp(r)>0?i=xr(r,n):r.cmp(n)<=0?i=n:n.cmp(0)>0?i=xr(n,r):t.cmp(0)<0?i=p(xr(r.sub(),n.sub())).sub():i=p(0),p.isFloat(t)||p.isFloat(e)?ue(i):i}function xr(e,t){var n=p(e).floor(),r=p(t).floor();if(e.cmp(n)<1)return n;if(n.cmp(r)===0){var i=p(1).div(t.sub(r)),a=p(1).div(e.sub(n));return n.add(p(1).div(xr(i,a)))}else return n.add(p(1))}function le(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof this<"u"&&!(this instanceof le)||typeof this>"u")return new le(e,t);if(!p.isRational(e))throw new Error("Invalid constructor call for LRational");var n,r;if(e instanceof le?(n=p(e.__num__),r=p(e.__denom__)):(n=p(e.num),r=p(e.denom)),!t&&r.cmp(0)!==0){var i=n.op("%",r).cmp(0)===0;if(i)return p(n.div(r))}this.constant(n,r)}function Ee(e,t){if(typeof this<"u"&&!(this instanceof Ee)||typeof this>"u")return new Ee(e,t);if(e instanceof Ee)return Ee(e.__value__,e._native);if(!p.isBigInteger(e))throw new Error("Invalid constructor call for LBigInteger");this.constant(e,"bigint"),Object.defineProperty(this,"_native",{value:t})}function Je(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H;if(typeof this<"u"&&!(this instanceof Je)||typeof this>"u")return new Je(e);U("InputPort",e,"function"),Z(this,"__type__",In);var r;Object.defineProperty(this,"__parser__",{enumerable:!0,get:function(){return r},set:function(a){U("InputPort::__parser__",a,"parser"),r=a}}),this._read=e,this._with_parser=this._with_init_parser.bind(this,Se(ae.mark(function i(){var a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.char_ready()){s.next=6;break}return s.next=3,t._read();case 3:a=s.sent,r=new Nt({env:n}),r.prepare(a);case 6:return s.abrupt("return",t.__parser__);case 7:case"end":return s.stop()}},i)}))),this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==Be},this._make_defaults()}function We(e){if(typeof this<"u"&&!(this instanceof We)||typeof this>"u")return new We(e);U("OutputPort",e,"function"),Z(this,"__type__",In),this.write=e}function Pt(e){var t=this;if(typeof this<"u"&&!(this instanceof Pt)||typeof this>"u")return new Pt(e);U("OutputStringPort",e,"function"),Z(this,"__type__",In),Z(this,"__buffer__",[]),this.write=function(n){Q.isString(n)?n=n.valueOf():n=e(n),t.__buffer__.push(n)}}function ct(e,t){var n=this;if(typeof this<"u"&&!(this instanceof ct)||typeof this>"u")return new ct(e,t);U("OutputFilePort",e,"string"),Z(this,"__filename__",e),Z(this,"_fd",t.valueOf(),{hidden:!0}),Z(this,"__type__",In),this.write=function(r){Q.isString(r)?r=r.valueOf():r=He(r),n.fs().write(n._fd,r,function(i){if(i)throw i})}}function ht(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H;if(typeof this<"u"&&!(this instanceof ht)||typeof this>"u")return new ht(e);U("InputStringPort",e,"string"),e=e.valueOf(),this._with_parser=this._with_init_parser.bind(this,function(){return t.__parser__||(t.__parser__=new Nt({env:n}),t.__parser__.prepare(e)),t.__parser__}),Z(this,"__type__",In),this._make_defaults()}function en(e){if(typeof this<"u"&&!(this instanceof en)||typeof this>"u")return new en(e);this._with_parser=this._with_init_parser.bind(this,function(){return e}),Z(this,"__type__",In),this._make_defaults()}function tt(e){if(typeof this<"u"&&!(this instanceof tt)||typeof this>"u")return new tt(e);U("InputByteVectorPort",e,"uint8array"),Z(this,"__vector__",e),Z(this,"__type__",Jr);var t=0;Object.defineProperty(this,"__index__",{enumerable:!0,get:function(){return t},set:function(r){if(U("InputByteVectorPort::__index__",r,"number"),r instanceof p&&(r=r.valueOf()),typeof r=="bigint"&&(r=Number(r)),Math.floor(r)!==r)throw new Error("InputByteVectorPort::__index__ value is not integer");t=r}})}function ft(){if(typeof this<"u"&&!(this instanceof ft)||typeof this>"u")return new ft;Z(this,"__type__",Jr),Z(this,"_buffer",[],{hidden:!0}),this.write=function(e){if(U("write",e,["number","uint8array"]),p.isNumber(e))this._buffer.push(e.valueOf());else{var t;(t=this._buffer).push.apply(t,be(Array.from(e)))}},Object.defineProperty(this,"__buffer__",{enumerable:!0,get:function(){return Uint8Array.from(this._buffer)}})}function tn(e,t){if(typeof this<"u"&&!(this instanceof tn)||typeof this>"u")return new tn(e,t);ht.call(this,e),U("InputFilePort",t,"string"),Z(this,"__filename__",t)}function hn(e,t){if(typeof this<"u"&&!(this instanceof hn)||typeof this>"u")return new hn(e,t);tt.call(this,e),U("InputBinaryFilePort",t,"string"),Z(this,"__filename__",t)}function Lt(e,t){var n=this;if(typeof this<"u"&&!(this instanceof Lt)||typeof this>"u")return new Lt(e,t);U("OutputBinaryFilePort",e,"string"),Z(this,"__filename__",e),Z(this,"_fd",t.valueOf(),{hidden:!0}),Z(this,"__type__",Jr);var r;this.write=function(i){U("write",i,["number","uint8array"]);var a;return r||(r=n.internal("fs")),p.isNumber(i)?a=new Uint8Array([i.valueOf()]):a=new Uint8Array(Array.from(i)),new Promise(function(u,s){r.write(n._fd,a,function(o){o?s(o):u()})})}}function ma(){}function dn(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.stderr,i=n.stdin,a=n.stdout,u=n.command_line,s=u===void 0?null:u,o=Cn(n,Xs);if(typeof this<"u"&&!(this instanceof dn)||typeof this>"u")return new dn(e,se({stdin:i,stdout:a,stderr:r,command_line:s},o));typeof e>"u"&&(e="anonymous"),this.__env__=we.inherit(e,o),this.__parser__=new Nt({env:this.__env__}),this.__env__.set("parent.frame",F("parent.frame",function(){return t.__env__},H.__env__["parent.frame"].__doc__));var f="**interaction-environment-defaults**";this.set(f,fo(o).concat(f));var c=Oo.inherit("internal-".concat(e));br(i)&&c.set("stdin",i),br(r)&&c.set("stderr",r),br(a)&&c.set("stdout",a),c.set("command-line",s),Bo(this.__env__,c)}function Qn(e,t){this.name="LipsError",this.message=e,this.args=t,this.stack=new Error().stack}function xe(e,t,n){arguments.length===1&&(ye(arguments[0])==="object"?(e=arguments[0],t=null):typeof arguments[0]=="string"&&(e={},t=null,n=arguments[0])),this.__docs__=new Map,this.__env__=e,this.__parent__=t,this.__name__=n||"anonymous"}function Ke(e){if(typeof this<"u"&&!(this instanceof Ke)||typeof this>"u")return new Ke(e);this.value=e}function nn(e){if(e.length){if(e.length===1)return e[0];if(typeof this<"u"&&!(this instanceof nn)||typeof this>"u")return new nn(e);this.__values__=e}}function Ge(e){return et(e)?e.then(Ge):((C(e)||e instanceof D)&&(e[wt]=!0),e)}function So(e){return Ef(e,"**internal-env**")}function wn(e,t){var n=So(e);return n.get(t)}function Ef(e,t){var n=e.get("**interaction-environment**");return n.get(t)}function Bo(e,t){e.constant("**internal-env**",t),e.doc("**internal-env**",`**internal-env**

         Constant used to hide stdin, stdout and stderr so they don't interfere
         with variables with the same name. Constants are an internal type
         of variable that can't be redefined, defining a variable with the same name
         will throw an error.`),H.set("**interaction-environment**",e)}function Af(e){we.get("**internal-env**").set("fs",e)}function Io(e){if(e.length===1)return e[0];for(var t=[],n=Io(e.slice(1)),r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push(e[0][i]+n[r]);return t}function Ff(e,t,n){for(var r=[],i=t;i<=n;++i){for(var a=[],u=0;u<i;++u)a.push(e);r=r.concat(Io(a))}return r}function kf(e,t){for(var n=e.split(Gt.sep).filter(Boolean),r=n.length;r--;){var i,a=(i=Gt).join.apply(i,["/"].concat(be(n.slice(0,r+1))));if(t(a))return a}}function Cf(e){return kf(e,function(t){return qu.existsSync(Gt.join(t,"node_modules"))})}function va(){return typeof global<"u"&&global.global===global}function Sf(){return $i.apply(this,arguments)}function $i(){return $i=Se(ae.mark(function e(){var t,n,r,i,a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,import("module");case 2:return t=s.sent,n=t.createRequire,Yt=n(import.meta.url),s.next=7,import("fs");case 7:return qu=s.sent,s.next=10,import("path");case 10:Gt=s.sent,H.set("global",global),H.set("self",global),H.set("window",void 0),r=new URL(import.meta.url),i=Gt.dirname(r.pathname),a=Gt.basename(r.pathname),H.set("__dirname",i),H.set("__filename",a),H.set("require.resolve",F("require.resolve",function(o){U("require.resolve",o,"string");var f=o.valueOf();return Yt.resolve(f)},`(require.resolve path)

        Returns the path relative to the current module.

        Only available when LIPS is running under Node.js.`)),H.set("require",F("require",function(o){U("require",o,"string"),o=o.valueOf();var f=process.cwd(),c;try{if(o.match(/^\s*\./))c=Yt(Gt.join(f,o));else{var l=Cf(f);l?c=Yt(Gt.join(l,"node_modules",o)):c=Yt(o)}}catch{c=Yt(o)}return Tr(c,global)},`(require module)

        Function used inside Node.js to import a module.`)),process.on("unhandledRejection",function(o,f){o instanceof Wn&&f.catch(jo)});case 22:case"end":return s.stop()}},e)})),$i.apply(this,arguments)}function Xt(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e?" in expression `".concat(e,"`"):"";if(r!==null&&(i+=" (argument ".concat(r,")")),_e(n))return"Invalid type: got ".concat(t).concat(i);if(n instanceof Array)if(n.length===1){var a=n[0].toLowerCase();n="a"+("aeiou".includes(a)?"n ":" ")+n[0]}else n=new Intl.ListFormat("en",{style:"long",type:"disjunction"}).format(n);return"Expecting ".concat(n," got ").concat(t).concat(i)}function No(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;U(e,t,"number",r);var i=t.__type__,a;if(C(n)&&(n=n.to_array()),n instanceof Array&&(n=n.map(function(u){return u.valueOf()})),n instanceof Array?(n=n.map(function(u){return u.valueOf().toLowerCase()}),n.includes(i)&&(a=!0)):n=n.valueOf().toLowerCase(),!a&&i!==n)throw new Error(Xt(e,i,n,r))}function lr(e,t,n){t.forEach(function(r,i){No(e,r,n,i+1)})}function sn(e,t,n){t.forEach(function(r,i){U(e,r,n,i+1)})}function pr(e,t,n){if(U(e,t,n),t.__type__===Jr)throw new Error(Xt(e,"binary-port","textual-port"))}function U(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;e=e.valueOf();var i=ke(t).toLowerCase();if(_e(n)){if(!n(t))throw new Error(Xt(e,i,n,r));return}var a=!1;if(C(n)&&(n=n.to_array()),n instanceof Array&&(n=n.map(function(u){return u.valueOf()})),n instanceof Array?(n=n.map(function(u){return u.valueOf().toLowerCase()}),n.includes(i)&&(a=!0)):n=n.valueOf().toLowerCase(),!a&&i!==n)throw new Error(Xt(e,i,n,r))}function Of(e){var t=new WeakMap;return function(n){var r=t.get(n);return r||(r=e(n)),r}}function ke(e){var t=uc.get(e);if(t)return t;if(ye(e)==="object"){for(var n=0,r=Object.entries(ac);n<r.length;n++){var i=ve(r[n],2),a=i[0],u=i[1];if(e instanceof u)return a}if(mo(e))return _e(e.typeOf)?e.typeOf():"instance";if(e.constructor){if(e.constructor.__class__)return e.constructor.__class__;if(e.constructor===Object){if(Lr(e,Symbol.iterator))return"iterator";if(Lr(e,Symbol.asyncIterator))return"async-iterator"}return e.constructor.name===""?"object":e.constructor.name.toLowerCase()}}return e===void 0?"void":ye(e)}function jn(e){var t=[];if(n(e),t.length)return a(e);return e;function n(u){et(u)?t.push(u):C(u)?(u.have_cycles("car")||n(u.car),u.have_cycles("cdr")||n(u.cdr)):u instanceof Array&&u.forEach(n)}function r(u){return i.apply(this,arguments)}function i(){return i=Se(ae.mark(function u(s){var o;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=O,!s.have_cycles("car")){c.next=5;break}c.t1=s.car,c.next=8;break;case 5:return c.next=7,a(s.car);case 7:c.t1=c.sent;case 8:if(c.t2=c.t1,!s.have_cycles("cdr")){c.next=13;break}c.t3=s.cdr,c.next=16;break;case 13:return c.next=15,a(s.cdr);case 15:c.t3=c.sent;case 16:return c.t4=c.t3,o=new c.t0(c.t2,c.t4),s[wt]&&(o[wt]=!0),c.abrupt("return",o);case 20:case"end":return c.stop()}},u)})),i.apply(this,arguments)}function a(u){return u instanceof Array?On(u.map(a)):C(u)&&t.length?r(u):u}}function Bf(e,t){var n=t.use_dynamic,r=Cn(t,Zs),i=[],a=e;function u(){return i}return function s(){if(C(a)){var o=ie(a.car,se({use_dynamic:n},r));return n&&(o=pe(o,function(f){return Yr(f)?f.bind(dynamic_env):f})),pe(jn(o),function(f){if(i.push(f),a.have_cycles("cdr"))throw new Error("Invalid expression: Can't evaluate cycle");return a=a.cdr,s()})}else{if(z(a))return u();throw new Error("Syntax Error: improper list found in apply")}}()}function bu(e,t,n){var r=e.invoke(t,n);return pe(jn(r),function(i){return C(i)&&i.mark_cycles(),Ge(i)})}function If(e,t,n){function r(a){return C(a)?(a.mark_cycles(),a):Ge(a)}var i=e.invoke(t,n);return pe(jn(i),function(u){return!u||u&&u[wt]||cf(u)?u:pe(ie(u,n),r)},function(a){throw a})}function Po(e,t){if(da(e)&&!lf(e)&&(!pf(e)||go(e))&&(t=t.map(Zt)),!ho(e)&&t.some(mi)&&!mi(e)&&!Vc(e)){for(var n=[],r=t.length,i=function(){var s=t[r];mi(s)?(a=function(){for(var f=arguments.length,c=new Array(f),l=0;l<f;l++)c[l]=arguments[l];return pe(s.apply(this,c),Zt)},Bt(a,"__bound__",!0),Bt(a,"__fn__",s),a.prototype=s.prototype,n[r]=a):n[r]=s},a;r--;)i();t=n}return t}function En(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.env,i=n.dynamic_env,a=n.use_dynamic,u=r?.new_frame(e,t),s=i?.new_frame(e,t),o=new Qr({env:u,use_dynamic:a,dynamic_env:s});return jn(e.apply(o,t))}function jf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.env,i=n.dynamic_env,a=n.use_dynamic,u=n.error,s=u===void 0?function(){}:u;return t=Bf(t,{env:r,dynamic_env:i,error:s,use_dynamic:a}),pe(t,function(o){ho(e)&&(e=nt(e)),o=Po(e,o);var f=o.slice(),c=En(e,f,{env:r,dynamic_env:i,use_dynamic:a});return pe(c,function(l){return C(l)?(l.mark_cycles(),Ge(l)):ha(l)},s)})}function Nf(e,t){var n=e.get(t.__name__,{throwError:!1});if(Fn(n)&&n!==t)return n;for(var r=we.get("**interaction-environment**");;){var i=e.get("parent.frame",{throwError:!1});if(e=i(0),e===r)break;if(n=e.get(t.__name__,{throwError:!1}),Fn(n)&&n!==t)return n}return t}function ie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.env,r=t.dynamic_env,i=t.use_dynamic,a=t.error,u=a===void 0?jo:a,s=Cn(t,ec);return function(o){try{pa(r)||(r=n===!0?we:n||we),i?n=r:n===!0?n=we:n=n||H;var f={env:n,dynamic_env:r,use_dynamic:i,error:u},c;if(Kt(e))return e;if(e instanceof D)return n.get(e);if(!C(e))return e;var l=e.car,o=e.cdr;if(C(l)){if(c=jn(ie(l,f)),et(c))return c.then(function(g){if(!pu(g))throw new Error(ke(g)+" "+n.get("repr")(g)+" is not callable while evaluating "+e.toString());return ie(new O(g,e.cdr),f)});if(!pu(c))throw new Error(ke(c)+" "+n.get("repr")(c)+" is not callable while evaluating "+e.toString())}l instanceof D?c=n.get(l):_e(l)&&(c=l);var h;if(c instanceof Me)h=bu(c,e,f);else if(c instanceof fe)h=If(c,o,f);else if(_e(c))h=jf(c,o,f);else if(c instanceof An)h=bu(c._syntax,e,f);else if(Fn(c)){var w=Nf(r,c);if(Kt(e.cdr))h=w.invoke();else return pe(ie(e.cdr.car,f),function(g){w.__value__=g})}else if(la(c))h=c.invoke();else{if(C(e))throw c=l&&l.toString(),new Error("".concat(ke(l)," ").concat(c," is not a function"));return e}var B=n.get(Symbol.for("__promise__"),{throwError:!1});return B===!0&&et(h)?(h=h.then(function(g){return C(g)&&!c[wt]?ie(g,f):g}),new Pe(h)):h}catch(b){u&&u.call(n,b,e)}}(s)}function wu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.env,r=t.dynamic_env,i=t.use_dynamic;return ie(e,{env:n,dynamic_env:r,use_dynamic:i,error:function(u,s){if(u&&u.message){if(u.message.match(/^Error:/)){var o=/^(Error:)\s*([^:]+:\s*)/;u.message=u.message.replace(o,"$1 $2")}s&&(u.__code__ instanceof Array||(u.__code__=[]),u.__code__.push(s.toString(!0)))}if(!(u instanceof Wn))throw u}})}function To(e){return function(){var t=Se(function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.env,u=i.dynamic_env,s=i.use_dynamic;return ae.mark(function o(){var f,c,l,h,w,B,b,g,_;return ae.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(pa(u)||(u=a===!0?we:a||we),a===!0?a=we:a=a||we,f=[],!C(r)){d.next=8;break}return d.next=6,wu(r,{env:a,dynamic_env:u,use_dynamic:s});case 6:return d.t0=d.sent,d.abrupt("return",[d.t0]);case 8:c=Array.isArray(r)?r:oa(r),l=!1,h=!1,d.prev=11,B=Uu(c);case 13:return d.next=15,B.next();case 15:if(!(l=!(b=d.sent).done)){d.next=24;break}return g=b.value,d.next=19,wu(g,{env:a,dynamic_env:u,use_dynamic:s});case 19:_=d.sent,f.push(e(g,_));case 21:l=!1,d.next=13;break;case 24:d.next=30;break;case 26:d.prev=26,d.t1=d.catch(11),h=!0,w=d.t1;case 30:if(d.prev=30,d.prev=31,!(l&&B.return!=null)){d.next=35;break}return d.next=35,B.return();case 35:if(d.prev=35,!h){d.next=38;break}throw w;case 38:return d.finish(35);case 39:return d.finish(30);case 40:return d.abrupt("return",f);case 41:case"end":return d.stop()}},o,null,[[11,26,30,40],[31,,35,39]])})()});function n(r){return t.apply(this,arguments)}return n}()}function Er(e){var t={"[":"]","(":")"},n;if(typeof e=="string")try{n=Sn(e)}catch(l){if(l instanceof Hr)return!1;throw l}else n=e.map(function(l){return l&&l.token?l.token:l});var r=Object.keys(t),i=Object.values(t).concat(r);n=n.filter(function(l){return i.includes(l)});var a=new er,u=Tt(n),s;try{for(u.s();!(s=u.n()).done;){var o=s.value;if(r.includes(o))a.push(o);else{if(a.is_empty())throw new Error("Syntax error: not matched closing ".concat(o));var f=a.top(),c=t[f];if(o===c)a.pop();else throw new Error("Syntax error: missing closing ".concat(c))}}}catch(l){u.e(l)}finally{u.f()}return a.is_empty()}function Lf(e){var t="("+e.toString()+")()",n=window.URL||window.webkitURL,r;try{r=new Blob([t],{type:"application/javascript"})}catch{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;r=new i,r.append(t),r=r.getBlob()}return new jt.Worker(n.createObjectURL(r))}function Tf(){return Dt.version.match(/^(\{\{VER\}\}|DEV)$/)}function Mf(){if(!va()){var e;if(document.currentScript)e=document.currentScript;else{var t=document.querySelectorAll("script");if(!t.length)return;e=t[t.length-1]}var n=e.getAttribute("src");return n}}function kn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t="dist/std.xcb";e===""&&($r?e=$r.replace(/[^/]*$/,"std.xcb"):Tf()?e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t):e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(Dt.version,"/").concat(t)),H.set("__dirname",e.replace(/[^/]+$/,""));var n=H.get("load");return n.call(we,e,H)}function Rf(e){this.url=e;var t=this.worker=Lf(function(){var n,r;self.addEventListener("message",function(i){var a=i.data,u=a.id;if(a.type!=="RPC"||u===null)return;function s(c){self.postMessage({id:u,type:"RPC",result:c})}function o(c){self.postMessage({id:u,type:"RPC",error:c})}if(a.method==="eval"){if(!r){o("Worker RPC: LIPS not initialized, call init first");return}r.then(function(){var c=a.params[0],l=a.params[1];n.exec(c,{use_dynamic:l}).then(function(h){h=h.map(function(w){return w&&w.valueOf()}),s(h)}).catch(function(h){o(h)})})}else if(a.method==="init"){var f=a.params[0];typeof f!="string"?o("Worker RPC: url is not a string"):(importScripts("".concat(f,"/dist/lips.min.js")),n=new Dt.Interpreter("worker"),r=kn(f),r.then(function(){s(!0)}))}})});this.rpc=function(){var n=0;return function(i,a){var u=++n;return new Promise(function(s,o){t.addEventListener("message",function f(c){var l=c.data;l&&l.type==="RPC"&&l.id===u&&(l.error?o(l.error):s(l.result),t.removeEventListener("message",f))}),t.postMessage({type:"RPC",method:i,id:u,params:a})})}}(),this.rpc("init",[e]).catch(function(n){console.error(n)}),this.exec=function(n,r){var i=r.use_dynamic,a=i===void 0?!1:i;return this.rpc("eval",[n,a])}}function Eu(e){return Ro[e]}function $f(e){return Mo[e]}function Uf(e){return JSON.stringify(e,function(t,n){var r=this[t];if(r){if(r instanceof RegExp)return{"@":Eu("regex"),"#":[r.source,r.flags]};var i=Eu(r.constructor.__class__);if(!_a(i))return{"@":i,"#":r.serialize()}}return n})}function $o(e){return JSON.parse(e,function(t,n){if(n&&ye(n)==="object"&&!_a(n["@"])){var r=$f(n["@"]);if(Ur[r])return Ur[r](n["#"])}return n})}function qf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){var r=t.reduce(function(u,s){return u+s.length},0),i=new Uint8Array(r),a=0;return t.forEach(function(u){i.set(u,a),a+=u.length}),i}else if(t.length)return t[0]}function zf(){var e=1,t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}function Vf(e){var t=new TextDecoder("utf-8"),n=t.decode(e.slice(0,qo)),r=n.substring(0,4);if(r==="LIPS"){var i=n.match(/^(....).*([0-9]+)$/);if(i)return{type:i[1],version:Number(i[2])}}return{type:"unknown"}}function Hf(e){var t=zf(),n=Uo.encode(e);return qf(t,Mu.pack(n,{magic:!1}))}function zo(e){var t=Vf(e),n=t.type,r=t.version;if(n==="LIPS"&&r===1){var i=Mu.unpack(e.slice(qo),{magic:!1});return Uo.decode(i)}else throw new Error("Invalid file format ".concat(n))}function Au(e){console.error(e.message||e),Array.isArray(e.code)&&console.error(e.code.map(function(t,n){return"[".concat(n+1,"]: ").concat(t)}))}function Wf(){var e=["text/x-lips","text/x-scheme"],t;function n(s){var o;return(o=s.getAttribute("data-bootstrap"))!==null&&o!==void 0?o:s.getAttribute("bootstrap")}function r(s){return new Promise(function(o){var f=s.getAttribute("src");return f?fetch(f).then(function(c){return c.text()}).then(rn).then(o).catch(function(c){Au(c),o()}):rn(s.innerHTML).then(o).catch(function(c){Au(c),o()})})}function i(){return new Promise(function(s){var o=Array.from(document.querySelectorAll("script"));return function f(){var c=o.shift();if(!c)s();else{var l=c.getAttribute("type");if(e.includes(l)){var h=n(c);return!t&&typeof h=="string"?kn(h).then(function(){return r(c)}).then(f):r(c).then(f)}else l&&l.match(/lips|lisp/)&&console.warn("Expecting "+e.join(" or ")+" found "+l);return f()}}()})}if(window.document){if(Fu){var a=Fu,u=n(a);if(typeof u=="string")return kn(u).then(function(){return t=!0,i()})}}else return Promise.resolve();return i()}var si,ci,Na,Pa,fi,La,Fs,ae,Ai,ee,_n,N,ks,Cs,Ss,Ta,Ma,yn,Mn,St,de,Ie,Cr,Sr,Jn,Re,ot,Ne,Fi,rt,Ze,Vn,Ra,Xn,ju,Or,$a,Os,Ue,Pu,ur,It,Si,Ns,Lu,Ps,Ls,Ua,Ts,Hi,Wi,dr,Br,Yi,qr,Zn,li,qa,za,Va,pi,E,Fe,v,Vt,Te,Us,qs,it,Ir,jr,zs,Vs,Gi,Ga,Ws,hi,Rn,Ka,Mu,Ks,Js,Xs,Qs,Zs,ec,jt,ac,uc,qu,Gt,Yt,bt,Qi,ji,sc,zr,cc,Wu,lc,pc,Yu,ea,ta,na,Gu,Ku,hc,dc,mc,Nr,ua,Oe,Zu,eo,$,to,no,nu,Nt,Hr,or,Ae,tr,ln,ze,Wr,Rc,Ot,au,$c,Ht,uu,sr,cr,Uc,di,ao,qc,re,Hn,oo,so,Ti,Mi,Gc,Xc,lo,cu,An,bo,wo,wt,xn,Ve,_f,hf,Do,xo,df,bn,wr,mu,vu,yu,qn,yi,gi,Dr,bi,ko,Kr,wi,wf,Mr,Jr,In,Be,Wn,xf,Yn,Oo,Rr,gu,H,we,jo,Ui,_r,Xr,Qr,Lo,Pf,rn,$r,Ur,Mo,Ro,xi,Du,xu,hr,Di,Uo,qo,Fu,Yf,Gf,Kf,ya,Dt,ga=Ye(()=>{zn.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},zn.prototype.next=function(e){return this._invoke("next",e)},zn.prototype.throw=function(e){return this._invoke("throw",e)},zn.prototype.return=function(e){return this._invoke("return",e)};si={exports:{}},ci={exports:{}};Fs=As(),ae=Ds(Fs);try{Ai=new TextDecoder}catch{}N=0,ks=105,Cs=57342,Ss=57343,Ta=57337,Ma=6,yn={},Mn=11281e4,St=1681e4,de={},Sr=0,Jn=0,Ne=[],Fi=[],Ra={useRecords:!1,mapsAsObjects:!0},Xn=!1,ju=2;try{new Function("")}catch{ju=1/0}Or=class e{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[n,r]of Object.entries(t.keyMap))this.mapKey.set(r,n)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let n=new Map;for(let[r,i]of Object.entries(t))n.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,i);return n}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[r,i]of Object.entries(this._keyMap))this._mapKey.set(i,r)}let n={};return t.forEach((r,i)=>n[st(this._mapKey.has(i)?this._mapKey.get(i):i)]=r),n}mapDecode(t,n){let r=this.decode(t);if(this._keyMap)switch(r.constructor.name){case"Array":return r.map(i=>this.decodeKeys(i))}return r}decode(t,n){if(ee)return Tu(()=>(Oi(),this?this.decode(t,n):e.prototype.decode.call(Ra,t,n)));_n=n>-1?n:t.length,N=0,Jn=0,Cr=null,Re=null,ee=t;try{Ze=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw ee=null,t instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof e){if(de=this,rt=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return Ie=this.structures,ar();(!Ie||Ie.length>0)&&(Ie=[])}else de=Ra,(!Ie||Ie.length>0)&&(Ie=[]),rt=null;return ar()}decodeMultiple(t,n){let r,i=0;try{let a=t.length;Xn=!0;let u=this?this.decode(t,a):Wi.decode(t,a);if(n){if(n(u)===!1)return;for(;N<a;)if(i=N,n(ar())===!1)return}else{for(r=[u];N<a;)i=N,r.push(ar());return r}}catch(a){throw a.lastPosition=i,a.values=r,a}finally{Xn=!1,Oi()}}};$a=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;Os=Ci;Ue=String.fromCharCode;Pu=new Float32Array(1),ur=new Uint8Array(Pu.buffer,0,4);new Array(4096);It=class{constructor(t,n){this.value=t,this.tag=n}};Ne[0]=e=>new Date(e);Ne[1]=e=>new Date(Math.round(e*1e3));Ne[2]=e=>{let t=BigInt(0);for(let n=0,r=e.byteLength;n<r;n++)t=BigInt(e[n])+(t<<BigInt(8));return t};Ne[3]=e=>BigInt(-1)-Ne[2](e);Ne[4]=e=>+(e[1]+"e"+e[0]);Ne[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));Si=(e,t)=>{e=e-57344;let n=Ie[e];n&&n.isShared&&((Ie.restoreStructures||(Ie.restoreStructures=[]))[e]=n),Ie[e]=t,t.read=ki(t)};Ne[ks]=e=>{let t=e.length,n=e[1];Si(e[0],n);let r={};for(let i=2;i<t;i++){let a=n[i-2];r[st(a)]=e[i]}return r};Ne[14]=e=>Re?Re[0].slice(Re.position0,Re.position0+=e):new It(e,14);Ne[15]=e=>Re?Re[1].slice(Re.position1,Re.position1+=e):new It(e,15);Ns={Error,RegExp};Ne[27]=e=>(Ns[e[0]]||Error)(e[1],e[2]);Lu=e=>{if(ee[N++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw ee.length<N&&(n.incomplete=!0),n}let t=e();if(!t||!t.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return rt=rt?t.concat(rt.slice(t.length)):t,rt.prefixes=e(),rt.suffixes=e(),e()};Lu.handlesRead=!0;Ne[51]=Lu;Ne[Ma]=e=>{if(!rt)if(de.getShared)Vi();else return new It(e,Ma);if(typeof e=="number")return rt[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw e===void 0&&(t.incomplete=!0),t};Ne[28]=e=>{ot||(ot=new Map,ot.id=0);let t=ot.id++,n=N,r=ee[N],i;r>>5==4?i=[]:i={};let a={target:i};ot.set(t,a);let u=e();return a.used?(Object.getPrototypeOf(i)!==Object.getPrototypeOf(u)&&(N=n,i=u,ot.set(t,{target:i}),u=e()),Object.assign(i,u)):(a.target=u,u)};Ne[28].handlesRead=!0;Ne[29]=e=>{let t=ot.get(e);return t.used=!0,t.target};Ne[258]=e=>new Set(e);(Ne[259]=e=>(de.mapsAsObjects&&(de.mapsAsObjects=!1,Vn=!0),e())).handlesRead=!0;Ps=1399353956;Fi.push((e,t)=>{if(e>=225&&e<=255)return gn(cn().prefixes[e-224],t);if(e>=28704&&e<=32767)return gn(cn().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return gn(cn().prefixes[e-1879048192],t);if(e>=216&&e<=223)return gn(t,cn().suffixes[e-216]);if(e>=27647&&e<=28671)return gn(t,cn().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return gn(t,cn().suffixes[e-1811939328]);if(e==Ps)return{packedValues:rt,structures:Ie.slice(0),version:t};if(e==55799)return t});Ls=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,Ua=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],Ts=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<Ua.length;e++)Ms(Ua[e],Ts[e]);Hi=new Array(147);for(let e=0;e<256;e++)Hi[e]=+("1e"+Math.floor(45.15-e*.30103));Wi=new Or({useRecords:!1});Wi.decode;Wi.decodeMultiple;try{dr=new TextEncoder}catch{}qr=typeof globalThis=="object"&&globalThis.Buffer,Zn=typeof qr<"u",li=Zn?qr.allocUnsafeSlow:Uint8Array,qa=Zn?qr:Uint8Array,za=256,Va=Zn?4294967296:2144337920,v=0,Te=null,Us=61440,qs=/[\u0080-\uFFFF]/,it=Symbol("record-id"),Ir=class extends Or{constructor(t){super(t),this.offset=0;let n,r,i,a,u;t=t||{};let s=qa.prototype.utf8Write?function(y,L,P){return E.utf8Write(y,L,P)}:dr&&dr.encodeInto?function(y,L){return dr.encodeInto(y,E.subarray(L)).written}:!1,o=this,f=t.structures||t.saveStructures,c=t.maxSharedStructures;if(c==null&&(c=f?128:0),c>8190)throw new Error("Maximum maxSharedStructure is 8190");let l=t.sequential;l&&(c=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let h,w,B=t.sharedValues,b;if(B){b=Object.create(null);for(let y=0,L=B.length;y<L;y++)b[B[y]]=y}let g=[],_=0,m=0;this.mapEncode=function(y,L){if(this._keyMap&&!this._mapped)switch(y.constructor.name){case"Array":y=y.map(P=>this.encodeKeys(P));break}return this.encode(y,L)},this.encode=function(y,L){if(E||(E=new li(8192),Fe=new DataView(E.buffer,0,8192),v=0),Vt=E.length-10,Vt-v<2048?(E=new li(E.length),Fe=new DataView(E.buffer,0,E.length),Vt=E.length-10,v=0):L===Ga&&(v=v+7&2147483640),n=v,o.useSelfDescribedHeader&&(Fe.setUint32(v,3654940416),v+=3),u=o.structuredClone?new Map:null,o.bundleStrings&&typeof y!="string"?(Te=[],Te.size=1/0):Te=null,r=o.structures,r){if(r.uninitialized){let R=o.getShared()||{};o.structures=r=R.structures||[],o.sharedVersion=R.version;let T=o.sharedValues=R.packedValues;if(T){b={};for(let X=0,j=T.length;X<j;X++)b[T[X]]=X}}let P=r.length;if(P>c&&!l&&(P=c),!r.transitions){r.transitions=Object.create(null);for(let R=0;R<P;R++){let T=r[R];if(!T)continue;let X,j=r.transitions;for(let A=0,k=T.length;A<k;A++){j[it]===void 0&&(j[it]=R);let q=T[A];X=j[q],X||(X=j[q]=Object.create(null)),j=X}j[it]=R|1048576}}l||(r.nextId=P)}if(i&&(i=!1),a=r||[],w=b,t.pack){let P=new Map;if(P.values=[],P.encoder=o,P.maxValues=t.maxPrivatePackedValues||(b?16:1/0),P.objectMap=b||!1,P.samplingPackedValues=h,mr(y,P),P.values.length>0){E[v++]=216,E[v++]=51,gt(4);let R=P.values;d(R),gt(0),gt(0),w=Object.create(b||null);for(let T=0,X=R.length;T<X;T++)w[R[T]]=T}}pi=L&hi;try{if(pi)return;if(d(y),Te&&Wa(n,d),o.offset=v,u&&u.idsToInsert){v+=u.idsToInsert.length*2,v>Vt&&S(v),o.offset=v;let P=Hs(E.subarray(n,v),u.idsToInsert);return u=null,P}return L&Ga?(E.start=n,E.end=v,E):E.subarray(n,v)}finally{if(r){if(m<10&&m++,r.length>c&&(r.length=c),_>1e4)r.transitions=null,m=0,_=0,g.length>0&&(g=[]);else if(g.length>0&&!l){for(let P=0,R=g.length;P<R;P++)g[P][it]=void 0;g=[]}}if(i&&o.saveShared){o.structures.length>c&&(o.structures=o.structures.slice(0,c));let P=E.subarray(n,v);return o.updateSharedData()===!1?o.encode(y):P}L&Ws&&(v=n)}},this.findCommonStringsToPack=()=>(h=new Map,b||(b=Object.create(null)),y=>{let L=y&&y.threshold||4,P=this.pack?y.maxPrivatePackedValues||16:0;B||(B=this.sharedValues=[]);for(let[R,T]of h)T.count>L&&(b[R]=P++,B.push(R),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);h=null});let d=y=>{v>Vt&&(E=S(v));var L=typeof y,P;if(L==="string"){if(w){let j=w[y];if(j>=0){j<16?E[v++]=j+224:(E[v++]=198,j&1?d(15-j>>1):d(j-16>>1));return}else if(h&&!t.pack){let A=h.get(y);A?A.count++:h.set(y,{count:1})}}let R=y.length;if(Te&&R>=4&&R<1024){if((Te.size+=R)>Us){let A,k=(Te[0]?Te[0].length*3+Te[1].length:0)+10;v+k>Vt&&(E=S(v+k)),E[v++]=217,E[v++]=223,E[v++]=249,E[v++]=Te.position?132:130,E[v++]=26,A=v-n,v+=4,Te.position&&Wa(n,d),Te=["",""],Te.size=0,Te.position=A}let j=qs.test(y);Te[j?0:1]+=y,E[v++]=j?206:207,d(R);return}let T;R<32?T=1:R<256?T=2:R<65536?T=3:T=5;let X=R*3;if(v+X>Vt&&(E=S(v+X)),R<64||!s){let j,A,k,q=v+T;for(j=0;j<R;j++)A=y.charCodeAt(j),A<128?E[q++]=A:A<2048?(E[q++]=A>>6|192,E[q++]=A&63|128):(A&64512)===55296&&((k=y.charCodeAt(j+1))&64512)===56320?(A=65536+((A&1023)<<10)+(k&1023),j++,E[q++]=A>>18|240,E[q++]=A>>12&63|128,E[q++]=A>>6&63|128,E[q++]=A&63|128):(E[q++]=A>>12|224,E[q++]=A>>6&63|128,E[q++]=A&63|128);P=q-v-T}else P=s(y,v+T,X);P<24?E[v++]=96|P:P<256?(T<2&&E.copyWithin(v+2,v+1,v+1+P),E[v++]=120,E[v++]=P):P<65536?(T<3&&E.copyWithin(v+3,v+2,v+2+P),E[v++]=121,E[v++]=P>>8,E[v++]=P&255):(T<5&&E.copyWithin(v+5,v+3,v+3+P),E[v++]=122,Fe.setUint32(v,P),v+=4),v+=P}else if(L==="number")if(!this.alwaysUseFloat&&y>>>0===y)y<24?E[v++]=y:y<256?(E[v++]=24,E[v++]=y):y<65536?(E[v++]=25,E[v++]=y>>8,E[v++]=y&255):(E[v++]=26,Fe.setUint32(v,y),v+=4);else if(!this.alwaysUseFloat&&y>>0===y)y>=-24?E[v++]=31-y:y>=-256?(E[v++]=56,E[v++]=~y):y>=-65536?(E[v++]=57,Fe.setUint16(v,~y),v+=2):(E[v++]=58,Fe.setUint32(v,~y),v+=4);else{let R;if((R=this.useFloat32)>0&&y<4294967296&&y>=-2147483648){E[v++]=250,Fe.setFloat32(v,y);let T;if(R<4||(T=y*Hi[(E[v]&127)<<1|E[v+1]>>7])>>0===T){v+=4;return}else v--}E[v++]=251,Fe.setFloat64(v,y),v+=8}else if(L==="object")if(!y)E[v++]=246;else{if(u){let T=u.get(y);if(T){if(E[v++]=216,E[v++]=29,E[v++]=25,!T.references){let X=u.idsToInsert||(u.idsToInsert=[]);T.references=[],X.push(T)}T.references.push(v-n),v+=2;return}else u.set(y,{offset:v-n})}let R=y.constructor;if(R===Object)x(y);else if(R===Array){P=y.length,P<24?E[v++]=128|P:gt(P);for(let T=0;T<P;T++)d(y[T])}else if(R===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(E[v++]=217,E[v++]=1,E[v++]=3),P=y.size,P<24?E[v++]=160|P:P<256?(E[v++]=184,E[v++]=P):P<65536?(E[v++]=185,E[v++]=P>>8,E[v++]=P&255):(E[v++]=186,Fe.setUint32(v,P),v+=4),o.keyMap)for(let[T,X]of y)d(o.encodeKey(T)),d(X);else for(let[T,X]of y)d(T),d(X);else{for(let T=0,X=Br.length;T<X;T++){let j=Yi[T];if(y instanceof j){let A=Br[T],k=A.tag;k==null&&(k=A.getTag&&A.getTag.call(this,y)),k<24?E[v++]=192|k:k<256?(E[v++]=216,E[v++]=k):k<65536?(E[v++]=217,E[v++]=k>>8,E[v++]=k&255):k>-1&&(E[v++]=218,Fe.setUint32(v,k),v+=4),A.encode.call(this,y,d,S);return}}if(y[Symbol.iterator]){if(pi){let T=new Error("Iterable should be serialized as iterator");throw T.iteratorNotHandled=!0,T}E[v++]=159;for(let T of y)d(T);E[v++]=255;return}if(y[Symbol.asyncIterator]||_i(y)){let T=new Error("Iterable/blob should be serialized as iterator");throw T.iteratorNotHandled=!0,T}if(this.useToJSON&&y.toJSON){let T=y.toJSON();if(T!==y)return d(T)}x(y)}}else if(L==="boolean")E[v++]=y?245:244;else if(L==="bigint"){if(y<BigInt(1)<<BigInt(64)&&y>=0)E[v++]=27,Fe.setBigUint64(v,y);else if(y>-(BigInt(1)<<BigInt(64))&&y<0)E[v++]=59,Fe.setBigUint64(v,-y-BigInt(1));else if(this.largeBigIntToFloat)E[v++]=251,Fe.setFloat64(v,Number(y));else{y>=BigInt(0)?E[v++]=194:(E[v++]=195,y=BigInt(-1)-y);let R=[];for(;y;)R.push(Number(y&BigInt(255))),y>>=BigInt(8);Bi(new Uint8Array(R.reverse()),S);return}v+=8}else if(L==="undefined")E[v++]=247;else throw new Error("Unknown type: "+L)},x=this.useRecords===!1?this.variableMapSize?y=>{let L=Object.keys(y),P=Object.values(y),R=L.length;if(R<24?E[v++]=160|R:R<256?(E[v++]=184,E[v++]=R):R<65536?(E[v++]=185,E[v++]=R>>8,E[v++]=R&255):(E[v++]=186,Fe.setUint32(v,R),v+=4),o.keyMap)for(let T=0;T<R;T++)d(o.encodeKey(L[T])),d(P[T]);else for(let T=0;T<R;T++)d(L[T]),d(P[T])}:y=>{E[v++]=185;let L=v-n;v+=2;let P=0;if(o.keyMap)for(let R in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(R))&&(d(o.encodeKey(R)),d(y[R]),P++);else for(let R in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(R))&&(d(R),d(y[R]),P++);E[L+++n]=P>>8,E[L+n]=P&255}:(y,L)=>{let P,R=a.transitions||(a.transitions=Object.create(null)),T=0,X=0,j,A;if(this.keyMap){A=Object.keys(y).map(q=>this.encodeKey(q)),X=A.length;for(let q=0;q<X;q++){let te=A[q];P=R[te],P||(P=R[te]=Object.create(null),T++),R=P}}else for(let q in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(q))&&(P=R[q],P||(R[it]&1048576&&(j=R[it]&65535),P=R[q]=Object.create(null),T++),R=P,X++);let k=R[it];if(k!==void 0)k&=65535,E[v++]=217,E[v++]=k>>8|224,E[v++]=k&255;else if(A||(A=R.__keys__||(R.__keys__=Object.keys(y))),j===void 0?(k=a.nextId++,k||(k=0,a.nextId=1),k>=za&&(a.nextId=(k=c)+1)):k=j,a[k]=A,k<c){E[v++]=217,E[v++]=k>>8|224,E[v++]=k&255,R=a.transitions;for(let q=0;q<X;q++)(R[it]===void 0||R[it]&1048576)&&(R[it]=k),R=R[A[q]];R[it]=k|1048576,i=!0}else{if(R[it]=k,Fe.setUint32(v,3655335680),v+=3,T&&(_+=m*T),g.length>=za-c&&(g.shift()[it]=void 0),g.push(R),gt(X+2),d(57344+k),d(A),L)return;for(let q in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(q))&&d(y[q]);return}if(X<24?E[v++]=128|X:gt(X),!L)for(let q in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(q))&&d(y[q])},S=y=>{let L;if(y>16777216){if(y-n>Va)throw new Error("Encoded buffer would be larger than maximum buffer size");L=Math.min(Va,Math.round(Math.max((y-n)*(y>67108864?1.25:2),4194304)/4096)*4096)}else L=(Math.max(y-n<<2,E.length-1)>>12)+1<<12;let P=new li(L);return Fe=new DataView(P.buffer,0,L),E.copy?E.copy(P,0,n,y):P.set(E.slice(n,y)),v-=n,n=0,Vt=P.length-10,E=P},I=100,V=1e3;this.encodeAsIterable=function(y,L){return G(y,L,K)},this.encodeAsAsyncIterable=function(y,L){return G(y,L,ce)};function*K(y,L,P){let R=y.constructor;if(R===Object){let T=o.useRecords!==!1;T?x(y,!0):Ha(Object.keys(y).length,160);for(let X in y){let j=y[X];T||d(X),j&&typeof j=="object"?L[X]?yield*K(j,L[X]):yield*Y(j,L,X):d(j)}}else if(R===Array){let T=y.length;gt(T);for(let X=0;X<T;X++){let j=y[X];j&&(typeof j=="object"||v-n>I)?L.element?yield*K(j,L.element):yield*Y(j,L,"element"):d(j)}}else if(y[Symbol.iterator]&&!y.buffer){E[v++]=159;for(let T of y)T&&(typeof T=="object"||v-n>I)?L.element?yield*K(T,L.element):yield*Y(T,L,"element"):d(T);E[v++]=255}else _i(y)?(Ha(y.size,64),yield E.subarray(n,v),yield y,M()):y[Symbol.asyncIterator]?(E[v++]=159,yield E.subarray(n,v),yield y,M(),E[v++]=255):d(y);P&&v>n?yield E.subarray(n,v):v-n>I&&(yield E.subarray(n,v),M())}function*Y(y,L,P){let R=v-n;try{d(y),v-n>I&&(yield E.subarray(n,v),M())}catch(T){if(T.iteratorNotHandled)L[P]={},v=n+R,yield*K.call(this,y,L[P]);else throw T}}function M(){I=V,o.encode(null,hi)}function G(y,L,P){return L&&L.chunkThreshold?I=V=L.chunkThreshold:I=100,y&&typeof y=="object"?(o.encode(null,hi),P(y,o.iterateProperties||(o.iterateProperties={}),!0)):[o.encode(y)]}async function*ce(y,L){for(let P of K(y,L,!0)){let R=P.constructor;if(R===qa||R===Uint8Array)yield P;else if(_i(P)){let T=P.stream().getReader(),X;for(;!(X=await T.read()).done;)yield X.value}else if(P[Symbol.asyncIterator])for await(let T of P)M(),T?yield*ce(T,L.async||(L.async={})):yield o.encode(T);else yield P}}}useBuffer(t){E=t,Fe=new DataView(E.buffer,E.byteOffset,E.byteLength),v=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let n=this.structures.slice(0),r=new jr(n,this.sharedValues,this.sharedVersion),i=this.saveShared(r,a=>(a&&a.version||0)==t);return i===!1?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):n.forEach((a,u)=>this.structures[u]=a),i}};jr=class{constructor(t,n,r){this.structures=t,this.packedValues=n,this.version=r}};zs=typeof Blob>"u"?function(){}:Blob;Vs=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;Yi=[Date,Set,Error,RegExp,It,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,jr];Br=[{tag:1,encode(e,t){let n=e.getTime()/1e3;(this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296?(E[v++]=26,Fe.setUint32(v,n),v+=4):(E[v++]=251,Fe.setFloat64(v,n),v+=8)}},{tag:258,encode(e,t){let n=Array.from(e);t(n)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,n){Bi(e,n)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||Zn&&this.tagUint8Array!==!1))return 64},encode(e,t,n){Bi(e,n)}},yt(68,1),yt(69,2),yt(70,4),yt(71,8),yt(72,1),yt(77,2),yt(78,4),yt(79,8),yt(85,4),yt(86,8),{encode(e,t){let n=e.packedValues||[],r=e.structures||[];if(n.values.length>0){E[v++]=216,E[v++]=51,gt(4);let i=n.values;t(i),gt(0),gt(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=i.length;a<u;a++)packedObjectMap[i[a]]=a}if(r){Fe.setUint32(v,3655335424),v+=3;let i=r.slice(0);i.unshift(57344),i.push(new It(e.version,1399353956)),t(i)}else t(new It(e.version,1399353956))}}];Gi=new Ir({useRecords:!1});Gi.encode;Gi.encodeAsIterable;Gi.encodeAsAsyncIterable;Ga=512,Ws=1024,hi=2048,Rn={};Mu=Ys();Ks=["token"],Js=["env"],Xs=["stderr","stdin","stdout","command_line"],Qs=["use_dynamic"],Zs=["use_dynamic"],ec=["env","dynamic_env","use_dynamic","error"];jt=typeof global<"u"?global:self;jt.fetch||(jt.fetch=Gs);ac={pair:O,symbol:D,number:p,array:Array,nil:Mt,character:he,values:nn,"input-port":Je,"output-port":We,regex:RegExp,syntax:Me,eof:ma,macro:fe,string:Q,"native-symbol":Symbol},uc=new Map([[NaN,"NaN"],[null,"null"]]),bt=jt.BN;Qi=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/,ji="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)",sc="(?:#[ie])?(?:[+-]?(?:[0-9][0-9_]*/[0-9][0-9_]*|nan.0|inf.0|".concat(ji,"|[+-]?[0-9]+))?(?:").concat(ji,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i"),zr=new RegExp("^(#[ie])?".concat(ji,"$"),"i");cc=function(){var e={};return[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(t){var n=ve(t,3),r=n[0],i=n[1],a=n[2];e[r]=Hu(i,a)}),e}(),Wu={alarm:"\x07",backspace:"\b",delete:"",escape:"\x1B",newline:`
`,null:"\0",return:"\r",space:" ",tab:"	",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"\x07",etb:"",bs:"\b",can:"",ht:"	",em:"",lf:`
`,sub:"",vt:"\v",esc:"\x1B",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};lc=Object.keys(Wu).join("|"),pc="#\\\\(?:x[0-9a-f]+|".concat(lc,"|[\\s\\S])"),Yu=new RegExp("^".concat(pc,"$"),"i");ea=Zi(Xi),ta=Zi(zu),na=Zi(Vu),Gu=new RegExp("^(?:"+Vu("","[0-9a-f]")+")$","i"),Ku=new RegExp("^(?:"+zu("","[0-9a-f]")+")$","i"),hc=new RegExp("^(?:"+Xi("","[0-9a-f]")+")$","i"),dc=Hu("","[0-9a-fA-F]"),mc=/((?:#[xodbie]){0,2})(.*)/i;Nr=/"(?:\\[\S\s]|[^"])*"?/g;er.prototype.push=function(e){this.data.push(e)};er.prototype.top=function(){return this.data[this.data.length-1]};er.prototype.pop=function(){return this.data.pop()};er.prototype.is_empty=function(){return!this.data.length};Pr.prototype.toString=function(){return"#<Thunk>"};D.list={};D.literal=Symbol.for("__literal__");D.object=Symbol.for("__object__");D.prototype.is_interned=function(){return D.list[this.__name__]==this};D.is=function(e,t){return e instanceof D&&(t instanceof D&&e.__name__===t.__name__||typeof t=="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};D.prototype.toString=function(e){if(Oc(this.__name__))return ia(this.__name__);var t=this.valueOf();return e&&t.match(/(^;|[\s()[\]'])/)?"|".concat(t,"|"):t};D.prototype.literal=function(){return this.is_gensym()?this[D.literal]:this.valueOf()};D.prototype.serialize=function(){return Q.isString(this.__name__)?this.__name__:[ia(this.__name__)]};D.prototype.valueOf=function(){return this.__name__.valueOf()};D.prototype.is_gensym=function(){return aa(this.__name__)};ua=function(){var e=0;function t(n,r){var i=new D(r,!1);return Bt(i,"__literal__",n),i}return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(n instanceof D){if(n.is_gensym())return n;n=n.valueOf()}return aa(n)?D(n,!1):n!==null?t(n,Symbol("#:".concat(n))):(e++,t(e,Symbol("#:g".concat(e))))}}();Pe.prototype.then=function(e){return new Pe(this.valueOf().then(e))};Pe.prototype.catch=function(e){return new Pe(this.valueOf().catch(e))};Pe.prototype.valueOf=function(){if(!this._promise)throw new Error("QuotedPromise: invalid promise created");return this._promise};Pe.prototype.toString=function(){return this.__pending__?Pe.pending_str:this.__rejected__?Pe.rejected_str:"#<js-promise resolved (".concat(this.__type__,")>")};Pe.pending_str="#<js-promise (pending)>";Pe.rejected_str="#<js-promise (rejected)>";Oe={LITERAL:Symbol.for("literal"),SPLICE:Symbol.for("splice"),SYMBOL:Symbol.for("symbol"),names:function(){return Object.keys(this.__list__)},type:function(t){try{return this.get(t).type}catch(n){return console.log({name:t}),console.log(n),null}},get:function(t){return this.__list__[t]},off:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Array.isArray(t)?t.forEach(function(i){return n.off(i,r)}):r===null?delete this.__events__[t]:this.__events__=this.__events__.filter(function(i){return i!==r})},on:function(t,n){var r=this;Array.isArray(t)?t.forEach(function(i){return r.on(i,n)}):this.__events__[t]?this.__events__[t].push(n):this.__events__[t]=[n]},trigger:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.__events__[t]&&this.__events__[t].forEach(function(a){return a.apply(void 0,r)})},remove:function(t){delete this.__list__[t],this.trigger("remove")},append:function(t,n,r){this.__list__[t]={seq:t,symbol:n,type:r},this.trigger("append")},__events__:{},__list__:{}};Zu=[["'",new D("quote"),Oe.LITERAL],["`",new D("quasiquote"),Oe.LITERAL],[",@",new D("unquote-splicing"),Oe.LITERAL],[",",new D("unquote"),Oe.LITERAL],["'>",new D("quote-promise"),Oe.LITERAL]],eo=Zu.map(function(e){return e[0]});Object.freeze(eo);Object.defineProperty(Oe,"__builtins__",{writable:!1,enumerable:!0,value:eo});Zu.forEach(function(e){var t=ve(e,3),n=t[0],r=t[1],i=t[2];Oe.append(n,r,i)});$=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.whitespace,a=i===void 0?!1:i;xt(this,e),Z(this,"__input__",t);var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(s){Object.defineProperty(n,s,{configurable:!1,enumerable:!1,get:function(){return u[s]},set:function(f){u[s]=f}})}),this._whitespace=a,this._i=this._line=this._col=this._newline=0,this._state=this._next=this._token=null,this._prev_char=""}return Et(e,[{key:"get",value:function(n){return this.__internal[n]}},{key:"set",value:function(n,r){this.__internal[n]=r}},{key:"token",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(n){var r=this._line;return this._whitespace&&this._token===`
`&&--r,{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this._i>=this.__input__.length)return Be;if(this._token)return Z(this,"__token__",this.token(!0)),this.token(n);var r=this.next_token();return r?(this._token=this.__input__.substring(this._i,this._next),this.__token__||Z(this,"__token__",this.token(!0)),this.token(n)):Be}},{key:"skip",value:function(){this._next!==null&&(this._token=null,this._i=this._next)}},{key:"read_line",value:function(){var n=this.__input__.length;if(this._i>=n)return Be;for(var r=this._i;r<n;++r){var i=this.__input__[r];if(i===`
`){var a=this.__input__.substring(this._i,r);return this._i=r+1,++this._line,a}}return this.read_rest()}},{key:"read_rest",value:function(){var n=this._i;return this._i=this.__input__.length,this.__input__.substring(n)}},{key:"read_string",value:function(n){var r=this.__input__.length;if(this._i>=r)return Be;if(n+this._i>=r)return this.read_rest();var i=this._i+n,a=this.__input__.substring(this._i,i),u=a.match(/\n/g);return u&&(this._line+=u.length),this._i=i,a}},{key:"peek_char",value:function(){return this._i>=this.__input__.length?Be:he(this.__input__[this._i])}},{key:"read_char",value:function(){var n=this.peek_char();return this.skip_char(),n}},{key:"skip_char",value:function(){this._i<this.__input__.length&&(++this._i,this._token=null)}},{key:"match_rule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.prev_char,a=r.char,u=r.next_char,s=ve(n,4),o=s[0],f=s[1],c=s[2],l=s[3];if(n.length!==5)throw new Error("Lexer: Invalid rule of length ".concat(n.length));if(_o(o)){if(o!==a)return!1}else if(!a.match(o))return!1;return!(!ru(f,i)||!ru(c,u)||l!==this._state)}},{key:"next_token",value:function(){if(this._i>=this.__input__.length)return!1;var n=!0;e:for(var r=this._i,i=this.__input__.length;r<i;++r){var a=this.__input__[r],u=this.__input__[r-1]||"",s=this.__input__[r+1]||"";if(a===`
`){++this._line;var o=this._newline;if(this._state===null&&(this._newline=r+1),this._whitespace&&this._state===null)return this._next=r+1,this._col=this._i-o,!0}if(n&&this._state===null&&a.match(/\s/))if(this._whitespace){if(s.match(/\s/))continue;return this._next=r+1,this._col=this._i-this._newline,!0}else{this._i=r+1;continue}n=!1;var f=Tt(e.rules),c;try{for(f.s();!(c=f.n()).done;){var l=c.value;if(this.match_rule(l,{prev_char:u,char:a,next_char:s})){var h=l[l.length-1];if(this._state=h,this._state===null)return this._next=r+1,this._col=this._i-this._newline,!0;continue e}}}catch(d){f.e(d)}finally{f.f()}if(this._state!==null)continue e;var w=this.__input__.split(`
`)[this._line];throw new Error("Invalid Syntax at line ".concat(this._line+1,`
`).concat(w))}if(![null,e.comment].includes(this._state)){var B,b,g=(B=(b=this.__input__.substring(0,this._newline).match(/\n/g))===null||b===void 0?void 0:b.length)!==null&&B!==void 0?B:0,_=this.__input__.substring(this._newline);if(this.__input__[this._i]==="#"){var m=this.__input__.substring(this._i).replace(/^([^\s()\[\]]+).*/,"$1");throw new Error("Invalid Syntax at line ".concat(g+1,": invalid token ").concat(m))}throw new Hr("Invalid Syntax at line ".concat(g+1,": Unterminated expression ").concat(_))}}}])}();$.literal_rule=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(t.length===0)throw new Error("Lexer: invalid literal rule");if(t.length===1)return[[t,r,i,null,null]];for(var a=[],u=0,s=t.length;u<s;++u){var o=[];o.push(t[u]),o.push(t[u-1]||r),o.push(t[u+1]||i),u===0?(o.push(null),o.push(n)):u===s-1?(o.push(n),o.push(null)):(o.push(n),o.push(n)),a.push(o)}return a};$.string=Symbol.for("string");$.string_escape=Symbol.for("string_escape");$.symbol=Symbol.for("symbol");$.comment=Symbol.for("comment");$.regex=Symbol.for("regex");$.regex_init=Symbol.for("regex_init");$.regex_class=Symbol.for("regex_class");$.character=Symbol.for("character");$.bracket=Symbol.for("bracket");$.b_symbol=Symbol.for("b_symbol");$.b_symbol_ex=Symbol.for("b_symbol_ex");$.b_comment=Symbol.for("b_comment");$.i_comment=Symbol.for("i_comment");$.l_datum=Symbol.for("l_datum");$.dot=Symbol.for("dot");$.boundary=/^$|[\s()[\]']/;$._rules=[[/"/,null,null,$.string,null],[/"/,null,null,null,$.string],[/"/,null,null,$.string_escape,$.string],[/\\/,null,null,$.string,$.string_escape],[/./,/\\/,null,$.string_escape,$.string],[/#/,null,/[bdxoei]/i,null,$.symbol],[/#/,null,/\\/,null,$.character],[/\\/,/#/,/\s/,$.character,$.character],[/\\/,/#/,/[()[\]]/,$.character,$.character],[/\s/,/\\/,null,$.character,null],[/\S/,null,$.boundary,$.character,null],[/#/,$.boundary,/\//,null,$.regex_init],[/./,/\//,null,$.regex_init,$.regex],[/[ \t]/,null,null,$.regex,$.regex],[/\[/,/[^\\]/,null,$.regex,$.regex_class],[/\]/,/[^\\]/,null,$.regex_class,$.regex],[/[()[\]]/,null,null,$.regex,$.regex],[/\//,/\\/,null,$.regex,$.regex],[/\//,null,$.boundary,$.regex,null],[/[gimyus]/,/\//,$.boundary,$.regex,null],[/[gimyus]/,/\//,/[gimyus]/,$.regex,$.regex],[/[gimyus]/,/[gimyus]/,$.boundary,$.regex,null],[/;/,/^$|[^#]/,null,null,$.comment],[/\n/,";",null,$.comment,null],[/[\s\S]/,null,/\n/,$.comment,null],[/\s/,null,null,$.comment,$.comment],[/#/,null,/\|/,null,$.b_comment],[/\s/,null,null,$.b_comment,$.b_comment],[/#/,/\|/,null,$.b_comment,null],[/#/,null,/;/,null,$.i_comment],[/;/,/#/,null,$.i_comment,null],[/#/,null,/[0-9]/,null,$.l_datum],[/=/,/[0-9]/,null,$.l_datum,null],[/#/,/[0-9]/,null,$.l_datum,null],[/\./,$.boundary,/,/,null,null],[/\|/,null,null,null,$.b_symbol],[/\s/,null,null,$.b_symbol,$.b_symbol],[/\|/,null,$.boundary,$.b_symbol,null],[/\|/,null,/\S/,$.b_symbol,$.b_symbol_ex],[/\S/,null,$.boundary,$.b_symbol_ex,null]];$._brackets=[[/[()[\]]/,null,null,null,null]];$._symbol_rules=[[/\S/,$.boundary,$.boundary,null,null],[/\S/,$.boundary,null,null,$.symbol],[/\S/,null,$.boundary,null,null],[/\S/,null,null,null,$.symbol],[/\S/,null,$.boundary,$.symbol,null]];$._cache={valid:!1,rules:null};Oe.on(["remove","append"],function(){$._cache.valid=!1,$._cache.rules=null});to={"#null":null,"#void":void 0},no=["#!fold-case","#!no-fold-case"],nu=["#t","#f"];Object.defineProperty($,"rules",{get:function(){if($._cache.valid)return $._cache.rules;var t=Object.keys(to).concat(no,nu),n=Oe.names().concat(t).sort(function(i,a){return a.length-i.length||i.localeCompare(a)}),r=n.reduce(function(i,a){var u,s=null;a[0]==="#"?a.length===1?u=Symbol.for(a):(nu.includes(a)&&(s=$.boundary),u=Symbol.for(a[1])):u=Symbol.for(a);var o=$.literal_rule(a,u,null,s);return i.concat(o)},[]);return $._cache.rules=$._rules.concat($._brackets,r,$._symbol_rules),$._cache.valid=!0,$._cache.rules}});Nt=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.env,r=t.meta,i=r===void 0?!1:r,a=t.formatter,u=a===void 0?Fc:a;xt(this,e),Z(this,"_formatter",u,{hidden:!0}),Z(this,"__env__",n),Z(this,"_meta",i,{hidden:!0}),Z(this,"_refs",[],{hidden:!0}),Z(this,"_state",{parentheses:0,line:0,fold_case:!1},{hidden:!0})}return Et(e,[{key:"prepare",value:function(n){n instanceof Q&&(n=n.toString()),this._reset_state(),Z(this,"__lexer__",new $(n))}},{key:"_with_syntax_scope",value:function(n){var r=So(this.__env__),i=r.get("stdin");H.set("lips",se(se({},Dt),{},{__parser__:this})),r.set("stdin",new en(this,this.__env__));var a=function(){H.set("lips",Dt),r.set("stdin",i)};return pe(n(),function(u){return a(),u},a)}},{key:"_reset_state",value:function(){Object.assign(this._state,{parentheses:0,line:0})}},{key:"_resolve",value:function(n){return this.__env__&&this.__env__.get(n,{throwError:!1})}},{key:"_peek",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this.__lexer__.peek(!0),i!==Be){u.next=4;break}return u.abrupt("return",Be);case 4:if(!this._is_comment(i.token)){u.next=7;break}return this.skip(),u.abrupt("continue",0);case 7:if(!po(i.token)){u.next=11;break}return this.skip(),i.token==="#!fold-case"?this._state.fold_case=!0:i.token==="#!no-fold-case"&&(this._state.fold_case=!1),u.abrupt("continue",0);case 11:if(i.token!=="#;"){u.next=18;break}if(this.skip(),this.__lexer__.peek()!==Be){u.next=15;break}throw new Error("Lexer: syntax error eof found after comment");case 15:return u.next=17,this._read_object();case 17:return u.abrupt("continue",0);case 18:return u.abrupt("break",21);case 21:return i=this._formatter(i),this._state.fold_case&&(i.token=uo(i.token)),u.abrupt("return",i);case 24:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"peek",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this._peek(),!this._meta){u.next=3;break}return u.abrupt("return",i);case 3:return u.abrupt("return",i.token);case 4:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_reset",value:function(){this._refs.length=0}},{key:"skip",value:function(){this.__lexer__.skip()}},{key:"_read",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._peek();case 2:return i=u.sent,this.skip(),u.abrupt("return",i);case 5:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"read",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.peek();case 2:return i=u.sent,this.skip(),u.abrupt("return",i);case 5:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_match_datum_label",value:function(n){var r=n.token.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"_match_datum_ref",value:function(n){var r=n.token.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"_is_open",value:function(n){return["(","["].includes(n.token)}},{key:"_is_close",value:function(n){return[")","]"].includes(n.token)}},{key:"_read_list",value:function(){var t=Se(ae.mark(function r(){var i,a,u,s,o,f;return ae.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=re,a=i;case 1:return l.next=4,this._peek();case 4:if(s=l.sent,s!==Be){l.next=7;break}return l.abrupt("break",31);case 7:if(!this._is_close(s)){l.next=11;break}return--this._state.parentheses,this.skip(),l.abrupt("break",31);case 11:if(!(s.token==="."&&!z(i))){l.next=19;break}return this.skip(),l.next=15,this._read_object();case 15:a.cdr=l.sent,u=!0,l.next=29;break;case 19:if(!u){l.next=23;break}throw new Error("Parser: syntax error more than one element after dot");case 23:return l.next=25,this._read_object();case 25:o=l.sent,f=new O(o,re),z(i)?i=f:a.cdr=f,a=f;case 29:l.next=1;break;case 31:return l.abrupt("return",i);case 32:case"end":return l.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_read_value",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._read();case 2:if(i=u.sent,!(i===Be||i.token===Be)){u.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return u.abrupt("return",Dc(i,this._meta));case 6:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_is_comment",value:function(n){return n.match(/^;/)||n.match(/^#\|/)&&n.match(/\|#$/)}},{key:"evaluate",value:function(n){return ie(n,{env:this.__env__,error:function(i){throw i}})}},{key:"read_object",value:function(){var t=Se(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this._reset(),u.next=3,this._read_object();case 3:if(i=u.sent,i instanceof or&&(i=i.valueOf()),!this._refs.length){u.next=7;break}return u.abrupt("return",pe(this._resolve_object(i),function(s){return C(s)&&s.mark_cycles(),s}));case 7:return u.abrupt("return",i);case 8:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"balanced",value:function(){return this._state.parentheses===0}},{key:"_ballancing_error",value:function(n,r){var i=this._state.parentheses,a;if(i<0)a=new Error("Parser: unexpected parenthesis"),r?a.__code__=[r.toString()+")"]:a.__code__=[")"];else{a=new Error("Parser: expected parenthesis but eof found");var u=new RegExp("\\){".concat(i,"}$"));a.__code__=[n.toString().replace(u,"")]}throw this._agument_exception(a),a}},{key:"_agument_exception",value:function(n){var r=this.__lexer__.__token__;if("col"in r){var i=r.col,a=r.offset,u=r.line;n.message+=" at line ".concat(u+1," and column ").concat(i+1),Z(n,"__col__",i),Z(n,"__offset__",a),Z(n,"__line__",u)}}},{key:"_resolve_object",value:function(){var t=Se(ae.mark(function r(i){var a=this,u;return ae.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!Array.isArray(i)){o.next=2;break}return o.abrupt("return",i.map(function(f){return a._resolve_object(f)}));case 2:if(!pt(i)){o.next=6;break}return u={},Object.keys(i).forEach(function(f){u[f]=a._resolve_object(i[f])}),o.abrupt("return",u);case 6:if(!C(i)){o.next=8;break}return o.abrupt("return",this._resolve_pair(i));case 8:return o.abrupt("return",i);case 9:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"_resolve_pair",value:function(){var t=Se(ae.mark(function r(i){return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!C(i)){u.next=15;break}if(!(i.car instanceof or)){u.next=7;break}return u.next=4,i.car.valueOf();case 4:i.car=u.sent,u.next=8;break;case 7:this._resolve_pair(i.car);case 8:if(!(i.cdr instanceof or)){u.next=14;break}return u.next=11,i.cdr.valueOf();case 11:i.cdr=u.sent,u.next=15;break;case 14:this._resolve_pair(i.cdr);case 15:return u.abrupt("return",i);case 16:case"end":return u.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"get_line",value:function(){return this._state.line}},{key:"_read_object",value:function(){var t=Se(ae.mark(function r(){var i=this,a,u,s,o,f,c,l,h,w,B,b,g,_,m,d,x;return ae.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this._peek();case 2:if(a=I.sent,a!==Be){I.next=5;break}return I.abrupt("return",a);case 5:if(this._state.line=this.__lexer__.__token__.line,!yr(a.token)){I.next=58;break}return u=Oe.get(a.token),s=jc(a.token),this.skip(),c=Nc(a.token),I.t0=this,I.next=14,this._peek();case 14:if(I.t1=I.sent,l=I.t0._is_close.call(I.t0,I.t1),!c){I.next=20;break}I.t2=void 0,I.next=23;break;case 20:return I.next=22,this._read_object();case 22:I.t2=I.sent;case 23:if(h=I.t2,h!==Be){I.next=26;break}throw new Hr("Expecting expression eof found");case 26:if(s){I.next=35;break}if(f=this.__env__.get(u.symbol),typeof f!="function"){I.next=35;break}if(tu(a.token)?w=[h]:z(h)?w=[]:C(h)&&(w=h.to_array(!1)),!(w||c)){I.next=32;break}return I.abrupt("return",this._with_syntax_scope(function(){return En(f,c?[]:w,{env:i.__env__,dynamic_env:i.__env__,use_dynamic:!1})}));case 32:throw B=new Error("Parse Error: Invalid parser extension "+"invocation ".concat(u.symbol)),this._agument_exception(B),B;case 35:if(!tu(a.token)){I.next=43;break}if(!l){I.next=40;break}throw b=new Error("Parse Error: expecting datum"),this._agument_exception(b),b;case 40:o=new O(u.symbol,new O(h,re)),I.next=44;break;case 43:o=new O(u.symbol,h);case 44:if(!s){I.next=46;break}return I.abrupt("return",o);case 46:if(!(f instanceof fe)){I.next=55;break}return I.next=49,this._with_syntax_scope(function(){return i.evaluate(o)});case 49:if(g=I.sent,!(C(g)||g instanceof D)){I.next=52;break}return I.abrupt("return",O.fromArray([D("quote"),g]));case 52:return I.abrupt("return",g);case 55:throw _=new Error("Parse Error: invalid parser extension: "+u.symbol),this._agument_exception(_),_;case 58:if(m=this._match_datum_ref(a),m===null){I.next=66;break}if(this.skip(),!this._refs[m]){I.next=63;break}return I.abrupt("return",new or(m,this._refs[m]));case 63:throw d=new Error("Parse Error: invalid datum label #".concat(m,"#")),this._agument_exception(d),d;case 66:if(x=this._match_datum_label(a),x===null){I.next=73;break}return this.skip(),this._refs[x]=this._read_object(),I.abrupt("return",this._refs[x]);case 73:if(!this._is_close(a)){I.next=78;break}--this._state.parentheses,this.skip(),I.next=85;break;case 78:if(!this._is_open(a)){I.next=84;break}return++this._state.parentheses,this.skip(),I.abrupt("return",this._read_list());case 84:return I.abrupt("return",this._read_value());case 85:case"end":return I.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()}])}(),Hr=function(e){function t(){return xt(this,t),Ki(this,t,arguments)}return zi(t,e),Et(t)}(kr(Error));Nt.Unterminated=Hr;or=function(){function e(t,n){xt(this,e),this.name=t,this.data=n}return Et(e,[{key:"valueOf",value:function(){return this.data}}])}();qe.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*?-values|\*)?)$/],shift:{1:["&","#"]}}};qe.match=io;qe.prototype._options=function(t){var n=qe.defaults;if(typeof t>"u")return Object.assign({},n);var r=t&&t.exceptions||{},i=r.specials||[],a=r.shift||{1:[]};return se(se(se({},n),t),{},{exceptions:{specials:[].concat(be(n.exceptions.specials),be(i)),shift:se(se({},a),{},{1:[].concat(be(n.exceptions.shift[1]),be(a[1]))})}})};qe.prototype.indent=function(t){var n=Sn(this.__code__,!0);return this._indent(n,t)};qe.exception_shift=function(e,t){function n(f){if(!f.length)return!1;if(f.indexOf(e)!==-1)return!0;var c=f.filter(function(B){return B instanceof RegExp});if(!c.length)return!1;var l=Tt(c),h;try{for(l.s();!(h=l.n()).done;){var w=h.value;if(e.match(w))return!0}}catch(B){l.e(B)}finally{l.f()}return!1}if(n(t.exceptions.specials))return t.indent;for(var r=t.exceptions.shift,i=0,a=Object.entries(r);i<a.length;i++){var u=ve(a[i],2),s=u[0],o=u[1];if(n(o))return+s}return-1};qe.prototype._indent=function(t,n){var r=this._options(n),i=Mc(t),a=ro(t),u=t[t.length-a.length-1],s=t[t.length-1];if(s.token.match(/^"[\S\s]+[^"]$/))return i+r.indent;if(a&&a.length){if(a[0].line>0&&(r.offset=0),a.toString()===t.toString()&&Er(a))return r.offset+a[0].col;if(a.length===1)return r.offset+a[0].col+1;var o=-1;if(u){var f=qe.exception_shift(u.token,r);f!==-1&&(o=f)}if(o===-1&&(o=qe.exception_shift(a[1].token,r)),o!==-1)return r.offset+a[0].col+o;if(a[0].line<a[1].line)return r.offset+a[0].col+1;if(a.length>3&&a[1].line===a[3].line)return a[1].token==="("||a[1].token==="["?r.offset+a[1].col:r.offset+a[3].col;if(a[0].line===a[1].line)return r.offset+r.indent+a[0].col;for(var c=a.slice(2),l=0;l<c.length;++l){var h=c[l];if(h.token.trim())return h.col}}else return 0;return i+r.indent};Bn.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};Bn.prototype.match=function(e){return e.match(this.pattern)};At.prototype.toString=function(){var e=this.patterns.map(function(t){return He(t)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};qe.Pattern=At;qe.Ahead=Bn;Ae=/^[[(]$/,tr=/^[\])]$/,ln=/[^()[\]]/,ze=new Bn(/[^)\]]/),Wr=Symbol.for("*"),Rc=new At([Ae,Wr,tr],[ln],"+"),Ot=new At([Ae,Wr,tr],"+"),au=new At([Symbol.for("symbol")],"?"),$c=new At([Symbol.for("symbol")],"*"),Ht=[Ae,$c,tr],uu=new At([Ae,Symbol.for("symbol"),Wr,tr],"+"),sr=pn("syntax-rules"),cr=pn("define","lambda","define-macro","syntax-rules"),Uc=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/,di=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/,ao=/^;.*/;qe.rules=[[[Ot],0,ze],[[Ae,pn("begin","cond-expand")],1,ze],[[Ae,di,au,Ae,uu,tr],1,ze],[[Ae,di,au,Rc],1,ze],[[Ae,di,Ae,uu],1,ze],[[Ae,pn("define-syntax"),/.+/],1],[[Ae,sr,ln,Ht],1],[[Ae,sr,ln,Ht,Ot],1,ze],[[Ae,sr,Ht],1],[ao,-1],[[Ae,sr,Ht,Ot],1,ze],[[Ae,Uc,new At([/[^()[\]]/],"+"),Ot],1,ze],[[Ae,Ot],1,ze],[[Ae,ln,Ot],1,ze],[[Ae,pn("lambda","if"),ln],1,ze],[[Ae,pn("while"),ln,Ot],1,ze],[[Ae,pn("if"),ln,Wr],1,ze],[[Ae,cr,Ht],0,ze],[[Ae,cr,Ht,Nr],0,ze],[[Ae,cr,Ht,Nr,Ot],0,ze],[[Ae,cr,Ht,Ot],0,ze]];qe.prototype.break=function(){var e=this.__code__.replace(/\n[ \t]*/g,`
 `).trim(),t=function(I){return I.token.match(Nr)||I.token.match(Qi)?I.token:I.token.replace(/\s+/," ")},n=function(I){for(var V=I.length;V--;){var K=I[V];if(K.trim()&&!yr(K))return I.length-V-1}},r=Sn(e,!0).map(t).filter(function(S){return S!==`
`}),i=qe.rules;e:for(var a=1;a<r.length;++a)if(r[a].trim()){var u=r.slice(0,a),s={};i.map(function(S){return S[1]}).forEach(function(S){S=S.valueOf(),S>0&&!s[S]&&(s[S]=ro(u,S))});var o=Tt(i),f;try{for(o.s();!(f=o.n()).done;){var c=ve(f.value,3),l=c[0],h=c[1],w=c[2],B=l===ao;h=h.valueOf();var b=h>0?s[h]:u,g=b.filter(function(S){return S.trim()&&!yr(S)});if(g.length){h===-1&&(l=[l],g=g.slice(-1));var _=n(b),m=io(l,g),d=r.slice(a).find(function(S){return S.trim()&&!yr(S)});if(m&&(w instanceof Bn&&w.match(d)||!w)){var x=a-_;r[x]!==`
`&&(r[x].trim()?(r.splice(x,0,`
`),a++):r[x]=`
`),a+=_;continue e}}}}catch(S){o.e(S)}finally{o.f()}}return this.__code__=r.join(""),this};qe.prototype._spaces=function(e){return" ".repeat(e)};qe.prototype.format=function(t){for(var n=this.__code__.trim().replace(/[ \t]*\n[ \t]*/g,`
 `),r=Sn(n,!0),i=this._options(t),a=0,u=0,s=0;s<r.length;++s){var o=r[s];if(o.token===`
`&&(a=this._indent(r.slice(0,s),i),u+=a,r[s+1])){r[s+1].token=this._spaces(a),a--,u--;for(var f=s+2;f<r.length;++f)if(r[f].offset+=u,r[f].col+=a,r[f].token===`
`){s=f-1;break}}}return r.map(function(c){if(c.token.match(Nr)&&c.token.match(/\n/)){var l=" ".repeat(c.col),h=c.token.split(`
`);c.token=[h[0]].concat(h.slice(1).map(function(w){return l+w})).join(`
`)}return c.token}).join("")};qc={65:97,66:98,67:99,68:100,69:101,70:102,71:103,72:104,73:105,74:106,75:107,76:108,77:109,78:110,79:111,80:112,81:113,82:114,83:115,84:116,85:117,86:118,87:119,88:120,89:121,90:122,181:956,192:224,193:225,194:226,195:227,196:228,197:229,198:230,199:231,200:232,201:233,202:234,203:235,204:236,205:237,206:238,207:239,208:240,209:241,210:242,211:243,212:244,213:245,214:246,216:248,217:249,218:250,219:251,220:252,221:253,222:254,256:257,258:259,260:261,262:263,264:265,266:267,268:269,270:271,272:273,274:275,276:277,278:279,280:281,282:283,284:285,286:287,288:289,290:291,292:293,294:295,296:297,298:299,300:301,302:303,306:307,308:309,310:311,313:314,315:316,317:318,319:320,321:322,323:324,325:326,327:328,330:331,332:333,334:335,336:337,338:339,340:341,342:343,344:345,346:347,348:349,350:351,352:353,354:355,356:357,358:359,360:361,362:363,364:365,366:367,368:369,370:371,372:373,374:375,376:255,377:378,379:380,381:382,383:115,385:595,386:387,388:389,390:596,391:392,393:598,394:599,395:396,398:477,399:601,400:603,401:402,403:608,404:611,406:617,407:616,408:409,412:623,413:626,415:629,416:417,418:419,420:421,422:640,423:424,425:643,428:429,430:648,431:432,433:650,434:651,435:436,437:438,439:658,440:441,444:445,452:454,453:454,455:457,456:457,458:460,459:460,461:462,463:464,465:466,467:468,469:470,471:472,473:474,475:476,478:479,480:481,482:483,484:485,486:487,488:489,490:491,492:493,494:495,497:499,498:499,500:501,502:405,503:447,504:505,506:507,508:509,510:511,512:513,514:515,516:517,518:519,520:521,522:523,524:525,526:527,528:529,530:531,532:533,534:535,536:537,538:539,540:541,542:543,544:414,546:547,548:549,550:551,552:553,554:555,556:557,558:559,560:561,562:563,570:11365,571:572,573:410,574:11366,577:578,579:384,580:649,581:652,582:583,584:585,586:587,588:589,590:591,837:953,880:881,882:883,886:887,895:1011,902:940,904:941,905:942,906:943,908:972,910:973,911:974,913:945,914:946,915:947,916:948,917:949,918:950,919:951,920:952,921:953,922:954,923:955,924:956,925:957,926:958,927:959,928:960,929:961,931:963,932:964,933:965,934:966,935:967,936:968,937:969,938:970,939:971,962:963,975:983,976:946,977:952,981:966,982:960,984:985,986:987,988:989,990:991,992:993,994:995,996:997,998:999,1e3:1001,1002:1003,1004:1005,1006:1007,1008:954,1009:961,1012:952,1013:949,1015:1016,1017:1010,1018:1019,1021:891,1022:892,1023:893,1024:1104,1025:1105,1026:1106,1027:1107,1028:1108,1029:1109,1030:1110,1031:1111,1032:1112,1033:1113,1034:1114,1035:1115,1036:1116,1037:1117,1038:1118,1039:1119,1040:1072,1041:1073,1042:1074,1043:1075,1044:1076,1045:1077,1046:1078,1047:1079,1048:1080,1049:1081,1050:1082,1051:1083,1052:1084,1053:1085,1054:1086,1055:1087,1056:1088,1057:1089,1058:1090,1059:1091,1060:1092,1061:1093,1062:1094,1063:1095,1064:1096,1065:1097,1066:1098,1067:1099,1068:1100,1069:1101,1070:1102,1071:1103,1120:1121,1122:1123,1124:1125,1126:1127,1128:1129,1130:1131,1132:1133,1134:1135,1136:1137,1138:1139,1140:1141,1142:1143,1144:1145,1146:1147,1148:1149,1150:1151,1152:1153,1162:1163,1164:1165,1166:1167,1168:1169,1170:1171,1172:1173,1174:1175,1176:1177,1178:1179,1180:1181,1182:1183,1184:1185,1186:1187,1188:1189,1190:1191,1192:1193,1194:1195,1196:1197,1198:1199,1200:1201,1202:1203,1204:1205,1206:1207,1208:1209,1210:1211,1212:1213,1214:1215,1216:1231,1217:1218,1219:1220,1221:1222,1223:1224,1225:1226,1227:1228,1229:1230,1232:1233,1234:1235,1236:1237,1238:1239,1240:1241,1242:1243,1244:1245,1246:1247,1248:1249,1250:1251,1252:1253,1254:1255,1256:1257,1258:1259,1260:1261,1262:1263,1264:1265,1266:1267,1268:1269,1270:1271,1272:1273,1274:1275,1276:1277,1278:1279,1280:1281,1282:1283,1284:1285,1286:1287,1288:1289,1290:1291,1292:1293,1294:1295,1296:1297,1298:1299,1300:1301,1302:1303,1304:1305,1306:1307,1308:1309,1310:1311,1312:1313,1314:1315,1316:1317,1318:1319,1320:1321,1322:1323,1324:1325,1326:1327,1329:1377,1330:1378,1331:1379,1332:1380,1333:1381,1334:1382,1335:1383,1336:1384,1337:1385,1338:1386,1339:1387,1340:1388,1341:1389,1342:1390,1343:1391,1344:1392,1345:1393,1346:1394,1347:1395,1348:1396,1349:1397,1350:1398,1351:1399,1352:1400,1353:1401,1354:1402,1355:1403,1356:1404,1357:1405,1358:1406,1359:1407,1360:1408,1361:1409,1362:1410,1363:1411,1364:1412,1365:1413,1366:1414,4256:11520,4257:11521,4258:11522,4259:11523,4260:11524,4261:11525,4262:11526,4263:11527,4264:11528,4265:11529,4266:11530,4267:11531,4268:11532,4269:11533,4270:11534,4271:11535,4272:11536,4273:11537,4274:11538,4275:11539,4276:11540,4277:11541,4278:11542,4279:11543,4280:11544,4281:11545,4282:11546,4283:11547,4284:11548,4285:11549,4286:11550,4287:11551,4288:11552,4289:11553,4290:11554,4291:11555,4292:11556,4293:11557,4295:11559,4301:11565,5112:5104,5113:5105,5114:5106,5115:5107,5116:5108,5117:5109,7296:1074,7297:1076,7298:1086,7299:1089,7300:1090,7301:1090,7302:1098,7303:1123,7304:42571,7312:4304,7313:4305,7314:4306,7315:4307,7316:4308,7317:4309,7318:4310,7319:4311,7320:4312,7321:4313,7322:4314,7323:4315,7324:4316,7325:4317,7326:4318,7327:4319,7328:4320,7329:4321,7330:4322,7331:4323,7332:4324,7333:4325,7334:4326,7335:4327,7336:4328,7337:4329,7338:4330,7339:4331,7340:4332,7341:4333,7342:4334,7343:4335,7344:4336,7345:4337,7346:4338,7347:4339,7348:4340,7349:4341,7350:4342,7351:4343,7352:4344,7353:4345,7354:4346,7357:4349,7358:4350,7359:4351,7680:7681,7682:7683,7684:7685,7686:7687,7688:7689,7690:7691,7692:7693,7694:7695,7696:7697,7698:7699,7700:7701,7702:7703,7704:7705,7706:7707,7708:7709,7710:7711,7712:7713,7714:7715,7716:7717,7718:7719,7720:7721,7722:7723,7724:7725,7726:7727,7728:7729,7730:7731,7732:7733,7734:7735,7736:7737,7738:7739,7740:7741,7742:7743,7744:7745,7746:7747,7748:7749,7750:7751,7752:7753,7754:7755,7756:7757,7758:7759,7760:7761,7762:7763,7764:7765,7766:7767,7768:7769,7770:7771,7772:7773,7774:7775,7776:7777,7778:7779,7780:7781,7782:7783,7784:7785,7786:7787,7788:7789,7790:7791,7792:7793,7794:7795,7796:7797,7798:7799,7800:7801,7802:7803,7804:7805,7806:7807,7808:7809,7810:7811,7812:7813,7814:7815,7816:7817,7818:7819,7820:7821,7822:7823,7824:7825,7826:7827,7828:7829,7835:7777,7840:7841,7842:7843,7844:7845,7846:7847,7848:7849,7850:7851,7852:7853,7854:7855,7856:7857,7858:7859,7860:7861,7862:7863,7864:7865,7866:7867,7868:7869,7870:7871,7872:7873,7874:7875,7876:7877,7878:7879,7880:7881,7882:7883,7884:7885,7886:7887,7888:7889,7890:7891,7892:7893,7894:7895,7896:7897,7898:7899,7900:7901,7902:7903,7904:7905,7906:7907,7908:7909,7910:7911,7912:7913,7914:7915,7916:7917,7918:7919,7920:7921,7922:7923,7924:7925,7926:7927,7928:7929,7930:7931,7932:7933,7934:7935,7944:7936,7945:7937,7946:7938,7947:7939,7948:7940,7949:7941,7950:7942,7951:7943,7960:7952,7961:7953,7962:7954,7963:7955,7964:7956,7965:7957,7976:7968,7977:7969,7978:7970,7979:7971,7980:7972,7981:7973,7982:7974,7983:7975,7992:7984,7993:7985,7994:7986,7995:7987,7996:7988,7997:7989,7998:7990,7999:7991,8008:8e3,8009:8001,8010:8002,8011:8003,8012:8004,8013:8005,8025:8017,8027:8019,8029:8021,8031:8023,8040:8032,8041:8033,8042:8034,8043:8035,8044:8036,8045:8037,8046:8038,8047:8039,8120:8112,8121:8113,8122:8048,8123:8049,8126:953,8136:8050,8137:8051,8138:8052,8139:8053,8152:8144,8153:8145,8154:8054,8155:8055,8168:8160,8169:8161,8170:8058,8171:8059,8172:8165,8184:8056,8185:8057,8186:8060,8187:8061,8486:969,8490:107,8491:229,8498:8526,8544:8560,8545:8561,8546:8562,8547:8563,8548:8564,8549:8565,8550:8566,8551:8567,8552:8568,8553:8569,8554:8570,8555:8571,8556:8572,8557:8573,8558:8574,8559:8575,8579:8580,9398:9424,9399:9425,9400:9426,9401:9427,9402:9428,9403:9429,9404:9430,9405:9431,9406:9432,9407:9433,9408:9434,9409:9435,9410:9436,9411:9437,9412:9438,9413:9439,9414:9440,9415:9441,9416:9442,9417:9443,9418:9444,9419:9445,9420:9446,9421:9447,9422:9448,9423:9449,11264:11312,11265:11313,11266:11314,11267:11315,11268:11316,11269:11317,11270:11318,11271:11319,11272:11320,11273:11321,11274:11322,11275:11323,11276:11324,11277:11325,11278:11326,11279:11327,11280:11328,11281:11329,11282:11330,11283:11331,11284:11332,11285:11333,11286:11334,11287:11335,11288:11336,11289:11337,11290:11338,11291:11339,11292:11340,11293:11341,11294:11342,11295:11343,11296:11344,11297:11345,11298:11346,11299:11347,11300:11348,11301:11349,11302:11350,11303:11351,11304:11352,11305:11353,11306:11354,11307:11355,11308:11356,11309:11357,11310:11358,11311:11359,11360:11361,11362:619,11363:7549,11364:637,11367:11368,11369:11370,11371:11372,11373:593,11374:625,11375:592,11376:594,11378:11379,11381:11382,11390:575,11391:576,11392:11393,11394:11395,11396:11397,11398:11399,11400:11401,11402:11403,11404:11405,11406:11407,11408:11409,11410:11411,11412:11413,11414:11415,11416:11417,11418:11419,11420:11421,11422:11423,11424:11425,11426:11427,11428:11429,11430:11431,11432:11433,11434:11435,11436:11437,11438:11439,11440:11441,11442:11443,11444:11445,11446:11447,11448:11449,11450:11451,11452:11453,11454:11455,11456:11457,11458:11459,11460:11461,11462:11463,11464:11465,11466:11467,11468:11469,11470:11471,11472:11473,11474:11475,11476:11477,11478:11479,11480:11481,11482:11483,11484:11485,11486:11487,11488:11489,11490:11491,11499:11500,11501:11502,11506:11507,42560:42561,42562:42563,42564:42565,42566:42567,42568:42569,42570:42571,42572:42573,42574:42575,42576:42577,42578:42579,42580:42581,42582:42583,42584:42585,42586:42587,42588:42589,42590:42591,42592:42593,42594:42595,42596:42597,42598:42599,42600:42601,42602:42603,42604:42605,42624:42625,42626:42627,42628:42629,42630:42631,42632:42633,42634:42635,42636:42637,42638:42639,42640:42641,42642:42643,42644:42645,42646:42647,42648:42649,42650:42651,42786:42787,42788:42789,42790:42791,42792:42793,42794:42795,42796:42797,42798:42799,42802:42803,42804:42805,42806:42807,42808:42809,42810:42811,42812:42813,42814:42815,42816:42817,42818:42819,42820:42821,42822:42823,42824:42825,42826:42827,42828:42829,42830:42831,42832:42833,42834:42835,42836:42837,42838:42839,42840:42841,42842:42843,42844:42845,42846:42847,42848:42849,42850:42851,42852:42853,42854:42855,42856:42857,42858:42859,42860:42861,42862:42863,42873:42874,42875:42876,42877:7545,42878:42879,42880:42881,42882:42883,42884:42885,42886:42887,42891:42892,42893:613,42896:42897,42898:42899,42902:42903,42904:42905,42906:42907,42908:42909,42910:42911,42912:42913,42914:42915,42916:42917,42918:42919,42920:42921,42922:614,42923:604,42924:609,42925:620,42926:618,42928:670,42929:647,42930:669,42931:43859,42932:42933,42934:42935,42936:42937,42938:42939,42940:42941,42942:42943,42944:42945,42946:42947,42948:42900,42949:642,42950:7566,42951:42952,42953:42954,42960:42961,42966:42967,42968:42969,42997:42998,43888:5024,43889:5025,43890:5026,43891:5027,43892:5028,43893:5029,43894:5030,43895:5031,43896:5032,43897:5033,43898:5034,43899:5035,43900:5036,43901:5037,43902:5038,43903:5039,43904:5040,43905:5041,43906:5042,43907:5043,43908:5044,43909:5045,43910:5046,43911:5047,43912:5048,43913:5049,43914:5050,43915:5051,43916:5052,43917:5053,43918:5054,43919:5055,43920:5056,43921:5057,43922:5058,43923:5059,43924:5060,43925:5061,43926:5062,43927:5063,43928:5064,43929:5065,43930:5066,43931:5067,43932:5068,43933:5069,43934:5070,43935:5071,43936:5072,43937:5073,43938:5074,43939:5075,43940:5076,43941:5077,43942:5078,43943:5079,43944:5080,43945:5081,43946:5082,43947:5083,43948:5084,43949:5085,43950:5086,43951:5087,43952:5088,43953:5089,43954:5090,43955:5091,43956:5092,43957:5093,43958:5094,43959:5095,43960:5096,43961:5097,43962:5098,43963:5099,43964:5100,43965:5101,43966:5102,43967:5103,65313:65345,65314:65346,65315:65347,65316:65348,65317:65349,65318:65350,65319:65351,65320:65352,65321:65353,65322:65354,65323:65355,65324:65356,65325:65357,65326:65358,65327:65359,65328:65360,65329:65361,65330:65362,65331:65363,65332:65364,65333:65365,65334:65366,65335:65367,65336:65368,65337:65369,65338:65370,66560:66600,66561:66601,66562:66602,66563:66603,66564:66604,66565:66605,66566:66606,66567:66607,66568:66608,66569:66609,66570:66610,66571:66611,66572:66612,66573:66613,66574:66614,66575:66615,66576:66616,66577:66617,66578:66618,66579:66619,66580:66620,66581:66621,66582:66622,66583:66623,66584:66624,66585:66625,66586:66626,66587:66627,66588:66628,66589:66629,66590:66630,66591:66631,66592:66632,66593:66633,66594:66634,66595:66635,66596:66636,66597:66637,66598:66638,66599:66639,66736:66776,66737:66777,66738:66778,66739:66779,66740:66780,66741:66781,66742:66782,66743:66783,66744:66784,66745:66785,66746:66786,66747:66787,66748:66788,66749:66789,66750:66790,66751:66791,66752:66792,66753:66793,66754:66794,66755:66795,66756:66796,66757:66797,66758:66798,66759:66799,66760:66800,66761:66801,66762:66802,66763:66803,66764:66804,66765:66805,66766:66806,66767:66807,66768:66808,66769:66809,66770:66810,66771:66811,66928:66967,66929:66968,66930:66969,66931:66970,66932:66971,66933:66972,66934:66973,66935:66974,66936:66975,66937:66976,66938:66977,66940:66979,66941:66980,66942:66981,66943:66982,66944:66983,66945:66984,66946:66985,66947:66986,66948:66987,66949:66988,66950:66989,66951:66990,66952:66991,66953:66992,66954:66993,66956:66995,66957:66996,66958:66997,66959:66998,66960:66999,66961:67e3,66962:67001,66964:67003,66965:67004,68736:68800,68737:68801,68738:68802,68739:68803,68740:68804,68741:68805,68742:68806,68743:68807,68744:68808,68745:68809,68746:68810,68747:68811,68748:68812,68749:68813,68750:68814,68751:68815,68752:68816,68753:68817,68754:68818,68755:68819,68756:68820,68757:68821,68758:68822,68759:68823,68760:68824,68761:68825,68762:68826,68763:68827,68764:68828,68765:68829,68766:68830,68767:68831,68768:68832,68769:68833,68770:68834,68771:68835,68772:68836,68773:68837,68774:68838,68775:68839,68776:68840,68777:68841,68778:68842,68779:68843,68780:68844,68781:68845,68782:68846,68783:68847,68784:68848,68785:68849,68786:68850,71840:71872,71841:71873,71842:71874,71843:71875,71844:71876,71845:71877,71846:71878,71847:71879,71848:71880,71849:71881,71850:71882,71851:71883,71852:71884,71853:71885,71854:71886,71855:71887,71856:71888,71857:71889,71858:71890,71859:71891,71860:71892,71861:71893,71862:71894,71863:71895,71864:71896,71865:71897,71866:71898,71867:71899,71868:71900,71869:71901,71870:71902,71871:71903,93760:93792,93761:93793,93762:93794,93763:93795,93764:93796,93765:93797,93766:93798,93767:93799,93768:93800,93769:93801,93770:93802,93771:93803,93772:93804,93773:93805,93774:93806,93775:93807,93776:93808,93777:93809,93778:93810,93779:93811,93780:93812,93781:93813,93782:93814,93783:93815,93784:93816,93785:93817,93786:93818,93787:93819,93788:93820,93789:93821,93790:93822,93791:93823,125184:125218,125185:125219,125186:125220,125187:125221,125188:125222,125189:125223,125190:125224,125191:125225,125192:125226,125193:125227,125194:125228,125195:125229,125196:125230,125197:125231,125198:125232,125199:125233,125200:125234,125201:125235,125202:125236,125203:125237,125204:125238,125205:125239,125206:125240,125207:125241,125208:125242,125209:125243,125210:125244,125211:125245,125212:125246,125213:125247,125214:125248,125215:125249,125216:125250,125217:125251};Mt.prototype.toString=function(){return"()"};Mt.prototype.valueOf=function(){};Mt.prototype.serialize=function(){return 0};Mt.prototype.to_object=function(){return{}};Mt.prototype.append=function(e){return new O(e,re)};Mt.prototype.to_array=function(){return[]};re=new Mt;O.prototype.flatten=function(){return O.fromArray(zc(this.to_array()))};O.prototype.length=function(){for(var e=0,t=this;!(!t||z(t)||!C(t)||t.have_cycles("cdr"));)e++,t=t.cdr;return e};O.prototype.freeze=function(){for(var e=this;Z(e,"car",e.car),C(e.car)&&!e.have_cycles("car")&&e.car.freeze(),Z(e,"cdr",e.cdr),!(e.have_cycles("cdr")||(e=e.cdr,!C(e))););};O.match=function(e,t){return e instanceof D?D.is(e,t):C(e)?O.match(e.car,t)||O.match(e.cdr,t):Array.isArray(e)?e.some(function(n){return O.match(n,t)}):pt(e)?Object.values(e).some(function(n){return O.match(n,t)}):!1};O.prototype.find=function(e){return O.match(this,e)};O.prototype.clone=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=new Map;function n(r){if(C(r)){if(t.has(r))return t.get(r);var i=new O;return t.set(r,i),e?i.car=n(r.car):i.car=r.car,i.cdr=n(r.cdr),i[Ve]=r[Ve],i}return r}return n(this)};O.prototype.last_pair=function(){for(var e=this;;){if(!C(e.cdr))return e;if(e.have_cycles("cdr"))break;e=e.cdr}};O.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=[];return C(this.car)?e?t.push(this.car.to_array()):t.push(this.car):t.push(this.car.valueOf()),C(this.cdr)&&(t=t.concat(this.cdr.to_array(e))),t};O.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(C(e)||n&&e instanceof Array&&e[wt])return e;if(t===!1){for(var r=re,i=e.length;i--;)r=new O(e[i],r);return r}e.length&&!(e instanceof Array)&&(e=be(e));for(var a=re,u=e.length;u--;){var s=e[u];s instanceof Array?s=O.fromArray(s,t,n):typeof s=="string"?s=Q(s):typeof s=="number"&&!Number.isNaN(s)&&(s=p(s)),a=new O(s,a)}return a};O.prototype.to_object=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this,n={};C(t)&&C(t.car);){var r=t.car,i=r.car;i instanceof D&&(i=i.__name__),i instanceof Q&&(i=i.valueOf());var a=r.cdr;C(a)&&(a=a.to_object(e)),vo(a)&&(e||(a=a.valueOf())),n[i]=a,t=t.cdr}return n};O.fromPairs=function(e){return e.reduce(function(t,n){return new O(new O(new D(n[0]),n[1]),t)},re)};O.fromObject=function(e){var t=Object.keys(e).map(function(n){return[n,e[n]]});return O.fromPairs(t)};O.prototype.reduce=function(e){for(var t=this,n=re;!z(t);)n=e(n,t.car),t=t.cdr;return n};O.prototype.reverse=function(){if(this.have_cycles())throw new Error("You can't reverse list that have cycles");for(var e=this,t=re;!z(e);){var n=e.cdr;e.cdr=t,t=e,e=n}return t};O.prototype.transform=function(e){function t(n){if(C(n)){if(n.replace)return delete n.replace,n;var r=e(n.car);C(r)&&(r=t(r));var i=e(n.cdr);return C(i)&&(i=t(i)),new O(r,i)}return n}return t(this)};O.prototype.map=function(e){return typeof this.car<"u"?new O(e(this.car),z(this.cdr)?re:this.cdr.map(e)):re};Hn=new Map;oo=Object.getOwnPropertyNames(Array.prototype),so=[];oo.forEach(function(e){so.push(Array[e],Array.prototype[e])});Ti=new Map;[[!0,"#t"],[!1,"#f"],[null,"#null"],[void 0,"#void"]].forEach(function(e){var t=ve(e,2),n=t[0],r=t[1];Ti.set(n,r)});Mi=new Map;[[Error,function(e){return e.message}],[O,function(e,t){var n=t.quote,r=t.skip_cycles,i=t.pair_args;return r||e.mark_cycles(),e.toString.apply(e,[n].concat(be(i)))}],[he,function(e,t){var n=t.quote;return n?e.toString():e.valueOf()}],[Q,function(e,t){var n=t.quote;return e=e.toString(),n?JSON.stringify(e).replace(/\\n/g,`
`):e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=ve(e,2),n=t[0],r=t[1];Mi.set(n,r)});Gc=[D,fe,Je,We,xe,Pe];O.prototype.mark_cycles=function(){return Kc(this),this};O.prototype.have_cycles=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?!!(this[Ve]&&this[Ve][e]):this.have_cycles("car")||this.have_cycles("cdr")};O.prototype.is_cycle=function(){return Ri(this)};O.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.nested,r=n===void 0?!1:n,i=[];this[xn]?i.push(this[xn]+"("):r||i.push("(");var a;if(this[Ve]&&this[Ve].car?a=this[Ve].car:a=He(this.car,e,!0),a!==void 0&&i.push(a),C(this.cdr))if(this[Ve]&&this[Ve].cdr)i.push(" . "),i.push(this[Ve].cdr);else{this.cdr[xn]?i.push(" . "):i.push(" ");var u=this.cdr.toString(e,{nested:!0});i.push(u)}else z(this.cdr)||(i=i.concat([" . ",He(this.cdr,e,!0)]));return(!r||this[xn])&&i.push(")"),i.join("")};O.prototype.set=function(e,t){this[e]=t,C(t)&&this.mark_cycles()};O.prototype.append=function(e){if(e instanceof Array)return this.append(O.fromArray(e));var t=this;if(t.car===void 0)C(e)?(this.car=e.car,this.cdr=e.cdr):this.car=e;else if(!z(e)){for(;C(t)&&!z(t.cdr);)t=t.cdr;t.cdr=e}return this};O.prototype.serialize=function(){return[this.car,this.cdr]};O.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var n=e;return e=n.cdr,z(n)?{value:void 0,done:!0}:{value:n.car,done:!1}}}};Xc=function(){return Math.trunc?Math.trunc:function(e){return e===0?0:e<0?Math.ceil(e):Math.floor(e)}}();fe.defmacro=function(e,t,n,r){var i=new fe(e,t,n,r);return i.__defmacro__=!0,i};fe.prototype.invoke=function(e,t,n){var r=t.env,i=Cn(t,Js),a=se(se({},i),{},{macro_expand:n}),u=this.__fn__.call(r,e,a,this.__name__);return u};fe.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};lo="define-macro";cu=-1e4;Me.__merge_env__=Symbol.for("merge");Me.prototype=Object.create(fe.prototype);Me.prototype.invoke=function(e,t,n){var r=t.error,i=t.env,a=t.use_dynamic,u={error:r,env:i,use_dynamic:a,dynamic_env:this.__env__,macro_expand:n};return this.__fn__.call(i,e,u,this.__name__||"syntax")};Me.prototype.constructor=Me;Me.prototype.toString=function(){return this.__name__?"#<syntax:".concat(this.__name__,">"):"#<syntax>"};An=Et(function e(t){xt(this,e),Z(this,"_syntax",t,{hidden:!0}),Z(this._syntax,"_param",!0,{hidden:!0})});Me.Parameter=An;bo=Symbol.for("__context__"),wo=Symbol.for("__fn__"),wt=Symbol.for("__data__"),xn=Symbol.for("__ref__"),Ve=Symbol.for("__cycles__"),_f=Symbol.for("__class__"),hf=Symbol.for("__method__"),Do=Symbol.for("__prototype__"),xo=Symbol.for("__lambda__"),df=["name","length","caller","callee","arguments","prototype"];bn=Gr(Fo,1),wr=Gr(Fo,2);he.is=function(e,t){return e instanceof he&&e.__char__===t};he.__names__=Wu;he.__rev_names__={};Object.keys(he.__names__).forEach(function(e){var t=he.__names__[e];he.__rev_names__[t]=e});he.prototype.toUpperCase=function(){return he(this.__char__.toUpperCase())};he.prototype.toLowerCase=function(){return he(this.__char__.toLowerCase())};he.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};he.prototype.valueOf=he.prototype.serialize=function(){return this.__char__};{mu=["length","constructor"],vu=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!mu.includes(e)}),yu=function(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(this.__string__,r)}},qn=Tt(vu);try{for(qn.s();!(yi=qn.n()).done;)gi=yi.value,Q.prototype[gi]=yu(String.prototype[gi])}catch(e){qn.e(e)}finally{qn.f()}}Q.prototype[Symbol.iterator]=ae.mark(function e(){var t,n,r,i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=Array.from(this.__string__),n=0,r=t;case 2:if(!(n<r.length)){u.next=9;break}return i=r[n],u.next=6,he(i);case 6:n++,u.next=2;break;case 9:case"end":return u.stop()}},e,this)});Q.prototype.serialize=function(){return this.valueOf()};Q.is=function(e,t){return e instanceof Q&&e.__string__===t};Q.isString=function(e){return e instanceof Q||typeof e=="string"};Q.prototype.freeze=function(){var e=this.__string__;delete this.__string__,Z(this,"__string__",e)};Q.prototype.get=function(e){return U("LString::get",e,"number"),Array.from(this.__string__)[e.valueOf()]};Q.prototype.cmp=function(e){U("LString::cmp",e,"string");var t=this.valueOf(),n=e.valueOf();return t<n?-1:t===n?0:1};Q.prototype.lower=function(){return Q(this.__string__.toLowerCase())};Q.prototype.upper=function(){return Q(this.__string__.toUpperCase())};Q.prototype.set=function(e,t){U("LString::set",e,"number"),U("LString::set",t,["string","character"]),e=e.valueOf(),t instanceof he&&(t=t.__char__);var n=[];e>0&&n.push(this.__string__.substring(0,e)),n.push(t),e<this.__string__.length-1&&n.push(this.__string__.substring(e+1)),this.__string__=n.join("")};Object.defineProperty(Q.prototype,"length",{get:function(){return this.__string__.length}});Q.prototype.clone=function(){return Q(this.valueOf())};Q.prototype.fill=function(e){U("LString::fill",e,["string","character"]),e instanceof he&&(e=e.valueOf());var t=this.__string__.length;this.__string__=e.repeat(t)};p.prototype.constant=function(e,t){_t(this,"__value__",e),_t(this,"__type__",t)};p.types={float:function(t){return new ue(t)},complex:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return p.isComplex(t)||(t={im:0,re:t}),new oe(t,n)},rational:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return p.isRational(t)||(t={num:t,denom:1}),new le(t,n)}};p.prototype.serialize=function(){return this.__value__};p.prototype.isNaN=function(){return Number.isNaN(this.__value__)};p.prototype.gcd=function(e){var t=this.abs();if(e=e.abs(),e.cmp(t)===1){var n=t;t=e,e=n}for(;;){if(t=t.rem(e),t.cmp(0)===0)return e;if(e=e.rem(t),e.cmp(0)===0)return t}};p.isFloat=function(t){return t instanceof ue||Number(t)===t&&t%1!==0};p.isNumber=function(e){return e instanceof p||p.isNative(e)||p.isBN(e)};p.isComplex=function(e){if(!e)return!1;var t=e instanceof oe||(p.isNumber(e.im)||p.isRational(e.im)||Number.isNaN(e.im))&&(p.isNumber(e.re)||p.isRational(e.re)||Number.isNaN(e.re));return t};p.isRational=function(e){return e?e instanceof le||p.isNumber(e.num)&&p.isNumber(e.denom):!1};p.isInteger=function(e){return!(!(p.isNative(e)||e instanceof p)||p.isFloat(e)||p.isRational(e)||p.isComplex(e))};p.isNative=function(e){return typeof e=="bigint"||typeof e=="number"};p.isBigInteger=function(e){return e instanceof Ee||typeof e=="bigint"||p.isBN(e)};p.isBN=function(e){return typeof bt<"u"&&e instanceof bt};p.getArgsType=function(e,t){return e instanceof ue||t instanceof ue?ue:e instanceof Ee||t instanceof Ee?Ee:p};p.prototype.toString=function(e){return Number.isNaN(this.__value__)?"+nan.0":e>=2&&e<36?this.__value__.toString(e):this.__value__.toString()};p.prototype.asType=function(e){var t=p.getType(this);return p.types[t]?p.types[t](e):p(e)};p.prototype.isBigNumber=function(){return typeof this.__value__=="bigint"||typeof bt<"u"&&!(this.value instanceof bt)};["floor","ceil","round"].forEach(function(e){p.prototype[e]=function(){return this.float||p.isFloat(this.__value__)?p(Math[e](this.__value__)):p(Math[e](this.valueOf()))}});p.prototype.valueOf=function(){if(p.isNative(this.__value__))return Number(this.__value__);if(p.isBN(this.__value__))return this.__value__.toNumber()};Dr=function(){var e=function(r,i){return[r,i]};return{bigint:{bigint:e,float:function(r,i){return[ue(r.valueOf()),i]},rational:function(r,i){return[{num:r,denom:1},i]},complex:function(r,i){return[{im:0,re:r},i]}},integer:{integer:e,float:function(r,i){return[ue(r.valueOf()),i]},rational:function(r,i){return[{num:r,denom:1},i]},complex:function(r,i){return[{im:0,re:r},i]}},float:{bigint:function(r,i){return[r,i&&ue(i.valueOf())]},integer:function(r,i){return[r,i&&ue(i.valueOf())]},float:e,rational:function(r,i){return[r,i&&ue(i.valueOf())]},complex:function(r,i){return[{re:r,im:ue(0)},i]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function(r,i){var a=p.coerce(r.__re__,i.__re__),u=ve(a,2),s=u[0],o=u[1],f=p.coerce(r.__im__,i.__im__),c=ve(f,2),l=c[0],h=c[1];return[{im:l,re:s},{im:h,re:o}]}},rational:{bigint:function(r,i){return[r,i&&{num:i,denom:1}]},integer:function(r,i){return[r,i&&{num:i,denom:1}]},float:function(r,i){return[ue(r.valueOf()),i]},rational:e,complex:function(r,i){return[{im:Wt(r.__type__,i.__im__.__type__,0)[0],re:Wt(r.__type__,i.__re__.__type__,r)[0]},{im:Wt(r.__type__,i.__im__.__type__,i.__im__)[0],re:Wt(r.__type__,i.__re__.__type__,i.__re__)[0]}]}}};function t(n){return function(r,i){return[{im:Wt(n,r.__im__.__type__,0,r.__im__)[1],re:Wt(n,r.__re__.__type__,0,r.__re__)[1]},{im:Wt(n,r.__im__.__type__,0,0)[1],re:Wt(n,i.__type__,0,i)[1]}]}}}();p.coerce=function(e,t){var n=p.getType(e),r=p.getType(t);if(Dr[n]){if(!Dr[n][r])throw new Error("LNumber::coerce unknown rhs type ".concat(r))}else throw new Error("LNumber::coerce unknown lhs type ".concat(n));var i=Dr[n][r](e,t);return i.map(function(a){return p(a,!0)})};p.prototype.coerce=function(e){if(!(typeof e=="number"||e instanceof p))throw new Error("LNumber: you can't coerce ".concat(ke(e)));return typeof e=="number"&&(e=p(e)),p.coerce(this,e)};p.getType=function(e){if(e instanceof p)return e.__type__;if(p.isFloat(e))return"float";if(p.isComplex(e))return"complex";if(p.isRational(e))return"rational";if(typeof e=="number")return"integer";if(typeof BigInt<"u"&&typeof e!="bigint"||typeof bt<"u"&&!(e instanceof bt))return"bigint"};p.prototype.isFloat=function(){return!!(p.isFloat(this.__value__)||this.float)};bi={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"},ko={};Object.keys(bi).forEach(function(e){ko[bi[e]]=e,p.prototype[e]=function(t){return this.op(bi[e],t)}});p._ops={"*":function(t,n){return t*n},"+":function(t,n){return t+n},"-":function(t,n){return typeof n>"u"?-t:t-n},"/":function(t,n){return t/n},"%":function(t,n){return t%n},"|":function(t,n){return t|n},"&":function(t,n){return t&n},"~":function(t){return~t},">>":function(t,n){return t>>n},"<<":function(t,n){return t<<n}};p.prototype.op=function(e,t){if(typeof t>"u")return p(p._ops[e](this.valueOf()));if(typeof t=="number"&&(t=p(t)),Number.isNaN(this.__value__)&&!p.isComplex(t)||!p.isComplex(this)&&Number.isNaN(t.__value__))return p(NaN);var n=this.coerce(t),r=ve(n,2),i=r[0],a=r[1];return i._op?i._op(e,a):p(p._ops[e](i,a))};p.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return oe({re:0,im:t})}return p(Math.sqrt(e))};Kr=function(t,n){return Math.pow(t,n)};try{wi=new Function("a,b","return a ** b"),wi(2,2)===4&&(Kr=wi)}catch{}p.prototype.pow=function(e){var t,n=this.coerce(e),r=ve(n,2),i=r[0],a=r[1];if(p.isNative(i.__value__)&&p.isNative(a.__value__))t=Kr(i.__value__,a.__value__);else if(p.isBN(i.__value__)&&p.isBN(a.__value__))t=this.__value__.pow(e.__value__);else if(i.pow)return i.pow(a);return p(t)};p.prototype.abs=function(){var e=this.__value__;return p.isNative(this.__value__)?e<0&&(e=-e):p.isBN(e)&&e.iabs(),new p(e)};p.prototype.isOdd=function(){if(p.isNative(this.__value__)){if(this.isBigNumber())return this.__value__%BigInt(2)===BigInt(1);if(this.__type__==="float")throw new Error("Invalid number float");return this.__value__%2===1}else if(p.isBN(this.__value__))return this.__value__.isOdd();throw new Error("Invalid number ".concat(this.__type__))};p.prototype.isEven=function(){return!this.isOdd()};p.prototype.cmp=function(e){var t=this.coerce(e),n=ve(t,2),r=n[0],i=n[1];function a(u,s){return u.__value__<s.__value__?-1:u.__value__===s.__value__?0:1}if(r.__type__==="bigint"){if(p.isNative(r.__value__))return a(r,i);if(p.isBN(r.__value__))return this.__value__.cmp(i.__value__)}else if(r instanceof ue)return a(r,i)};oe.prototype=Object.create(p.prototype);oe.prototype.constructor=oe;oe.prototype.constant=function(e,t){_t(this,"__im__",e),_t(this,"__re__",t),_t(this,"__type__","complex")};oe.prototype.abs=function(){return p(this.modulus())};oe.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};oe.prototype.toRational=function(e){var t=this.__im__,n=this.__re__;return p.isFloat(this.__im__)&&(t=ue(this.__im__).toRational(e)),p.isFloat(this.__re__)&&(n=ue(this.__re__).toRational(e)),oe({im:t,re:n})};oe.prototype.pow=function(e){if(e.cmp(0),e===0)return p(1);var t=p(Math.atan2(this.__im__.valueOf(),this.__re__.valueOf())),n=p(this.modulus());if(p.isComplex(e)&&e.__im__.cmp(0)!==0){var r=e.mul(Math.log(n.valueOf())).add(oe.i.mul(t).mul(e));if(!p.isComplex(r))return ue(Math.E).pow(r);var i=ue(Math.E).pow(r.__re__.valueOf());return oe({re:i.mul(Math.cos(r.__im__.valueOf())),im:i.mul(Math.sin(r.__im__.valueOf()))})}var a=e.__re__.cmp(0)>0;if(e=e.__re__.valueOf(),p.isInteger(e)&&a){for(var u=this;--e;)u=u.mul(this);return u}var s=n.pow(e),o=t.mul(e);return oe({re:s.mul(Math.cos(o)),im:s.mul(Math.sin(o))})};oe.prototype.add=function(e){return this.complex_op("add",e,function(t,n,r,i){return{re:t.add(n),im:r.add(i)}})};oe.prototype.factor=function(){if(this.__im__ instanceof ue||this.__im__ instanceof ue){var e=this.__re__,t=this.__im__,n,r;return e instanceof ue?n=e.toRational().mul(e.toRational()):n=e.mul(e),t instanceof ue?r=t.toRational().mul(t.toRational()):r=t.mul(t),n.add(r)}else return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))};oe.prototype.modulus=function(){return this.factor().sqrt()};oe.prototype.conjugate=function(){return oe({re:this.__re__,im:this.__im__.sub()})};oe.prototype.sqrt=function(){var e=this.modulus(),t,n;return e.cmp(0)===0?t=n=e:this.__re__.cmp(0)===1?(t=ue(.5).mul(e.add(this.__re__)).sqrt(),n=this.__im__.div(t).div(2)):(n=ue(.5).mul(e.sub(this.__re__)).sqrt(),this.__im__.cmp(0)===-1&&(n=n.sub()),t=this.__im__.div(n).div(2)),oe({im:n,re:t})};oe.prototype.div=function(e){if(p.isNumber(e)&&!p.isComplex(e)){e instanceof p||(e=p(e));var t=this.__re__.div(e),n=this.__im__.div(e);return oe({re:t,im:n})}else if(!p.isComplex(e))throw new Error("[LComplex::div] Invalid value");if(this.cmp(e)===0){var r=this.coerce(e),i=ve(r,2),a=i[0],u=i[1],s=a.__im__.div(u.__im__);return s.coerce(u.__re__)[0]}var o=this.coerce(e),f=ve(o,2),c=f[0],l=f[1],h=l.factor(),w=l.conjugate(),B=c.mul(w);if(!p.isComplex(B))return B.div(h);var b=B.__re__.op("/",h),g=B.__im__.op("/",h);return oe({re:b,im:g})};oe.prototype.sub=function(e){return this.complex_op("sub",e,function(t,n,r,i){return{re:t.sub(n),im:r.sub(i)}})};oe.prototype.mul=function(e){return this.complex_op("mul",e,function(t,n,r,i){var a={re:t.mul(n).sub(r.mul(i)),im:t.mul(i).add(n.mul(r))};return a})};oe.prototype.complex_op=function(e,t,n){var r=this,i=function(f,c){var l=n(r.__re__,f,r.__im__,c);return"im"in l&&"re"in l?l.im.cmp(0)===0?l.re:oe(l,!0):l};if(typeof t>"u")return i();if(p.isNumber(t)&&!p.isComplex(t)){t instanceof p||(t=p(t));var a=t.asType(0);t={__im__:a,__re__:t}}else if(!p.isComplex(t))throw new Error("[LComplex::".concat(e,"] Invalid value"));var u=t.__re__ instanceof p?t.__re__:this.__re__.asType(t.__re__),s=t.__im__ instanceof p?t.__im__:this.__im__.asType(t.__im__);return i(u,s)};oe._op={"+":"add","-":"sub","*":"mul","/":"div"};oe.prototype._op=function(e,t){var n=oe._op[e];return this[n](t)};oe.prototype.cmp=function(e){var t=this.coerce(e),n=ve(t,2),r=n[0],i=n[1],a=r.__re__.coerce(i.__re__),u=ve(a,2),s=u[0],o=u[1],f=s.cmp(o);if(f!==0)return f;var c=r.__im__.coerce(i.__im__),l=ve(c,2),h=l[0],w=l[1];return h.cmp(w)};oe.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};oe.prototype.toString=function(){var e;this.__re__.cmp(0)!==0?e=[He(this.__re__)]:e=[];var t=this.__im__.valueOf(),n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t),r=He(this.__im__);if(!n&&!Number.isNaN(t)){var i=this.__im__.cmp(0);i<0||i===0&&this.__im__._minus?e.push("-"):e.push("+"),r=r.replace(/^-/,"")}return e.push(r),e.push("i"),e.join("")};ue.prototype=Object.create(p.prototype);ue.prototype.constructor=ue;ue.prototype.toString=function(e){if(this.__value__===Number.NEGATIVE_INFINITY)return"-inf.0";if(this.__value__===Number.POSITIVE_INFINITY)return"+inf.0";if(Number.isNaN(this.__value__))return"+nan.0";e&&(e=e.valueOf());var t=this.__value__.toString(e);if(!t.match(/e[+-]?[0-9]+$/i)){var n=t.replace(/^-/,""),r=this.__value__<0?"-":"";if(t.match(/^-?0\.0{3}/)){var i=n.match(/^[.0]+/g)[0].length-1,a=n.replace(/^[.0]+/,"").replace(/^([0-9a-f])/i,"$1.");return"".concat(r).concat(a,"e-").concat(i.toString(e))}if(t.match(/^-?[0-9a-f]{7,}\.?/i)){var u=n.match(/^[0-9a-f]+/gi)[0].length-1,s=n.replace(/\./,"").replace(/^([0-9a-f])/i,"$1.").replace(/0+$/,"").replace(/\.$/,".0");return"".concat(r).concat(s,"e+").concat(u.toString(e))}if(!p.isFloat(this.__value__)){var o=t+".0";return this._minus?"-"+o:o}}return t.replace(/^([0-9]+)e/,"$1.0e")};ue.prototype._op=function(e,t){t instanceof p&&(t=t.__value__);var n=p._ops[e];return e==="/"&&this.__value__===0&&t===0?NaN:ue(n(this.__value__,t))};ue.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?wf(this.__value__.valueOf()):Co(e.valueOf())(this.__value__.valueOf())};ue.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=ue(Math.sqrt(-e));return oe({re:0,im:t})}return ue(Math.sqrt(e))};ue.prototype.abs=function(){var e=this.valueOf();return e<0&&(e=-e),ue(e)};wf=Co(1e-10);le.prototype=Object.create(p.prototype);le.prototype.constructor=le;le.prototype.constant=function(e,t){_t(this,"__num__",e),_t(this,"__denom__",t),_t(this,"__type__","rational")};le.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};le.prototype.pow=function(e){if(p.isRational(e))return p(Kr(this.valueOf(),e.valueOf()));var t=e.cmp(0);if(t===0)return p(1);if(t===-1){e=e.sub();var n=this.__denom__.pow(e),r=this.__num__.pow(e);return le({num:n,denom:r})}var i=this;for(e=e.valueOf();e>1;)i=i.mul(this),e--;return i};le.prototype.sqrt=function(){var e=this.__num__.sqrt(),t=this.__denom__.sqrt();return e instanceof ue||t instanceof ue?e.div(t):le({num:e,denom:t})};le.prototype.abs=function(){var e=this.__num__,t=this.__denom__;return e.cmp(0)===-1&&(e=e.sub()),t.cmp(0)!==1&&(t=t.sub()),le({num:e,denom:t})};le.prototype.cmp=function(e){return p(this.valueOf(),!0).cmp(e)};le.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__),t,n;e.cmp(1)!==0?(t=this.__num__.div(e),t instanceof le&&(t=p(t.valueOf(!0))),n=this.__denom__.div(e),n instanceof le&&(n=p(n.valueOf(!0)))):(t=this.__num__,n=this.__denom__);var r=this.cmp(0)<0;if(r){if(t.abs().cmp(n.abs())===0)return t.toString()}else if(t.cmp(n)===0)return t.toString();return t.toString()+"/"+n.toString()};le.prototype.valueOf=function(e){return this.__denom__.cmp(0)===0?this.__num__.cmp(0)<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:e?p._ops["/"](this.__num__.value,this.__denom__.value):ue(this.__num__.valueOf()).div(this.__denom__.valueOf())};le.prototype.mul=function(e){if(e instanceof p||(e=p(e)),p.isRational(e)){var t=this.__num__.mul(e.__num__),n=this.__denom__.mul(e.__denom__);return le({num:t,denom:n})}var r=p.coerce(this,e),i=ve(r,2),a=i[0],u=i[1];return a.mul(u)};le.prototype.div=function(e){if(e instanceof p||(e=p(e)),p.isRational(e)){var t=this.__num__.mul(e.__denom__),n=this.__denom__.mul(e.__num__);return le({num:t,denom:n})}var r=p.coerce(this,e),i=ve(r,2),a=i[0],u=i[1],s=a.div(u);return s};le.prototype._op=function(e,t){return this[ko[e]](t)};le.prototype.sub=function(e){if(typeof e>"u")return this.mul(-1);if(e instanceof p||(e=p(e)),p.isRational(e)){var t=e.__num__.sub(),n=e.__denom__;return this.add(le({num:t,denom:n}))}e instanceof p?e=e.sub():e=p(e).sub();var r=p.coerce(this,e),i=ve(r,2),a=i[0],u=i[1];return a.add(u)};le.prototype.add=function(e){if(e instanceof p||(e=p(e)),p.isRational(e)){var t=this.__denom__,n=e.__denom__,r=this.__num__,i=e.__num__,a,u;return t!==n?(u=n.mul(r).add(i.mul(t)),a=t.mul(n)):(u=r.add(i),a=t),le({num:u,denom:a})}if(p.isFloat(e))return ue(this.valueOf()).add(e);var s=p.coerce(this,e),o=ve(s,2),f=o[0],c=o[1];return f.add(c)};Ee.prototype=Object.create(p.prototype);Ee.prototype.constructor=Ee;Ee.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};Ee.prototype.serialize=function(){return this.__value__.toString()};Ee.prototype._op=function(e,t){if(typeof t>"u")return p.isBN(this.__value__)?(e=Ee.bn_op[e],Ee(this.__value__.clone()[e](),!1)):Ee(p._ops[e](this.__value__),!0);if(p.isBN(this.__value__)&&p.isBN(t.__value__))return e=Ee.bn_op[e],Ee(this.__value__.clone()[e](t),!1);var n=p._ops[e](this.__value__,t.__value__);if(e==="/"){var r=this.op("%",t).cmp(0)===0;return r?p(n):le({num:this,denom:t})}return Ee(n,!0)};Ee.prototype.sqrt=function(){var e,t=this.cmp(0)<0;return p.isNative(this.__value__)?e=p(Math.sqrt(t?-this.valueOf():this.valueOf())):p.isBN(this.__value__)&&(e=t?this.__value__.neg().sqrt():this.__value__.sqrt()),t?oe({re:0,im:e}):e};p.NaN=p(NaN);oe.i=oe({im:1,re:0});Je.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()}),this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()}),this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()}),this.read_string=this._with_parser(function(e,t){if(!p.isInteger(t)){var n=p.getType(t);Xt("read-string",n,"integer")}return e.__lexer__.read_string(t.valueOf())}),this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Je.prototype._with_init_parser=function(e,t){var n=this;return Se(ae.mark(function r(){var i,a,u,s,o=arguments;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.call(n);case 2:for(i=c.sent,a=o.length,u=new Array(a),s=0;s<a;s++)u[s]=o[s];return c.abrupt("return",t.apply(void 0,[i].concat(u)));case 5:case"end":return c.stop()}},r)}))};Je.prototype.is_open=function(){return this._with_parser!==null};Je.prototype.close=function(){var e=this;this.__parser__=null,this._with_parser=null,["read","close","read_char","peek-char","read_line"].forEach(function(t){e[t]=function(){throw new Error("input-port: port is closed")}}),this.char_ready=function(){return!1}};Je.prototype.toString=function(){return"#<input-port>"};We.prototype.is_open=function(){return this._closed!==!0};We.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function(){return!0},set:function(){},configurable:!1,enumerable:!1}),this.write=function(){throw new Error("output-port: port is closed")}};We.prototype.flush=function(){};We.prototype.toString=function(){return"#<output-port>"};Mr=function(e){function t(n){var r;return xt(this,t),r=Ki(this,t,[function(){var i;return(i=r)._write.apply(i,arguments)}]),U("BufferedOutputPort",n,"function"),Z(r,"_fn",n,{hidden:!0}),Z(r,"_buffer",[],{hidden:!0}),r}return zi(t,e),Et(t,[{key:"flush",value:function(){this._buffer.length&&(this._fn(this._buffer.join("")),this._buffer.length=0)}},{key:"_write",value:function(){for(var r=this,i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];if(a.length){a.forEach(function(o){r._buffer.push(o)});var s=this._buffer[this._buffer.length-1];s.match(/\n$/)&&(this._buffer[this._buffer.length-1]=s.replace(/\n$/,""),this.flush())}}}])}(We);Pt.prototype=Object.create(We.prototype);Pt.prototype.constructor=Pt;Pt.prototype.toString=function(){return"#<output-port (string)>"};Pt.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};ct.prototype=Object.create(We.prototype);ct.prototype.constructor=ct;ct.prototype.fs=function(){return this._fs||(this._fs=this.internal("fs")),this._fs};ct.prototype.internal=function(e){return we.get("**internal-env**").get(e)};ct.prototype.close=function(){var e=this;return new Promise(function(t,n){e.fs().close(e._fd,function(r){r?n(r):(Z(e,"_fd",null,{hidden:!0}),We.prototype.close.call(e),t())})})};ct.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};ht.prototype.char_ready=function(){return!0};ht.prototype=Object.create(Je.prototype);ht.prototype.constructor=ht;ht.prototype.toString=function(){return"#<input-port (string)>"};en.prototype.char_ready=function(){return!0};en.prototype=Object.create(Je.prototype);en.prototype.constructor=en;en.prototype.toString=function(){return"#<input-port (parser)>"};tt.prototype=Object.create(Je.prototype);tt.prototype.constructor=tt;tt.prototype.toString=function(){return"#<input-port (bytevector)>"};tt.prototype.close=function(){var e=this;Z(this,"__vector__",re);var t=function(){throw new Error("Input-binary-port: port is closed")};["read_u8","close","peek_u8","read_u8_vector"].forEach(function(n){e[n]=t}),this.u8_ready=this.char_ready=function(){return!1}};tt.prototype.u8_ready=function(){return!0};tt.prototype.peek_u8=function(){return this.__index__>=this.__vector__.length?Be:this.__vector__[this.__index__]};tt.prototype.skip=function(){this.__index__<=this.__vector__.length&&++this.__index__};tt.prototype.read_u8=function(){var e=this.peek_u8();return this.skip(),e};tt.prototype.read_u8_vector=function(e){return typeof e>"u"?e=this.__vector__.length:e>this.__index__+this.__vector__.length&&(e=this.__index__+this.__vector__.length),this.peek_u8()===Be?Be:this.__vector__.slice(this.__index__,e)};ft.prototype=Object.create(We.prototype);ft.prototype.constructor=ft;ft.prototype.close=function(){We.prototype.close.call(this),Z(this,"_buffer",null,{hidden:!0})};ft.prototype._close_guard=function(){if(this._closed)throw new Error("output-port: binary port is closed")};ft.prototype.write_u8=function(e){U("OutputByteVectorPort::write_u8",e,"number"),this.write(e)};ft.prototype.write_u8_vector=function(e){U("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)};ft.prototype.toString=function(){return"#<output-port (bytevector)>"};ft.prototype.valueOf=function(){return this.__buffer__};tn.prototype=Object.create(ht.prototype);tn.prototype.constructor=tn;tn.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};hn.prototype=Object.create(tt.prototype);hn.prototype.constructor=hn;hn.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};Lt.prototype=Object.create(ct.prototype);Lt.prototype.constructor=Lt;Lt.prototype.write_u8=function(e){U("OutputByteVectorPort::write_u8",e,"number"),this.write(e)};Lt.prototype.write_u8_vector=function(e){U("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)};Jr=Symbol.for("binary"),In=Symbol.for("text"),Be=new ma;ma.prototype.toString=function(){return"#<eof>"};dn.prototype.exec=function(){var e=Se(function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ae.mark(function i(){var a,u,s,o,f,c;return ae.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(a=r.use_dynamic,u=a===void 0?!1:a,s=r.dynamic_env,o=r.env,U("Interpreter::exec",t,["string","array"],1),U("Interpreter::exec",u,"boolean",2),o||(o=n.__env__),s||(s=o),H.set("**interaction-environment**",n.__env__),!Array.isArray(t)){h.next=10;break}return h.abrupt("return",rn(t,{env:o,dynamic_env:s,use_dynamic:u}));case 10:return h.prev=10,n.__parser__.prepare(t),h.next=14,rn(n.__parser__,{env:o,dynamic_env:s,use_dynamic:u});case 14:return h.abrupt("return",h.sent);case 17:throw h.prev=17,h.t0=h.catch(10),(f=h.t0.message)!==null&&f!==void 0&&f.includes("at line")||(c=" at line ".concat(n.__parser__.get_line()+1),h.t0.message+=c),h.t0;case 21:case"end":return h.stop()}},i,null,[[10,17]])})()});return function(t){return e.apply(this,arguments)}}();dn.prototype.get=function(e){var t=this.__env__.get(e);if(_e(t)){var n=new Qr({env:this.__env__});return t.bind(n)}return t};dn.prototype.set=function(e,t){return this.__env__.set(e,t)};dn.prototype.constant=function(e,t){return this.__env__.constant(e,t)};Qn.prototype=new Error;Qn.prototype.constructor=Qn;Wn=function(e){function t(){return xt(this,t),Ki(this,t,arguments)}return zi(t,e),Et(t)}(kr(Error));xe.prototype.list=function(){return fo(this.__env__)};xe.prototype.fs=function(){return this.get("**fs**")};xe.prototype.unset=function(e){e instanceof D&&(e=e.valueOf()),e instanceof Q&&(e=e.valueOf()),delete this.__env__[e]};xe.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ye(e)==="object"&&(t=e),(!e||ye(e)==="object")&&(e="child of "+(this.__name__||"unknown")),new xe(t||{},this,e)};xe.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e instanceof D&&(e=e.__name__),e instanceof Q&&(e=e.valueOf()),t)return n||(t=sa(t)),this.__docs__.set(e,t),this;if(this.__docs__.has(e))return this.__docs__.get(e);if(this.__parent__)return this.__parent__.doc(e)};xe.prototype.new_frame=function(e,t){var n=this.inherit("__frame__");return n.set("parent.frame",F("parent.frame",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;r=r.valueOf();var i=n.__parent__;if(!pa(i))return re;if(r<=0)return i;var a=i.get("parent.frame");return a(r-1)},H.__env__["parent.frame"].__doc__)),t.callee=e,n.set("arguments",t),n};xe.prototype._lookup=function(e){if(e instanceof D&&(e=e.__name__),e instanceof Q&&(e=e.valueOf()),this.__env__.hasOwnProperty(e))return Ke(this.__env__[e]);if(this.__parent__)return this.__parent__._lookup(e)};xe.prototype.toString=function(){return"#<environment:"+this.__name__+">"};xe.prototype.clone=function(){var e=this,t={};return Object.keys(this.__env__).forEach(function(n){t[n]=e.__env__[n]}),new xe(t,this.__parent__,this.__name__)};xe.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"merge";return U("Environment::merge",e,"environment"),this.inherit(t,e.__env__)};Ke.isUndefined=function(e){return e instanceof Ke&&typeof e.value>"u"};Ke.prototype.valueOf=function(){return this.value};nn.prototype.toString=function(){return this.__values__.map(function(e){return He(e)}).join(`
`)};nn.prototype.valueOf=function(){return this.__values__};xe.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};U("Environment::get",e,["symbol","string"]);var n=t.throwError,r=n===void 0?!0:n,i=e;(i instanceof D||i instanceof Q)&&(i=i.valueOf());var a=this._lookup(i);if(a instanceof Ke)return Ke.isUndefined(a)?void 0:Tr(a.valueOf());var u;if(e instanceof D&&e[D.object]?u=e[D.object]:typeof i=="string"&&(u=i.split(".").filter(Boolean)),u&&u.length>0){var s=u,o=Fr(s),f=o[0],c=o.slice(1);if(a=this._lookup(f),c.length)try{if(a instanceof Ke?a=a.valueOf():(a=Yn(jt,f),_e(a)&&(a=nt(a))),typeof a<"u")return Yn.apply(void 0,[a].concat(be(c)))}catch(l){throw l}else if(a instanceof Ke)return Tr(a.valueOf());a=Yn(jt,i)}if(typeof a<"u")return a;if(r)throw new Error("Unbound variable `"+i.toString()+"'")};xe.prototype.set=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return U("Environment::set",e,["string","symbol"]),p.isNumber(t)&&(t=p(t)),e instanceof D&&(e=e.__name__),e instanceof Q&&(e=e.valueOf()),this.__env__[e]=t,n&&this.doc(e,n,!0),this};xe.prototype.constant=function(e,t){var n=this;if(this.__env__.hasOwnProperty(e))throw new Error("Environment::constant: ".concat(e," already exists"));if(arguments.length===1&&pt(arguments[0])){var r=arguments[0];Object.keys(r).forEach(function(i){n.constant(e,r[i])})}else _t(this.__env__,e,t);return this};xe.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};xe.prototype.ref=function(e){for(var t=this;t;){if(t.has(e))return t;t=t.__parent__}};xe.prototype.parents=function(){for(var e=this,t=[];e;)t.unshift(e),e=e.__parent__;return t};xf=oa(Sn(`(lambda ()
                                        "[native code]"
                                        (throw "Invalid Invocation"))`))[0],Yn=F("get",function(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var u=i.length;i.length;){_e(t)&&ye(i[0])!=="symbol"&&(t=nt(t));var s=i.shift(),o=Zt(s);if(o==="then"&&t instanceof Pe?n=Pe.prototype.then:o==="__code__"&&_e(t)&&typeof t.__code__>"u"?n=xf:n=t[o],typeof n>"u"){if(i.length)throw new Error("Try to get ".concat(i[0]," from undefined"));return n}else{var f;i.length-1<u&&(f=t),n=Tr(n,f)}t=n}return n},`(. obj . args)
    (get obj . args)

    This function uses an object as a base and keeps using arguments to get the
    property of JavaScript object. Arguments need to be a strings.
    e.g. \`(. console "log")\` if you use any function inside LIPS it
    will be weakly bound (can be rebound), so you can call this log function
    without problem unlike in JavaScript when you use
    \`var log = console.log\`.
    \`get\` is an alias because . doesn't work everywhere, e.g. you can't
    pass it as an argument.`);Oo=new xe({stdout:new Mr(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Mr(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:Je(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDD40-\uDD49\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDED0-\uDEE3\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59\uDFF0-\uDFF9]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD818[\uDD30-\uDD39]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDD70-\uDD79\uDE80-\uDE96]|\uD833[\uDCF0-\uDCF9]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9\uDDF1-\uDDFA]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},void 0,"internal"),Rr=p(NaN),gu=se({"#t":!0,"#f":!1,"#true":!0,"#false":!1,"+inf.0":Number.POSITIVE_INFINITY,"-inf.0":Number.NEGATIVE_INFINITY,"+nan.0":Rr,"-nan.0":Rr},to),H=new xe({eof:Be,undefined:void 0,"peek-char":F("peek-char",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=wn(this,"stdin")),pr("peek-char",e,"input-port"),e.peek_char()},`(peek-char port)

        This function reads and returns a character from the string
        port, or, if there is no more data in the string port, it
        returns an EOF.`),"read-line":F("read-line",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=wn(this,"stdin")),pr("read-line",e,"input-port"),e.read_line()},`(read-line port)

        This function reads and returns the next line from the input
        port.`),"read-char":F("read-char",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=wn(this,"stdin")),pr("read-char",e,"input-port"),e.read_char()},`(read-char port)

        This function reads and returns the next character from the
        input port.`),read:F("read",function(){var e=Se(function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return ae.mark(function i(){var a,u;return ae.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=n.env,r===null?u=wn(a,"stdin"):u=r,pr("read",u,"input-port"),o.abrupt("return",u.read.call(a));case 4:case"end":return o.stop()}},i)})()});function t(){return e.apply(this,arguments)}return t}(),`(read [port])

        This function, if called with a port, it will parse the next
        item from the port. If called without an input, it will read
        a string from standard input (using the browser's prompt or
        a user defined input method) and parse it. This function can be
        used together with \`eval\` to evaluate code from port.`),pprint:F("pprint",function(t){C(t)?(t=new Dt.Formatter(t.toString(!0)).break().format(),H.get("display").call(H,t)):H.get("write").call(H,t),H.get("newline").call(H)},`(pprint expression)

        This function will pretty print its input to stdout. If it is called
        with a non-list, it will just call the print function on its
        input.`),print:F("print",function(){for(var t=H.get("display"),n=H.get("newline"),r=this.use_dynamic,i=H,a=H,u=arguments.length,s=new Array(u),o=0;o<u;o++)s[o]=arguments[o];s.forEach(function(f){En(t,[f],{env:i,dynamic_env:a,use_dynamic:r}),En(n,[],{env:i,dynamic_env:a,use_dynamic:r})})},`(print . args)

        This function converts each input into a string and prints
        the result to the standard output (by default it's the
        console but it can be defined in user code). This function
        calls \`(newline)\` after printing each input.`),format:F("format",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U("format",t,"string");var a=/(~[as%~])/g,u=t.match(/(~[as])/g);if(u&&u.length>r.length)throw new Error("Not enough arguments");var s=0,o=H.get("repr");if(t=t.replace(a,function(f){var c=f[1];if(c==="~")return"~";if(c==="%")return`
`;var l=r[s++];return c==="a"?o(l):o(l,!0)}),u=t.match(/~([\S])/),u)throw new Error("format: Unrecognized escape sequence ".concat(u[1]));return t},`(format string n1 n2 ...)

        This function accepts a string template and replaces any
        escape sequences in its inputs:

        * ~a value as if printed with \`display\`
        * ~s value as if printed with \`write\`
        * ~% newline character
        * ~~ literal tilde '~'

        If there are missing inputs or other escape characters it
        will error.`),newline:F("newline",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=H.get("display"),r=this.use_dynamic,i=H,a=H;En(n,[`
`,t],{env:i,dynamic_env:a,use_dynamic:r})},`(newline [port])

        Write newline character to standard output or given port`),display:F("display",function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;n===null?n=wn(this,"stdout"):U("display",n,"output-port");var r=t;n instanceof Lt||(r=H.get("repr")(t)),n.write.call(H,r)},`(display string [port])

        This function outputs the string to the standard output or
        the port if given. No newline.`),"display-error":F("display-error",function(){for(var t=wn(this,"stderr"),n=H.get("repr"),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var u=i.map(n).join(" ");t.write.call(H,u),H.get("newline").call(this,t)},`(display-error . args)

        Display an error message on stderr.`),"%foldcase-string":F("%foldcase-string",uo,`(%foldcase-string string)

         Same as string-foldcase but without typechecking`),"%same-functions":F("%same-functions",function(e,t){return!_e(e)||!_e(t)?!1:nt(e)===nt(t)},`(%same-functions a b)

        A helper function that checks if the two input functions are
        the same.`),help:F(new fe("help",function(e,t){var n=t.dynamic_env,r=t.use_dynamic,i=t.error,a;if(e.car instanceof D)a=e.car;else if(C(e.car)&&e.car.car instanceof D)a=e.car.car;else{var u=this;n=this;var s=ie(e.car,{env:u,error:i,dynamic_env:n,use_dynamic:r});return s&&s.__doc__?s.__doc__:void 0}var o,f=this.get(a);if(o=f&&f.__doc__,o)return o;var c=this.ref(a);if(c&&(o=c.doc(a),o))return o}),`(help object)

         This macro returns documentation for a function, macro, or a variable.`),cons:F("cons",function(t,n){return new O(t,n)},`(cons left right)

        This function returns a new list with the first appended
        before the second. If the second is not a list cons will
        return a dotted pair.`),car:F("car",function(t){return U("car",t,"pair"),t.car},`(car pair)

        This function returns the car (item 1) of the list.`),cdr:F("cdr",function(t){return U("cdr",t,"pair"),t.cdr},`(cdr pair)

        This function returns the cdr (all but first) of the list.`),"set!":F(new fe("set!",function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.use_dynamic,i=Cn(n,Qs),a=this,u=this,s,o=se(se({},i),{},{env:this,dynamic_env:a,use_dynamic:r}),f=ie(e.cdr.car,o);f=jn(f);function c(g,_,m){return et(g)?g.then(function(d){return c(g,d,m)}):et(_)?_.then(function(d){return c(g,d,m)}):et(m)?m.then(function(d){return c(g,_,d)}):(u.get("set-obj!").call(u,g,_,m),m)}if(C(e.car)&&D.is(e.car.car,".")){var l=e.car.cdr.car,h=e.car.cdr.cdr.car,w=ie(l,o),B=ie(h,o);return c(w,B,f)}if(!(e.car instanceof D))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");var b=e.car.valueOf();return s=this.ref(e.car.__name__),pe(f,function(g){if(!s){var _=b.split(".");if(_.length>1){var m=_.pop(),d=_.join("."),x=t.get(d,{throwError:!1});if(x){c(x,m,g);return}}throw new Error("Unbound variable `"+b+"'")}s.set(b,g)})}),`(set! name value)

         Macro that can be used to set the value of the variable or slot (mutate it).
         set! searches the scope chain until it finds first non empty slot and sets it.`),"unset!":F(new fe("set!",function(e){if(!(e.car instanceof D))throw new Error("unset! first argument need to be a symbol or dot accessor that evaluate to object.");var t=e.car,n=this.ref(t);n&&delete n.__env__[t.__name__]}),`(unset! name)

         Function to delete the specified name from environment.
         Trying to access the name afterwards will error.`),"set-car!":F("set-car!",function(e,t){U("set-car!",e,"pair"),e.car=t},`(set-car! obj value)

         Function that sets the car (first item) of the list/pair to specified value.
         The old value is lost.`),"set-cdr!":F("set-cdr!",function(e,t){U("set-cdr!",e,"pair"),e.cdr=t},`(set-cdr! obj value)

         Function that sets the cdr (tail) of the list/pair to specified value.
         It will destroy the list. The old tail is lost.`),"empty?":F("empty?",function(e){return typeof e>"u"||z(e)},`(empty? object)

         Function that returns #t if value is nil (an empty list) or undefined.`),gensym:F("gensym",ua,`(gensym)

         Generates a unique symbol that is not bound anywhere,
         to use with macros as meta name.`),load:F("load",function(t,n){U("load",t,"string");var r=this;r.__name__==="__frame__"&&(r=r.__parent__),n instanceof xe||(r===H?n=r:n=this.get("**interaction-environment**"));var i="@lips",a=t.startsWith(i),u="**module-path**",s=H.get(u,{throwError:!1});t=t.valueOf(),t.match(/.[^.]+$/)||(t+=".scm");var o=t.match(/\.xcb$/);function f(g){return o?g=zo(g):(ke(g)==="buffer"&&(g=g.toString()),g=g.replace(/^(#!.*)/,function(_,m){return po(m)?m:""}),g.match(/^\{/)&&(g=$o(g))),rn(g,{env:n})}function c(g){return jt.fetch(g).then(function(_){return o?_.arrayBuffer():_.text()}).then(function(_){return o&&(_=new Uint8Array(_)),_})}function l(){var g=H.get("__dirname");return g.replace(/[^/]+$/,"")}if(va())return new Promise(function(){var g=Se(ae.mark(function _(m,d){var x,S,I,V,K;return ae.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,Ui;case 3:if(x=Yt("path"),S=Yt("fs"),I=l(),a&&(t=t.replace(i,I)),!s){M.next=12;break}s=s.valueOf(),t.startsWith("/")||(t=x.join(s,t)),M.next=19;break;case 12:if(t.startsWith("/")){M.next=19;break}if(V=r.get("command-line",{throwError:!1}),!V){M.next=18;break}return M.next=17,V();case 17:K=M.sent;case 18:K&&!z(K)&&(process.cwd(),t=x.join(x.dirname(K.car.valueOf()),t));case 19:H.set(u,x.dirname(t)),S.readFile(t,function(G,ce){if(G)d(G),H.set(u,s);else try{f(ce).then(function(){m(),H.set(u,s)}).catch(d)}catch(y){d(y)}}),M.next=26;break;case 23:M.prev=23,M.t0=M.catch(0),console.error(M.t0);case 26:case"end":return M.stop()}},_,null,[[0,23]])}));return function(_,m){return g.apply(this,arguments)}}());if(a){var h,w,B=(h=H.get("__dirname",{throwError:!1}))!==null&&h!==void 0?h:$r;(w=B)!==null&&w!==void 0||(B=$r);var b=B.replace(/dist\/?[^\/]*$/,"");t=t.replace(i,b)}return s&&(s=s.valueOf(),t.startsWith("/")||(t=s+"/"+t.replace(/^\.?\/?/,""))),c(t).then(function(g){return H.set(u,t.replace(/\/[^/]*$/,"")),f(g)}).then(function(){}).finally(function(){H.set(u,s)})},`(load filename)
        (load filename environment)

        Fetches the file (from disk or network) and evaluates its content as LIPS code.
        If the second argument is provided and it's an environment the evaluation
        will happen in that environment.`),while:F(new fe("while",function(e,t){var n=e.car,r=se(se({},t),{},{env:this}),i=new O(new D("begin"),e.cdr);return function a(){return pe(ie(n,r),function(u){if(u)return pe(ie(i,r),a)})}()}),`(while cond body)

         Creates a loop, it executes cond and body until cond expression is false.`),do:F(new fe("do",function(){var e=Se(function(t,n){var r=this,i=n.use_dynamic,a=n.error;return ae.mark(function u(){var s,o,f,c,l,h,w,B,b,g;return ae.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:s=r,o=s,f=s.inherit("do"),c=t.car,l=t.cdr.car,h=t.cdr.cdr,z(h)||(h=new O(D("begin"),h)),w={env:s,dynamic_env:o,use_dynamic:i,error:a},B=c;case 9:if(z(B)){m.next=20;break}return b=B.car,m.t0=f,m.t1=b.car,m.next=15,ie(b.cdr.car,w);case 15:m.t2=m.sent,m.t0.set.call(m.t0,m.t1,m.t2),B=B.cdr,m.next=9;break;case 20:w={env:f,dynamic_env:o,error:a},g=ae.mark(function d(){var x,S,I,V,K;return ae.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(z(h)){M.next=3;break}return M.next=3,Dt.evaluate(h,w);case 3:x=c,S={};case 5:if(z(x)){M.next=15;break}if(I=x.car,z(I.cdr.cdr)){M.next=12;break}return M.next=10,ie(I.cdr.cdr.car,w);case 10:V=M.sent,S[I.car.valueOf()]=V;case 12:x=x.cdr,M.next=5;break;case 15:K=Object.getOwnPropertySymbols(S),w.env=f=s.inherit("do"),Object.keys(S).concat(K).forEach(function(G){f.set(G,S[G])});case 18:case"end":return M.stop()}},d)});case 22:return m.next=24,ie(l.car,w);case 24:if(m.t3=m.sent,m.t3!==!1){m.next=29;break}return m.delegateYield(g(),"t4",27);case 27:m.next=22;break;case 29:if(z(l.cdr)){m.next=33;break}return m.next=32,ie(l.cdr.car,w);case 32:return m.abrupt("return",m.sent);case 33:case"end":return m.stop()}},u)})()});return function(t,n){return e.apply(this,arguments)}}()),`(do ((<var> <init> <next>)) (test return) . body)

         Iteration macro that evaluates the expression body in scope of the variables.
         On each loop it changes the variables according to the <next> expression and runs
         test to check if the loop should continue. If test is a single value, the macro
         will return undefined. If the test is a pair of expressions the macro will
         evaluate and return the second expression after the loop exits.`),if:F(new fe("if",function(e,t){var n=t.error,r=t.use_dynamic,i=this,a=this,u={env:a,dynamic_env:i,use_dynamic:r,error:n},s=function(c){return Un(c)?ie(e.cdr.cdr.car,u):ie(e.cdr.car,u)};if(z(e))throw new Error("too few expressions for `if`");var o=ie(e.car,u);return pe(o,s)}),`(if cond true-expr false-expr)

         Macro that evaluates cond expression and if the value is true, it
         evaluates and returns true-expression, if not it evaluates and returns
         false-expression.`),"let-env":new fe("let-env",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.dynamic_env,r=t.use_dynamic,i=t.error;U("let-env",e,"pair");var a=ie(e.car,{env:this,dynamic_env:n,error:i,use_dynamic:r});return pe(a,function(u){return U("let-env",u,"environment"),ie(O(D("begin"),e.cdr),{env:u,dynamic_env:n,error:i})})},`(let-env env . body)

        Special macro that evaluates body in context of given environment
        object.`),letrec:F(fr(Symbol.for("letrec")),`(letrec ((a value-a) (b value-b) ...) . body)

         Macro that creates a new environment, then evaluates and assigns values to
         names and then evaluates the body in context of that environment.
         Values are evaluated sequentially and the next value can access the
         previous values/names.`),"letrec*":F(fr(Symbol.for("letrec")),`(letrec* ((a value-a) (b value-b) ...) . body)

         Same as letrec but the order of execution of the binding is guaranteed,
         so you can use recursive code as well as referencing the previous binding.

         In LIPS both letrec and letrec* behave the same.`),"let*":F(fr(Symbol.for("let*")),`(let* ((a value-a) (b value-b) ...) . body)

         Macro similar to \`let\`, but the subsequent bindings after the first
         are evaluated in the environment including the previous let variables,
         so you can define one variable, and use it in the next's definition.`),let:F(fr(Symbol.for("let")),`(let ((a value-a) (b value-b) ...) . body)

         Macro that creates a new environment, then evaluates and assigns values to names,
         and then evaluates the body in context of that environment.  Values are evaluated
         sequentially but you can't access previous values/names when the next are
         evaluated. You can only get them in the body of the let expression.  (If you want
         to define multiple variables and use them in each other's definitions, use
         \`let*\`.)`),"begin*":F(yf("begin*",function(e){return e.pop()}),`(begin* . body)

         This macro is a parallel version of begin. It evaluates each expression
         in the body and if it's a promise it will await it in parallel and return
         the value of the last expression (i.e. it uses Promise.all()).`),shuffle:F("shuffle",function(e){U("shuffle",e,["pair","nil","array"]);var t=H.get("random");if(z(e))return re;if(Array.isArray(e))return ou(e.slice(),t);var n=H.get("list->array")(e);return n=ou(n,t),H.get("array->list")(n)},`(shuffle obj)

        Order items in vector or list in random order.`),begin:F(new fe("begin",function(e,t){var n=se(se({},t),{},{env:this}),r=H.get("list->array")(e),i;return function a(){if(r.length){var u=r.shift(),s=ie(u,n);return pe(s,function(o){return i=o,a()})}else return i}()}),`(begin . args)

         Macro that runs a list of expressions in order and returns the value
         of the last one. It can be used in places where you can only have a
         single expression, like (if).`),ignore:new fe("ignore",function(e,t){var n=se(se({},t),{},{env:this,dynamic_env:this});ie(new O(new D("begin"),e),n)},`(ignore . body)

        Macro that will evaluate the expression and swallow any promises that may
        be created. It will discard any value that may be returned by the last body
        expression. The code should have side effects and/or when it's promise
        it should resolve to undefined.`),"call/cc":F(fe.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=se({env:this},t);return pe(ie(e.car,n),function(r){if(_e(r))return r(new Lo(null))})}),`(call/cc proc)

         Call-with-current-continuation.

         NOT SUPPORTED BY LIPS RIGHT NOW`),parameterize:F(new fe("parameterize",function(e,t){var n=t.dynamic_env,r=n.inherit("parameterize").new_frame(null,{}),i=se(se({},t),{},{env:this}),a=e.car;if(!C(a)){var u=ke(a);throw new Error("Invalid syntax for parameterize expecting pair got ".concat(u))}function s(){var o=new O(new D("begin"),e.cdr);return ie(o,se(se({},i),{},{dynamic_env:r}))}return function o(){var f=a.car,c=f.car.valueOf();return pe(ie(f.cdr.car,i),function(l){var h=n.get(c,{throwError:!1});if(!Fn(h))throw new Error("Unknown parameter ".concat(c));return r.set(c,h.inherit(l)),Kt(a.cdr)?s():(a=a.cdr,o())})}()}),`(parameterize ((name value) ...)

         Macro that change the dynamic variable created by make-parameter.`),"make-parameter":F(new fe("make-parameter",function(e,t){t.dynamic_env;var n=ie(e.car,t),r;return C(e.cdr.car)&&(r=ie(e.cdr.car,t)),new Xr(n,r)}),`(make-parameter init converter)

    Function creates new dynamic variable that can be custimized with parameterize
    macro. The value should be assigned to a variable e.g.:

    (define radix (make-parameter 10))

    The result value is a procedure that return the value of dynamic variable.`),"define-syntax-parameter":F(new fe("define-syntax-parameter",function(e,t){var n=e.car,r=this;if(!(n instanceof D))throw new Error("define-syntax-parameter: invalid syntax expecting symbol got ".concat(ke(n)));var i=ie(e.cdr.car,se({env:r},t));U("define-syntax-parameter",i,"syntax",2),i.__name__=n.valueOf(),i.__name__ instanceof Q&&(i.__name__=i.__name__.valueOf());var a;C(e.cdr.cdr)&&Q.isString(e.cdr.cdr.car)&&(a=e.cdr.cdr.car.valueOf()),r.set(e.car,new An(i),a,!0)}),`(define-syntax-parameter name syntax [__doc__])

         Binds <keyword> to the transformer obtained by evaluating <transformer spec>.
         The transformer provides the default expansion for the syntax parameter,
         and in the absence of syntax-parameterize, is functionally equivalent to
         define-syntax.`),"syntax-parameterize":F(new fe("syntax-parameterize",function(e,t){for(var n=H.get("list->array")(e.car),r=this.inherit("syntax-parameterize");n.length;){var i=n.shift();if(!(C(i)||i.car instanceof D)){var a="invalid syntax for syntax-parameterize: ".concat(Hn(e,!0));throw new Error("syntax-parameterize: ".concat(a))}var u=ie(i.cdr.car,se(se({},t),{},{env:this})),s=i.car;U("syntax-parameterize",u,["syntax"]),U("syntax-parameterize",s,"symbol"),u.__name__=s.valueOf(),u.__name__ instanceof Q&&(u.__name__=u.__name__.valueOf());var o=new An(u);if(s.is_gensym()){var f=s.literal(),c=this.get(f,{throwError:!1});c instanceof An&&r.set(f,o)}r.set(s,o)}var l=Ni([r,t.dynamic_env],e.cdr);return ie(l,se(se({},t),{},{env:r}))}),`(syntax-parameterize (bindings) body)

         Macro work similar to let-syntax but the the bindnds will be exposed to the user.
         With syntax-parameterize you can define anaphoric macros.`),define:F(fe.defmacro("define",function(e,t){var n=this;if(C(e.car)&&e.car.car instanceof D){var r=new O(new D("define"),new O(e.car.car,new O(new O(new D("lambda"),new O(e.car.cdr,e.cdr)))));return r}else if(t.macro_expand)return;t.dynamic_env=this,t.env=n;var i=e.cdr.car,a;return C(i)?(i=ie(i,t),a=!0):i instanceof D&&(i=n.get(i)),U("define",e.car,"symbol"),pe(i,function(u){n.__name__===Me.__merge_env__&&(n=n.__parent__),a&&(_e(u)&&Qt(u)||u instanceof Me||Fn(u))&&(u.__name__=e.car.valueOf(),u.__name__ instanceof Q&&(u.__name__=u.__name__.valueOf()));var s;C(e.cdr.cdr)&&Q.isString(e.cdr.cdr.car)&&(s=e.cdr.cdr.car.valueOf()),n.set(e.car,u,s,!0)})}),`(define name expression)
         (define name expression "doc string")
         (define (function-name . args) . body)

         Macro for defining values. It can be used to define variables,
         or functions. If the first argument is list it will create a function
         with name being first element of the list. This form expands to
         \`(define function-name (lambda args body))\``),"set-obj!":F("set-obj!",function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=ye(e);if(Kt(e)||i!=="object"&&i!=="function"){var a=Xt("set-obj!",ke(e),["object","function"]);throw new Error(a)}if(U("set-obj!",t,["string","symbol","number"]),e=nt(e),t=t.valueOf(),arguments.length===2?delete e[t]:gr(e)&&_e(n)?(e[t]=nt(n),e[t][Do]=!0):_e(n)||vo(n)||z(n)?e[t]=n:e[t]=n&&!gr(n)?n.valueOf():n,oo){var u=e[t];Object.defineProperty(e,t,se(se({},r),{},{value:u}))}},`(set-obj! obj key value)
        (set-obj! obj key value props)

        Function set a property of a JavaScript object. props should be a vector of pairs,
        passed to Object.defineProperty.`),"null-environment":F("null-environment",function(){return H.inherit("null")},`(null-environment)

        Returns a clean environment with only the standard library.`),values:F("values",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nn(n)},`(values a1 a2 ...)

        If called with more then one element it will create a special
        Values object that can be used in the call-with-values function.`),"call-with-values":F("call-with-values",function(e,t){U("call-with-values",e,"function",1),U("call-with-values",t,"function",2);var n=e.apply(this);return n instanceof nn?t.apply(this,n.valueOf()):t.call(this,n)},`(call-with-values producer consumer)

        Calls the producer procedure with no arguments, then calls the
        consumer procedure with the returned value as an argument -- unless
        the returned value is a special Values object created by (values), if it is
        the values are unpacked and the consumer is called with multiple arguments.`),"current-environment":F("current-environment",function(){return this.__name__==="__frame__"?this.__parent__:this},`(current-environment)

        Function that returns the current environment (they're first-class objects!)`),"parent.frame":F("parent.frame",function(){return we},`(parent.frame)

        Returns the parent environment if called from inside a function.
        If no parent frame can be found it returns nil.`),eval:F("eval",function(e,t){return t=t||this.get("interaction-environment").call(this),new Promise(function(n,r){var i=ie(e,{env:t,dynamic_env:t,error:r});n(i)})},`(eval expr)
        (eval expr environment)

        Function that evaluates LIPS Scheme code. If the second argument is provided
        it will be the environment that the code is evaluated in.`),lambda:new fe("lambda",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.use_dynamic,r=t.error,i=this,a;C(e.cdr)&&Q.isString(e.cdr.car)&&!z(e.cdr.cdr)&&(a=e.cdr.car.valueOf());function u(){var o=lu(this)?this:{dynamic_env:i},f=o.dynamic_env,c=i.inherit("lambda");f=f.inherit("lambda"),this&&!lu(this)&&(this&&!this.__instance__&&Object.defineProperty(this,"__instance__",{enumerable:!1,get:function(){return!0},set:function(){},configurable:!1}),c.set("this",this));for(var l=arguments.length,h=new Array(l),w=0;w<l;w++)h[w]=arguments[w];if(this instanceof Qr){var B={throwError:!1};c.set("arguments",this.env.get("arguments",B)),c.set("parent.frame",this.env.get("parent.frame",B))}else{var b=h.slice();b.callee=u,b.env=c,c.set("arguments",b)}function g(K,Y){c.__env__[K.__name__]=Y,f.__env__[K.__name__]=Y}var _=e.car,m=0;if(_ instanceof D||!z(_))for(;;){if(!z(_.car)){if(_ instanceof D){var d=Ge(O.fromArray(h.slice(m),!1));g(_,d);break}else if(C(_)){var x=h[m];g(_.car,x)}}if(z(_.cdr))break;m++,_=_.cdr}var S=a?e.cdr.cdr:e.cdr,I=Ni([c,f],S),V={env:c,dynamic_env:f,use_dynamic:n,error:r};return ie(I,V)}var s=C(e.car)?e.car.length():null;return u.__code__=new O(new D("lambda"),e),u[xo]=!0,C(e.car)?F(vf(u,s),a,!0):F(u,a,!0)},`(lambda (a b) body)
        (lambda args body)
        (lambda (a b . rest) body)

        The lambda macro creates a new anonymous function. If the first element of
        the body is a string and there is more elements the string is used as the
        documentation string, that can be read using (help fn).`),macroexpand:F(new fe("macroexpand",fu()),`(macroexpand expr)

         Macro that expand all macros inside and return single expression as output.`),"macroexpand-1":F(new fe("macroexpand-1",fu(!0)),`(macroexpand-1 expr)

         Macro similar to macroexpand but it expand macros only one level
         and return single expression as output.`),"define-macro":F(new fe(lo,function(e,t){var n=t.use_dynamic,r=t.error,i,a,u,s;if(Zc(e)&&(i=e.car.car.__name__,u=e.cdr,s=e.car.cdr),Qc(e)){i=e.car.__name__;var o=e.cdr.car;s=o.cdr.car,u=o.cdr.cdr}if(i&&u&&s){Q.isString(u.car)&&C(u.cdr)&&(a=u.car.valueOf(),u=u.cdr);var f=ef(i,s,u,a,{use_dynamic:n,error:r});this.set(i,f)}else throw new Error("Syntax Error: Invalid `define-macro` expression")}),`(define-macro (name . args) body)

         The meta-macro, that creates new macros. If the return value is a list structure
         it will be evaluated where the macro is invoked from. You can use quasiquote \`
         and unquote , and unquote-splicing ,@ inside to create an expression that will be
         evaluated at runtime. Macros works like this: if you pass any expression to a
         macro the arguments will not be evaluated unless the macro's body explicitly
         calls (eval) on it. Because of this a macro can manipulate the expression
         (arguments) as lists.`),"syntax-rules":new fe("syntax-rules",function(e,t){var n=t.use_dynamic,r=t.error,i=this;function a(o){for(var f=[];!z(o);){var c=o.car;f.push(c.valueOf()),o=o.cdr}return f}function u(o){for(;!z(o);){var f=o.car;if(!(f instanceof D))throw new Error("syntax-rules: wrong identifier");o=o.cdr}}e.car instanceof D?u(e.cdr.car):u(e.car);var s=new Me(function(o,f){var c=f.macro_expand;W(">> SYNTAX"),W(o),W(e);var l=i.inherit("syntax"),h=l,w=this;if(w.__name__===Me.__merge_env__){var B=Object.getOwnPropertySymbols(w.__env__);B.forEach(function(G){w.__parent__.set(G,w.__env__[G])}),w=w.__parent__}var b={env:l,dynamic_env:h,use_dynamic:n,error:r},g,_,m;e.car instanceof D?(g=e.car,m=a(e.cdr.car),_=e.cdr.cdr):(g="...",m=a(e.car),_=e.cdr);try{for(;!z(_);){var d=_.car.car,x=_.car.cdr.car;W("[[[ RULE"),W(d);var S=nf(d,o,m,g,{expansion:this,define:i});if(S){Ii()&&(console.log(JSON.stringify(co(S),!0,2)),console.log("PATTERN: "+d.toString(!0)),console.log("MACRO: "+o.toString(!0)));var I=[],V=af({bindings:S,expr:x,symbols:m,scope:l,lex_scope:w,names:I,ellipsis:g});W("OUPUT>>> ",V),V&&(x=V);var K=w.merge(l,Me.__merge_env__);if(c)return{expr:x,scope:K};var Y=ie(x,se(se({},b),{},{env:K}));return rf(Y,I)}_=_.cdr}}catch(G){var M=`
in macro:
  `.concat(e.toString(!0));throw G.message.includes(M)||(G.message+=M),G}throw new Error("syntax-rules: no matching syntax in macro ".concat(o.toString(!0)))},i);return s.__code__=e,s},`(syntax-rules () (pattern expression) ...)

        Base of hygienic macros, it will return a new syntax expander
        that works like Lisp macros.`),quote:F(new fe("quote",function(e){return Ge(e.car)}),`(quote expression) or 'expression

         Macro that returns a single LIPS expression as data (it won't evaluate the
         argument). It will return a list if put in front of LIPS code.
         And if put in front of a symbol it will return the symbol itself, not the value
         bound to that name.`),"unquote-splicing":F("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code) or ,@code

        Special form used in the quasiquote macro. It evaluates the expression inside and
        splices the list into quasiquote's result. If it is not the last element of the
        expression, the computed value must be a pair.`),unquote:F("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code) or ,code

        Special form used in the quasiquote macro. It evaluates the expression inside and
        substitutes the value into quasiquote's result.`),quasiquote:fe.defmacro("quasiquote",function(e,t){var n=t.use_dynamic,r=t.error,i=this,a=i;function u(_){return C(_)||pt(_)||Array.isArray(_)}function s(_,m){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u;if(C(_)){var x=_.car,S=_.cdr;return d(x)&&(x=m(x)),d(S)&&(S=m(S)),et(x)||et(S)?On([x,S]).then(function(I){var V=ve(I,2),K=V[0],Y=V[1];return new O(K,Y)}):new O(x,S)}return _}function o(_,m){return C(_)?z(m)||_.append(m):_=new O(_,m),_}function f(_){return!!_.filter(function(m){return C(m)&&D.is(m.car,/^(unquote|unquote-splicing)$/)}).length}function c(_,m,d){return _.reduce(function(x,S){if(!C(S))return x.push(S),x;if(D.is(S.car,"unquote-splicing")){var I;if(m+1<d?I=B(S.cdr,m+1,d):I=ie(S.cdr.car,{env:i,use_dynamic:n,dynamic_env:a,error:r}),!C(I))throw new Error("Expecting list ".concat(ke(S)," found"));return x.concat(I.to_array())}return x.push(B(S,m,d)),x},[])}function l(_,m,d){var x={};return m++,Object.keys(_).forEach(function(S){var I=_[S];if(C(I)){if(D.is(I.car,"unquote-splicing"))throw new Error("You can't call `unquote-splicing` inside object");var V;m<d?V=B(I.cdr.car,m,d):V=ie(I.cdr.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),x[S]=V}else x[S]=I}),Object.isFrozen(_)&&Object.freeze(x),x}function h(_,m,d){if(m<d){var x=re;return z(_.cdr)||(x=B(_.cdr,m-1,d)),new O(new O(_.car.car,B(_.car.cdr,m,d)),x)}var S=[];return function I(V){var K=ie(V.car,{env:i,dynamic_env:a,use_dynamic:n,error:r});return S.push(K),C(V.cdr)?I(V.cdr):pe(S,function(Y){if(Y.some(function(y){return!C(y)})){if(C(_.cdr)&&D.is(_.cdr.car,".")&&C(_.cdr.cdr)&&z(_.cdr.cdr.cdr))return _.cdr.cdr.car;if(!(z(_.cdr)||C(_.cdr))){var M="You can't splice atom inside list";throw new Error(M)}if(Y.length>1){var G="You can't splice multiple atoms inside list";throw new Error(G)}if(!(C(_.cdr)&&z(Y[0])))return Y[0]}Y=Y.map(function(y){return w.has(y)?y.clone():(w.add(y),y)});var ce=B(_.cdr,0,1);if(!(z(ce)&&z(Y[0])))return pe(ce,function(y){if(z(Y[0]))return y;if(Y.length===1)return o(Y[0],y);var L=Y.reduce(function(P,R){return o(P,R)});return o(L,y)})})}(_.car.cdr)}var w=new Set;function B(_,m,d){if(C(_)){if(C(_.car)){if(D.is(_.car.car,"unquote-splicing"))return h(_,m+1,d);if(D.is(_.car.car,"unquote")){if(m+2===d&&C(_.car.cdr)&&C(_.car.cdr.car)&&D.is(_.car.cdr.car.car,"unquote-splicing")){var x=_.car.cdr;return new O(new O(new D("unquote"),h(x,m+2,d)),re)}else if(C(_.car.cdr)&&!z(_.car.cdr.cdr))if(C(_.car.cdr.car)){var S=[];return function K(Y){return z(Y)?O.fromArray(S):pe(ie(Y.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),function(M){return S.push(M),K(Y.cdr)})}(_.car.cdr)}else return _.car.cdr}}if(D.is(_.car,"quasiquote")){var I=B(_.cdr,m,d+1);return new O(_.car,I)}if(D.is(_.car,"quote"))return new O(_.car,B(_.cdr,m,d));if(D.is(_.car,"unquote")){if(m++,m<d)return new O(new D("unquote"),B(_.cdr,m,d));if(m>d)throw new Error("You can't call `unquote` outside of quasiquote");if(C(_.cdr)){if(z(_.cdr.cdr))return ie(_.cdr.car,{env:i,dynamic_env:a,error:r});if(C(_.cdr.car)){var V=[];return function K(Y){return z(Y)?O.fromArray(V):pe(ie(Y.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),function(M){return V.push(M),K(Y.cdr)})}(_.cdr)}else return _.cdr}else return _.cdr}return s(_,function(K){return B(K,m,d)})}else{if(pt(_))return l(_,m,d);if(_ instanceof Array)return c(_,m,d)}return _}function b(_){C(_)&&(delete _[wt],_.have_cycles("car")||b(_.car),_.have_cycles("cdr")||b(_.cdr))}if(pt(e.car)&&!f(Object.values(e.car))||Array.isArray(e.car)&&!f(e.car)||C(e.car)&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote"))return Ge(e.car);var g=B(e.car,0,1);return pe(g,function(_){return b(_),Ge(_)})},`(quasiquote list)

        Similar macro to \`quote\` but inside it you can use special expressions (unquote
        x) abbreviated to ,x that will evaluate x and insert its value verbatim or
        (unquote-splicing x) abbreviated to ,@x that will evaluate x and splice the value
        into the result. Best used with macros but it can be used outside.`),clone:F("clone",function(t){return U("clone",t,"pair"),t.clone()},`(clone list)

        Function that returns a clone of the list, that does not share any pairs with the
        original, so the clone can be safely mutated without affecting the original.`),append:F("append",function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r=r.map(function(a){return C(a)?a.clone():a}),(t=H.get("append!")).call.apply(t,[this].concat(be(r)))},`(append item ...)

        Function that creates a new list with each argument appended end-to-end.
        It will always return a new list and not modify its arguments.`),"append!":F("append!",function(){for(var e=H.get("list?"),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce(function(i,a){if(U("append!",i,["nil","pair"]),(C(a)||z(a))&&!e(a))throw new Error("append!: Invalid argument, value is not a list");return z(i)?z(a)?re:a:Kt(a)?i:i.append(a)},re)},`(append! arg1 ...)

        Destructive version of append, it can modify the lists in place. It returns
        a new list where each argument is appended to the end. It may modify
        lists added as arguments.`),reverse:F("reverse",function(t){if(U("reverse",t,["array","pair","nil"]),z(t))return re;if(C(t)){var n=H.get("list->array")(t).reverse();return H.get("array->list")(n)}else{if(Array.isArray(t))return t.reverse();throw new Error(Xt("reverse",ke(t),"array or pair"))}},`(reverse list)

        Function that reverses the list or array. If value is not a list
        or array it will error.`),nth:F("nth",function(t,n){if(U("nth",t,"number"),U("nth",n,["array","pair"]),C(n)){for(var r=n,i=0;i<t;){if(!r.cdr||z(r.cdr)||r.have_cycles("cdr"))return re;r=r.cdr,i++}return r.car}else{if(n instanceof Array)return n[t];throw new Error(Xt("nth",ke(n),"array or pair",2))}},`(nth index obj)

        Function that returns the nth element of the list or array.
        If used with a non-indexable value it will error.`),list:F("list",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reverse().reduce(function(i,a){return new O(a,i)},re)},`(list . args)

        Function that creates a new list out of its arguments.`),substring:F("substring",function(t,n,r){return U("substring",t,"string"),U("substring",n,"number"),U("substring",r,["number","void"]),t.substring(n.valueOf(),r&&r.valueOf())},`(substring string start end)

        Function that returns the slice of the string starting at start and ending
        with end.`),concat:F("concat",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i,a){return U("concat",i,"string",a+1)}),n.join("")},`(concat . strings)

        Function that creates a new string by joining its arguments.`),join:F("join",function(t,n){return U("join",t,"string"),U("join",n,["pair","nil"]),H.get("list->array")(n).join(t)},`(join separator list)

        Function that returns a string by joining elements of the list using separator.`),split:F("split",function(t,n){return U("split",t,["regex","string"]),U("split",n,"string"),H.get("array->list")(n.split(t))},`(split separator string)

        Function that creates a list by splitting string by separator which can
        be a string or regular expression.`),replace:F("replace",function(t,n,r){if(U("replace",t,["regex","string"]),U("replace",n,["string","function"]),U("replace",r,"string"),_e(n)){var i=[];return r.replace(t,function(){i.push(n.apply(void 0,arguments))}),pe(i,function(a){return r.replace(t,function(){return a.shift()})})}return r.replace(t,n)},`(replace pattern replacement string)

        Function that changes pattern to replacement inside string. Pattern can be a
        string or regex and replacement can be function or string. See Javascript
        String.replace().`),match:F("match",function(t,n){U("match",t,["regex","string"]),U("match",n,"string");var r=n.match(t);return r?H.get("array->list")(r):!1},`(match pattern string)

        Function that returns a match object from JavaScript as a list or #f if
        no match.`),search:F("search",function(t,n){return U("search",t,["regex","string"]),U("search",n,"string"),n.search(t)},`(search pattern string)

        Function that returns the first found index of the pattern inside a string.`),repr:F("repr",function(t,n){return He(t,n)},`(repr obj)

        Function that returns a LIPS code representation of the object as a string.`),"escape-regex":F("escape-regex",function(e){return U("escape-regex",e,"string"),Ac(e.valueOf())},`(escape-regex string)

        Function that returns a new string where all special operators used in regex,
        are escaped with backslashes so they can be used in the RegExp constructor
        to match a literal string.`),env:F("env",function(e){e=e||this.env;var t=Object.keys(e.__env__).map(D),n;return t.length?n=O.fromArray(t):n=re,e.__parent__ instanceof xe?H.get("env").call(this,e.__parent__).append(n):n},`(env)
        (env obj)

        Function that returns a list of names (functions, macros and variables)
        that are bound in the current environment or one of its parents.`),new:F("new",function(e){for(var t=nt(e),n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t[Symbol.for("__class__")]?n=Ar(t,i):n=Ar(t,be(i.map(function(u){return Zt(u)}))),n},`(new obj . args)

        Function that creates new JavaScript instance of an object.`),typecheck:F(U,`(typecheck label value type [position])

         Checks the type of value and errors if the type is not one allowed.  Type can be
         string or list of strings. The position optional argument is used to create a
         proper error message for the nth argument of function calls.`),"typecheck-number":F(No,`(typecheck-number label value type [position])

         Function similar to typecheck but checks if the argument is a number
         and specific type of number e.g. complex.`),"unset-special!":F("unset-special!",function(e){U("remove-special!",e,"string"),delete Oe.remove(e.valueOf())},`(unset-special! name)

        Function that removes a special symbol from parser added by \`set-special!\`,
        name must be a string.`),"set-special!":F("set-special!",function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oe.LITERAL;U("set-special!",e,"string",1),U("set-special!",t,"symbol",2),Oe.append(e.valueOf(),t,n)},`(set-special! symbol name [type])

        Add a special symbol to the list of transforming operators by the parser.
        e.g.: \`(add-special! "#" 'x)\` will allow to use \`#(1 2 3)\` and it will be
        transformed into (x (1 2 3)) so you can write x macro that will process
        the list. 3rd argument is optional, and it can be one of two values:
        lips.specials.LITERAL, which is the default behavior, or
        lips.specials.SPLICE which causes the value to be unpacked into the expression.
        This can be used for e.g. to make \`#(1 2 3)\` into (x 1 2 3) that is needed
        by # that defines vectors.`),get:Yn,".":Yn,unbind:F(nt,`(unbind fn)

         Function that removes the weak 'this' binding from a function so you
         can get properties from the actual function object.`),type:F(ke,`(type object)

         Function that returns the type of an object as string.`),debugger:F("debugger",function(){debugger},`(debugger)

        Function that triggers the JavaScript debugger (e.g. the browser devtools)
        using the "debugger;" statement. If a debugger is not running this
        function does nothing.`),in:F("in",function(e,t){return(e instanceof D||e instanceof Q||e instanceof p)&&(e=e.valueOf()),e in Zt(t)},`(in key value)

        Function that uses the Javascript "in" operator to check if key is
        a valid property in the value.`),"instance?":F("instance?",function(e){return mo(e)},`(instance? obj)

        Checks if object is an instance, created with a new operator`),instanceof:F("instanceof",function(e,t){return t instanceof nt(e)},`(instanceof type obj)

        Predicate that tests if the obj is an instance of type.`),"prototype?":F("prototype?",gr,`(prototype? obj)

         Predicate that tests if value is a valid JavaScript prototype,
         i.e. calling (new) with it will not throw '<x> is not a constructor'.`),"macro?":F("macro?",function(e){return e instanceof fe},`(macro? expression)

        Predicate that tests if value is a macro.`),"continuation?":F("continuation?",la,`(continuation? expression)

         Predicate that tests if value is a callable continuation.`),"function?":F("function?",_e,`(function? expression)

         Predicate that tests if value is a callable function.`),"real?":F("real?",function(e){return ke(e)!=="number"?!1:e instanceof p?e.isFloat():p.isFloat(e)},`(real? number)

        Predicate that tests if value is a real number (not complex).`),"number?":F("number?",function(e){return Number.isNaN(e)||p.isNumber(e)},`(number? expression)

        Predicate that tests if value is a number or NaN value.`),"string?":F("string?",function(e){return Q.isString(e)},`(string? expression)

        Predicate that tests if value is a string.`),"pair?":F("pair?",C,`(pair? expression)

         Predicate that tests if value is a pair or list structure.`),"regex?":F("regex?",function(e){return e instanceof RegExp},`(regex? expression)

        Predicate that tests if value is a regular expression.`),"null?":F("null?",function(e){return Kt(e)},`(null? expression)

        Predicate that tests if value is null-ish (i.e. undefined, nil, or
        Javascript null).`),"boolean?":F("boolean?",function(e){return typeof e=="boolean"},`(boolean? expression)

        Predicate that tests if value is a boolean (#t or #f).`),"symbol?":F("symbol?",function(e){return e instanceof D},`(symbol? expression)

        Predicate that tests if value is a LIPS symbol.`),"array?":F("array?",function(e){return e instanceof Array},`(array? expression)

        Predicate that tests if value is an array.`),"object?":F("object?",function(e){return!z(e)&&e!==null&&!(e instanceof he)&&!(e instanceof RegExp)&&!(e instanceof Q)&&!C(e)&&!(e instanceof p)&&ye(e)==="object"&&!(e instanceof Array)},`(object? expression)

        Predicate that tests if value is an plain object (not another LIPS type).`),flatten:F("flatten",function(t){return U("flatten",t,"pair"),t.flatten()},`(flatten list)

        Returns a shallow list from tree structure (pairs).`),"vector-append":F("vector-append",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return[];sn("vector-append",t,"array");var r=t[0],i=t.slice(1);return r.concat.apply(r,be(i))},`(vector-append v1 v2 ...)

         Returns new vector by combining it's arguments that should be vectors.`),"array->list":F("array->list",function(e){return U("array->list",e,"array"),O.fromArray(e)},`(array->list array)

        Function that converts a JavaScript array to a LIPS cons list.`),"tree->array":F("tree->array",su("tree->array",!0),`(tree->array list)

         Function that converts a LIPS cons tree structure into a JavaScript array.`),"list->array":F("list->array",su("list->array"),`(list->array list)

         Function that converts a LIPS list into a JavaScript array.`),apply:F("apply",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U("apply",t,"function",1);var a=r.pop();return U("apply",a,["pair","nil"],r.length+2),r=r.concat(H.get("list->array").call(this,a)),t.apply(this,Po(t,r))},`(apply fn list)

        Function that calls fn with the list of arguments.`),length:F("length",function(t){if(!t||z(t))return 0;if(C(t))return t.length();if("length"in t)return t.length},`(length expression)

        Function that returns the length of the object. The object can be a LIPS
        list or any object that has a "length" property. Returns undefined if the
        length could not be found.`),"string->number":F("string->number",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;if(U("string->number",e,"string",1),U("string->number",t,"number",2),e=e.valueOf(),t=t.valueOf(),e.match(Ku)||e.match(ta))return Ju(e,t);if(e.match(hc)||e.match(ea))return Qu(e,t);var n=t===10&&!e.match(/e/i)||t===16;return e.match(Gu)&&n||e.match(na)?Xu(e,t):e.match(zr)?ra(e):!1},`(string->number number [radix])

        Function that parses a string into a number.`),try:F(new fe("try",function(e,t){var n=this,r=t.use_dynamic;return t.error,new Promise(function(i,a){var u,s;if(D.is(e.cdr.car.car,"catch")?(u=e.cdr.car,C(e.cdr.cdr)&&D.is(e.cdr.cdr.car.car,"finally")&&(s=e.cdr.cdr.car)):D.is(e.cdr.car.car,"finally")&&(s=e.cdr.car),!(s||u))throw new Error("try: invalid syntax");function o(h){throw i(h),new Wn("[CATCH]")}var f=function(w,B){B(w)};s&&(f=function(w,B){f=a,c.error=function(b){throw b},pe(ie(new O(new D("begin"),s.cdr),c),function(){B(w)})});var c={env:n,use_dynamic:r,dynamic_env:n,error:function(w){if(w instanceof Wn)throw w;if(u){var B=n.inherit("try"),b=u.cdr.car.car;if(!(b instanceof D))throw new Error("try: invalid syntax: catch require variable name");B.set(b,w);var g,_={env:B,use_dynamic:r,dynamic_env:n,error:function(x){throw g=!0,a(x),new Wn("[CATCH]")}},m=ie(new O(new D("begin"),u.cdr.cdr),_);pe(m,function(x){g||f(x,o)})}else f(void 0,function(){a(w)})}},l=ie(e.car,c);pe(l,function(h){f(h,i)},c.error)})}),`(try expr (catch (e) code))
         (try expr (catch (e) code) (finally code))
         (try expr (finally code))

         Macro that executes expr and catches any exceptions thrown. If catch is provided
         it's executed when an error is thrown. If finally is provided it's always
         executed at the end.`),raise:F("raise",function(e){throw e},`(raise obj)

        Throws the object verbatim (no wrapping an a new Error).`),throw:F("throw",function(e){throw new Error(e)},`(throw string)

        Throws a new exception.`),find:F("find",function e(t,n){if(U("find",n,["pair","nil"]),Kt(n))return!1;var r=iu("find",t);return pe(r(n.car),function(i){return i&&!z(i)?n.car:e(t,n.cdr)})},`(find fn list)
        (find regex list)
        (find atom list)

        Higher-order function that finds the first value for which fn return true.
        If called with a regex or any atom it will create a matcher function.`),"for-each":F("for-each",function(e){var t;U("for-each",e,"function");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach(function(u,s){U("for-each",u,["pair","nil"],s+1)});var a=(t=H.get("map")).call.apply(t,[this,e].concat(r));if(et(a))return a.then(function(){})},`(for-each fn . lists)

        Higher-order function that calls function \`fn\` on each
        value of the argument. If you provide more than one list
        it will take each value from each list and call \`fn\` function
        with that many arguments as number of list arguments.`),map:F("map",function e(t){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];U("map",t,"function");var u=H.get("list?");if(i.forEach(function(h,w){if(U("map",h,["pair","nil"],w+1),C(h)&&!u.call(n,h))throw new Error("map: argument ".concat(w+1," is not a list"))}),i.length===0||i.some(z))return re;var s=i.map(function(h){return h.car}),o=this.env,f=this.dynamic_env,c=this.use_dynamic,l=En(t,s,{env:o,dynamic_env:f,use_dynamic:c});return pe(l,function(h){return pe(e.call.apply(e,[n,t].concat(be(i.map(function(w){return w.cdr})))),function(w){return new O(h,w)})})},`(map fn . lists)

        Higher-order function that calls function \`fn\` with each
        value of the list. If you provide more then one list as argument
        it will take each value from each list and call \`fn\` function
        with that many argument as number of list arguments. The return
        values of the fn calls are accumulated in a result list and
        returned by map.`),"list?":F("list?",function(e){for(var t=e;;){if(z(t))return!0;if(!C(t)||t.have_cycles("cdr"))return!1;t=t.cdr}},`(list? obj)

        Predicate that tests if value is a proper linked list structure.
        The car of each pair can be any value. It returns false on cyclic lists."`),fold:F("fold",hu("fold",function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];if(U("fold",t,"function"),i.forEach(function(s,o){U("fold",s,["pair","nil"],o+1)}),i.some(z))return n;var u=e.call.apply(e,[this,t,n].concat(be(i.map(function(s){return s.cdr}))));return pe(u,function(s){return t.apply(void 0,be(i.map(function(o){return o.car})).concat([s]))})}),`(fold fn init . lists)

         Function fold is left-to-right reversal of reduce. It call \`fn\`
         on each pair of elements of the list and returns a single value.
         e.g. it computes (fn 'a 'x (fn 'b 'y (fn 'c 'z 'foo)))
         for: (fold fn 'foo '(a b c) '(x y z))`),pluck:F("pluck",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){if(n=n.map(function(f){return f instanceof D?f.__name__:f}),n.length===0)return re;if(n.length===1){var a=n,u=ve(a,1),s=u[0];return i[s]}var o={};return n.forEach(function(f){o[f]=i[f]}),o}},`(pluck . strings)

        If called with a single string it will return a function that when
        called with an object will return that key from the object.
        If called with more then one string the returned function will
        create a new object by copying all properties from the given object.`),reduce:F("reduce",hu("reduce",function(e,t,n){for(var r=this,i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return U("reduce",t,"function"),a.forEach(function(s,o){U("reduce",s,["pair","nil"],o+1)}),a.some(z)?n:pe(t.apply(void 0,be(a.map(function(s){return s.car})).concat([n])),function(s){return e.call.apply(e,[r,t,s].concat(be(a.map(function(o){return o.cdr}))))})}),`(reduce fn init list . lists)

         Higher-order function that takes each element of the list and calls
         the fn with result of previous call or init and the next element
         of the list until each element is processed, and returns a single value
         as result of last call to \`fn\` function.
         e.g. it computes (fn 'c 'z (fn 'b 'y (fn 'a 'x 'foo)))
         for: (reduce fn 'foo '(a b c) '(x y z))`),filter:F("filter",function(t,n){U("filter",t,["regex","function"]),U("filter",n,["pair","nil"]);var r=H.get("list->array")(n),i=[],a=iu("filter",t);return function u(s){function o(c){return c&&!z(c)&&i.push(f),u(++s)}if(s===r.length)return O.fromArray(i);var f=r[s];return pe(a(f),o)}(0)},`(filter fn list)
        (filter regex list)

        Higher-order function that calls \`fn\` for each element of the list
        and return a new list for only those elements for which fn returns
        a truthy value. If called with a regex it will create a matcher function.`),compose:F(Ao,`(compose . fns)

         Higher-order function that creates a new function that applies all functions
         from right to left and returns the last value. Reverse of pipe.
         e.g.:
         ((compose (curry + 2) (curry * 3)) 10) ==> (+ 2 (* 3 10)) ==> 32`),pipe:F(Eo,`(pipe . fns)

         Higher-order function that creates a new function that applies all functions
         from left to right and returns the last value. Reverse of compose.
         e.g.:
         ((pipe (curry + 2) (curry * 3)) 10) ==> (* 3 (+ 2 10)) ==> 36`),curry:F(Gr,`(curry fn . args)

         Higher-order function that creates a curried version of the function.
         The result function will have partially applied arguments and it
         will keep returning one-argument functions until all arguments are provided,
         then it calls the original function with the accumulated arguments.

         e.g.:
         (define (add a b c d) (+ a b c d))
         (define add1 (curry add 1))
         (define add12 (add 2))
         (display (add12 3 4))`),gcd:F("gcd",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sn("lcm",n,"number"),n.reduce(function(i,a){return i.gcd(a)})},`(gcd n1 n2 ...)

        Function that returns the greatest common divisor of the arguments.`),lcm:F("lcm",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];sn("lcm",n,"number");for(var i=n.length,a=vi(n[0]),u=1;u<i;u++){for(var s=vi(n[u]),o=a;a&&s;)a>s?a%=s:s%=a;a=vi(o*n[u])/(a+s)}return p(a)},`(lcm n1 n2 ...)

        Function that returns the least common multiple of the arguments.`),"odd?":F("odd?",bn(function(e){return p(e).isOdd()}),`(odd? number)

         Checks if number is odd.`),"even?":F("even?",bn(function(e){return p(e).isEven()}),`(even? number)

         Checks if number is even.`),"*":F("*",du(function(e,t){return p(e).mul(t)},p(1)),`(* . numbers)

        Multiplies all numbers passed as arguments. If single value is passed
        it will return that value.`),"+":F("+",du(function(e,t){return p(e).add(t)},p(0)),`(+ . numbers)

        Sums all numbers passed as arguments. If single value is passed it will
        return that value.`),"-":F("-",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0)throw new Error("-: procedure require at least one argument");if(sn("-",t,"number"),t.length===1)return p(t[0]).sub();if(t.length)return t.reduce(wr(function(r,i){return p(r).sub(i)}))},`(- n1 n2 ...)
        (- n)

        Subtracts n2 and subsequent numbers from n1. If only one argument is passed
        it will negate the value.`),"/":F("/",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0)throw new Error("/: procedure require at least one argument");return sn("/",t,"number"),t.length===1?p(1).div(t[0]):t.reduce(wr(function(r,i){return p(r).div(i)}))},`(/ n1 n2 ...)
        (/ n)

        Divides n1 by n2 and subsequent arguments one by one. If single argument
        is passed it will calculate (/ 1 n).`),abs:F("abs",bn(function(e){return p(e).abs()}),`(abs number)

         Function that returns the absolute value (magnitude) of number.`),truncate:F("truncate",function(e){return U("truncate",e,"number"),p.isFloat(e)?(e instanceof p&&(e=e.valueOf()),ue(Xc(e))):e},`(truncate n)

        Function that returns the integer part (floor) of a real number.`),sqrt:F("sqrt",bn(function(e){return p(e).sqrt()}),`(sqrt number)

         Function that returns the square root of the number.`),"**":F("**",wr(function(e,t){if(e=p(e),t=p(t),p.isInteger(t)){var n=t.cmp(0)===-1;if(n&&(t=t.sub()),p.isRational(e)){if(n){var r=e.__denom__.pow(t);if(e.__num__.cmp(1)===0)return r;var i=e.__num__.pow(t);return le({num:r,denom:i})}return le({num:e.__num__.pow(t),denom:e.__denom__.pow(t)})}if(n)return le({num:1,denom:e.pow(t)})}if(p.isRational(t)&&e.cmp(0)===-1){var a=t.__denom__,u=t.__num__;if(a.cmp(2)===0){var s=e.abs().pow(le({num:1,denom:2})),o=e.coerce(s),f=ve(o,2);if(s=f[1],t.cmp(0)===1)return oe({re:p(0),im:s});if(u.cmp(0)===-1)return oe({re:p(0),im:le({num:-1,denom:s})})}var c=t.valueOf(),l=c*Math.PI,h=e.abs().pow(c),w=h.mul(Math.cos(l)),B=h.mul(Math.sin(l));return oe({re:w,im:B})}var b=e.coerce(t),g=ve(b,2);return e=g[0],t=g[1],e.pow(t)}),`(** a b)

         Function that calculates number a to to the power of b.`),"1+":F("1+",bn(function(e){return p(e).add(1)}),`(1+ number)

         Function that adds 1 to the number and return result.`),"1-":F(bn(function(e){return p(e).sub(1)}),`(1- number)

         Function that subtracts 1 from the number and return result.`),"%":F("%",function(e,t){return sn("%",[e,t],"number"),p(e).rem(t)},`(% n1 n2)

        Function returns the remainder of n1/n2 (modulo).`),"==":F("==",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sn("==",t,"number"),$n(function(r,i){return p(r).cmp(i)===0},t)},`(== x1 x2 ...)}

        Function that compares its numerical arguments and checks if they are
        all equal.`),">":F(">",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lr(">",t,["bigint","float","rational"]),$n(function(r,i){return p(r).cmp(i)===1},t)},`(> x1 x2 x3 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically decreasing, i.e. x1 > x2 and x2 > x3 and so on.`),"<":F("<",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lr("<",t,["bigint","float","rational"]),$n(function(r,i){return p(r).cmp(i)===-1},t)},`(< x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically increasing, i.e. x1 < x2 and x2 < x3 and so on.`),"<=":F("<=",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lr("<=",t,["bigint","float","rational"]),$n(function(r,i){return[0,-1].includes(p(r).cmp(i))},t)},`(<= x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically nondecreasing, i.e. x1 <= x2 and x2 <= x3 and so on.`),">=":F(">=",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lr(">=",t,["bigint","float","rational"]),$n(function(r,i){return[0,1].includes(p(r).cmp(i))},t)},`(>= x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically nonincreasing, i.e. x1 >= x2 and x2 >= x3 and so on.`),"eq?":F("eq?",ca,`(eq? a b)

         Function that compares two values if they are identical.`),or:F(new fe("or",function(e,t){var n=t.use_dynamic,r=t.error,i=H.get("list->array")(e),a=this,u=a;if(!i.length)return!1;var s;return function o(){function f(h){return s=h,Un(s)?o():s}if(i.length){var c=i.shift(),l=ie(c,{env:a,dynamic_env:u,use_dynamic:n,error:r});return pe(l,f)}else return Un(s)?!1:s}()}),`(or . expressions)

         Macro that executes the values one by one and returns the first that is
         a truthy value. If there are no expressions that evaluate to true it
         returns false.`),and:F(new fe("and",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.use_dynamic,r=t.error,i=H.get("list->array")(e),a=this,u=a;if(!i.length)return!0;var s,o={env:a,dynamic_env:u,use_dynamic:n,error:r};return function f(){function c(h){return s=h,Un(s)?s:f()}if(i.length){var l=i.shift();return pe(ie(l,o),c)}else return Un(s)?!1:s}()}),`(and . expressions)

         Macro that evaluates each expression in sequence and if any value returns false
         it will stop and return false. If each value returns true it will return the
         last value. If it's called without arguments it will return true.`),"|":F("|",function(e,t){return p(e).or(t)},`(| a b)

        Function that calculates the bitwise or operation.`),"&":F("&",function(e,t){return p(e).and(t)},`(& a b)

        Function that calculates the bitwise and operation.`),"~":F("~",function(e){return p(e).neg()},`(~ number)

        Function that calculates the bitwise inverse (flip all the bits).`),">>":F(">>",function(e,t){return p(e).shr(t)},`(>> a b)

        Function that right shifts the value a by value b bits.`),"<<":F("<<",function(e,t){return p(e).shl(t)},`(<< a b)

        Function that left shifts the value a by value b bits.`),not:F("not",function(t){return!t},`(not object)

        Function that returns the Boolean negation of its argument.`)},void 0,"global"),we=H.inherit("user-env");Bo(we,Oo);H.doc("**interaction-environment**",`**interaction-environment**

    Internal dynamic, global variable used to find interpreter environment.
    It's used so the read and write functions can locate **internal-env**
    that contains the references to stdin, stdout and stderr.`);(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var n=e[t]?e[t]:t;H.set(n,F(n,function(r){if(U(n,r,"number"),r instanceof p)return r[t]()},"(".concat(n,` number)

            Function that calculates the `).concat(n," of a number.")))})})();Ff(["d","a"],2,5).forEach(function(e){var t=e.split(""),n=t.slice().reverse(),r=t.map(function(a){return"(c".concat(a,"r")}).join(" ")+" arg"+")".repeat(t.length),i="c"+e+"r";H.set(i,F(i,function(a){return n.reduce(function(u,s){return U(i,u,"pair"),s==="a"?u.car:u.cdr},a)},"(".concat(i,` arg)

        Function that calculates `).concat(r)))});jo=function(){};va()?Ui=Sf():(Ui=Promise.resolve(),typeof window<"u"&&window===jt?(H.set("window",window),H.set("global",void 0),H.set("self",window)):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&(H.set("self",self),H.set("window",void 0),H.set("global",void 0)));ke=Of(ke);_r=new WeakMap,Xr=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(xt(this,e),Jt(this,"__value__",void 0),Jt(this,"__fn__",void 0),tc(this,_r,void 0),this.__value__=t,n){if(!_e(n))throw new Error("Section argument to Parameter need to be function "+"".concat(ke(n)," given"));this.__fn__=n}r&&Ja(_r,this,r)}return Et(e,[{key:"__name__",get:function(){return rc(_r,this)},set:function(n){Ja(_r,this,n),this.__fn__&&(this.__fn__.__name__="fn-".concat(n))}},{key:"invoke",value:function(){return _e(this.__fn__)?this.__fn__(this.__value__):this.__value__}},{key:"inherit",value:function(n){return new e(n,this.__fn__,this.__name__)}}])}(),Qr=function(){function e(t){xt(this,e),Jt(this,"env",void 0),Jt(this,"dynamic_env",void 0),Jt(this,"use_dynamic",void 0),Object.assign(this,t)}return Et(e,[{key:"__name__",get:function(){return this.env.__name__}},{key:"__parent__",get:function(){return this.env.__parent__}},{key:"get",value:function(){var n;return(n=this.env).get.apply(n,arguments)}}])}();Lo=function(){function e(t){xt(this,e),Jt(this,"__value__",void 0),this.__value__=t}return Et(e,[{key:"invoke",value:function(){if(this.__value__===null)throw new Error("Continuations are not implemented yet")}}])}();Pf=To(function(e){return e}),rn=To(function(e,t){return t});$r=Mf();Ur={pair:function(t){var n=ve(t,2),r=n[0],i=n[1];return O(r,i)},number:function(t){return Q.isString(t)?p([t,10]):p(t)},regex:function(t){var n=ve(t,2),r=n[0],i=n[1];return new RegExp(r,i)},nil:function(){return re},symbol:function(t){if(Q.isString(t))return D(t);if(Array.isArray(t))return D(Symbol.for(t[0]))},string:Q,character:he},Mo=Object.keys(Ur),Ro={};for(hr=0,Di=Object.entries(Mo);hr<Di.length;hr++)xi=ve(Di[hr],2),Du=xi[0],xu=xi[1],Ro[xu]=+Du;Uo=function(){var e={pair:O,symbol:D,number:p,string:Q,character:he,nil:re.constructor,regex:RegExp};function t(l,h){return{deserialize:h,Class:l}}for(var n=new Ir,r={},i=0,a=Object.entries(Ur);i<a.length;i++){var u=ve(a[i],2),s=u[0],o=u[1],f=e[s];r[s]=t(f,o)}var c=43311;return Object.keys(r).forEach(function(l){var h=r[l];if(typeof h=="function"){var w=h;Ya({Class:w,tag:c,encode:function(_,m){m(_.serialize())},decode:function(_){return new w(_)}})}else{var B=h.deserialize,b=h.Class;Ya({Class:b,tag:c,encode:function(_,m){if(_ instanceof RegExp)return m([_.source,_.flags]);m(_.serialize())},decode:function(_){return B(_)}})}c++}),n}();qo=7;Fu=typeof window<"u"&&window.document&&document.currentScript;typeof window<"u"&&oc(window,Wf);Yf=function(){var e=Q("Sat, 10 May 2025 19:46:53 +0000").valueOf(),t=e==="{{DATE}}"?new Date:new Date(e),n=function(s){return s.toString().padStart(2,"0")},r=t.getFullYear(),i=[r,n(t.getMonth()+1),n(t.getDate())].join("-"),a=`
  __ __                          __
 / / \\ \\       _    _  ___  ___  \\ \\
| |   \\ \\     | |  | || . \\/ __>  | |
| |    > \\    | |_ | ||  _/\\__ \\  | |
| |   / ^ \\   |___||_||_|  <___/  | |
 \\_\\ /_/ \\_\\                     /_/

LIPS Interpreter DEV (`.concat(i,`) <https://lips.js.org>
Copyright (c) 2018-`).concat(r,` Jakub T. Jankiewicz

Type (env) to see environment with functions macros and variables. You can also
use (help name) to display help for specific function or macro, (apropos name)
to display list of matched names in environment and (dir object) to list
properties of an object.
`).replace(/^.*\n/,"");return a}();Z(Bn,"__class__","ahead");Z(O,"__class__","pair");Z(Mt,"__class__","nil");Z(At,"__class__","pattern");Z(qe,"__class__","formatter");Z(fe,"__class__","macro");Z(Me,"__class__","syntax");Z(Me.Parameter,"__class__","syntax-parameter");Z(xe,"__class__","environment");Z(Je,"__class__","input-port");Z(We,"__class__","output-port");Z(Mr,"__class__","output-port");Z(Pt,"__class__","output-string-port");Z(ht,"__class__","input-string-port");Z(tn,"__class__","input-file-port");Z(ct,"__class__","output-file-port");Z(Qn,"__class__","lips-error");[p,oe,le,ue,Ee].forEach(function(e){Z(e,"__class__","number")});Z(he,"__class__","character");Z(D,"__class__","symbol");Z(Q,"__class__","string");Z(Pe,"__class__","promise");Z(Xr,"__class__","parameter");Gf="DEV",Kf="Sat, 10 May 2025 19:46:53 +0000",ya=Ao(Tc,oa),Dt={version:Gf,banner:Yf,date:Kf,exec:rn,parse:ya,tokenize:Sn,evaluate:ie,compile:Pf,serialize:Uf,unserialize:$o,box:ha,unbox:Zt,serialize_bin:Hf,unserialize_bin:zo,bootstrap:kn,Environment:xe,env:we,Worker:Rf,Interpreter:dn,balanced_parenthesis:Er,balancedParenthesis:Er,balanced:Er,Macro:fe,Syntax:Me,Pair:O,Values:nn,QuotedPromise:Pe,Error:Qn,quote:Ge,InputPort:Je,OutputPort:We,BufferedOutputPort:Mr,InputFilePort:tn,OutputFilePort:ct,InputStringPort:ht,OutputStringPort:Pt,InputByteVectorPort:tt,OutputByteVectorPort:ft,InputBinaryFilePort:hn,OutputBinaryFilePort:Lt,set_fs:Af,Formatter:qe,Parser:Nt,Lexer:$,specials:Oe,repr:Hn,nil:re,eof:Be,LSymbol:D,LNumber:p,LFloat:ue,LComplex:oe,LRational:le,LBigInteger:Ee,LCharacter:he,LString:Q,Parameter:Xr,rationalize:Df};H.set("lips",Dt)});var Zr,nr=Ye(async()=>{"use strict";ga();ga();await kn("https://cdn.jsdelivr.net/npm/@jcubic/lips/dist/std.xcb");Oe.__list__={};Zr=class extends Nt{match_datum_label(t){return null}match_datum_ref(t){return null}}});var ge,$e,lt=Ye(()=>{"use strict";ge=class{#e;#t;constructor(t,n){this.#e=t,this.#t=n}get name(){return this.#e}get type(){return this.#t}},$e=class extends ge{}});var ni,Nn,wa=Ye(()=>{"use strict";ni=class{r;g;b;constructor(t,n,r){this.r=t,this.g=n,this.b=r}toString(){return`Color(${this.r}, ${this.g}, ${this.b})`}},Nn=class{x;y;constructor(t,n){this.x=t,this.y=n}toString(){return`Point(${this.x}, ${this.y})`}}});function ri(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}function Da(e){return e==null?"signal":typeof e!="object"?typeof e:e instanceof AudioNode?"audio":e instanceof ni?"color":e instanceof Nn?"point":e instanceof p?"number":e instanceof Q?"string":e instanceof D?"symbol":"unknown"}function xa(e,t){return t==="any"?!0:Array.isArray(t)?t.some(n=>xa(e,n)):Da(e)===t}function Ea(e,t){let n=e.type,r=t.type;var i=!1;return r==="any"?i=!0:Array.isArray(r)?Array.isArray(n)?i=n.every(a=>r.includes(a)):i=r.includes(n):Array.isArray(n)?i=!1:i=n===r,i?e instanceof $e&&!(t instanceof $e)?"selectIn":t instanceof $e&&!(e instanceof $e)?"selectOut":"yes":"no"}function Aa(e,t){let n=t instanceof an&&t.line!==void 0&&t.col!==void 0?`(${t.line}:${t.col}) `:"";return Qe("p",{class:"error"},e,n,t.message)}function Rt(e,t,n=1){let{__line__:r,__col__:i}=t,a=t.valueOf().length,u=r!==void 0?r+1:void 0;return console.trace("Error is at line",u,"col",i,"length",a),new an(e,n,u,i,a)}function $t(e,t,n=1){throw Rt(e,t,n)}async function Yo(e){let t=new Zr({env:we,meta:!0});return t.prepare(e),await ya(t)}function Go(e){let t=Math.max(...e.map(r=>r.severity??0));return e.filter(r=>(r.severity??0)===t)}function ii(){return window.self!==window.top}var rr,an,dt,mn=Ye(async()=>{"use strict";vn();await nr();wa();lt();rr=we.get("list->array");an=class extends Error{line;col;len;severity;constructor(t,n,r,i,a=1){super(t),this.severity=n,this.name=this.constructor.name,this.line=r,this.col=i,this.len=a}},dt=class extends Error{subErrors;constructor(t){super(),this.subErrors=t}}});var fl={};var Qo=Ye(()=>{"use strict";lt();Ft();Le({id:"value",generics:{T:0},argTypes:["any"],doc:"Emits the same value every time when it is updated by the trigger input.",inputs:[new ge("trigger","signal")],outputs:[new ge("value","T")],setup({node:e,params:t}){e.state.value=t[0]},update({node:e}){e.output("value",e.state.value)}});Le({id:"edges",argTypes:[],doc:"Emits a signal on :rising when :value changes from false to true, and a signal on :falling when :value changes from true to false.",inputs:[new ge("value","boolean")],outputs:[new ge("rising","signal"),new ge("falling","signal")],setup({node:e}){e.state.oldState=!1},update({node:e,changes:t}){let n=e.state.oldState,r=t.value;e.state.oldState=r,n!==r&&e.output(r?"rising":"falling")}})});var ll={};var Zo=Ye(()=>{"use strict";vn();lt();Ft();Le({id:"button",inputs:[],argTypes:["string"],outputs:[new ge("pressed","boolean"),new ge("hovering","boolean")],doc:"Creates a HTML <code>&lt;button></code> with the argument and outputs :pressed and :hovering states when the user interacts with it.",setup({app:e,node:t,params:n}){let r=Qe("button",{},n[0]);e.addUI(r),r.addEventListener("pointerdown",()=>{t.output("pressed",!0)}),r.addEventListener("pointerup",()=>{t.output("pressed",!1)}),r.addEventListener("mouseover",()=>{t.output("hovering",!0)}),r.addEventListener("mouseout",()=>{t.output("hovering",!1)}),t.output("hovering",!1),t.output("pressed",!1)}})});var pl={};var es=Ye(()=>{"use strict";lt();Ft();Le({id:"log",inputs:[new ge("value","any")],outputs:[],argTypes:["string"],doc:"Logs the value with a message whenever it updates.",setup({node:e,params:t}){e.state.message=t[0]??""},update({app:e,node:t,changes:n}){n.value===void 0&&(n.value=""),e.log(t.state.message+n.value)}})});var _l={};var ts=Ye(()=>{"use strict";lt();Ft();Le({id:"string->number",argTypes:[],inputs:[new ge("string","string")],outputs:[new ge("number","number")],doc:"Receives a string representing a number, parses it as a number, and outputs that.",update({node:e,changes:t}){e.output("number",parseFloat(t.string))}});Le({id:"to-string",argTypes:[],inputs:[new ge("what","any")],outputs:[new ge("stringified","string")],doc:"Receives any object and converts it to a string using the Javascript <code>toString()</code> method.",update({node:e,changes:t}){e.output("stringified",t.what.toString())}})});var hl={};var ns=Ye(()=>{"use strict";lt();Ft();Le({id:"random",argTypes:[],inputs:[new ge("randomize","signal")],outputs:[new ge("value","number")],doc:"Outputs a random value in the range [0, 1) when updated.",update({node:e}){e.output("value",Math.random())}})});var Pn,Fa=Ye(()=>{"use strict";Pn=class{#e=!1;doc;initializer;constructor(t,n){Object.assign(this,n),this.initializer=t}async init(t){this.#e||(await this.initializer(t),this.#e=!0)}}});var dl={};var rs=Ye(()=>{"use strict";Fa();lt();Ft();wa();oi("geolocation",new Pn(async()=>{let e=await navigator.permissions.query({name:"geolocation"});if(e.name==="denied")throw new RangeError("This app need sto know your geolocation, but you denied Lynx permission to access it. Check your browser settings and try again.");e.name=="prompt"&&navigator.geolocation.getCurrentPosition(()=>{},()=>{},{enableHighAccuracy:!0})},{doc:"Accesses the device's gurrent GPS location and makes position updates available to the app. If you haven't already granted permission, you will be prompted to let Lynx access your geolocation when the app starts.",watch(e,t){navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0}),navigator.geolocation.watchPosition(e,t,{enableHighAccuracy:!0})}}));Le({id:"gps",inputs:[],features:["geolocation"],argTypes:[],outputs:[new ge("pos","point"),new ge("altitude","number"),new ge("heading","number"),new ge("speed","number")],doc:`Watches your device's GPS position and outputs position and movement data.
    <br>The point that <code>gps</code> sends for :pos is of the form <code>{x: longitude, y: latitude}</code>.
    <br>Altitude, heading, and speed may not be available depending on your device.`,setup({app:e,node:t,features:n}){n.geolocation.watch(({coords:r})=>{t.output("pos",new Nn(r.longitude,r.latitude)),r.altitude!==null&&t.output("altitude",r.altitude),r.heading!==null&&t.output("heading",r.heading),r.speed!==null&&t.output("speed",r.speed)},r=>{switch(console.error(r),r.code){case GeolocationPositionError.PERMISSION_DENIED:e.error("Permission denied when getting geolocation data.");break;case GeolocationPositionError.POSITION_UNAVAILABLE:e.warn("Geolocation is not available");break;case GeolocationPositionError.TIMEOUT:e.warn("Timed out trying to get geolocation");break}})}})});var ml={};var is=Ye(async()=>{"use strict";vn();Fa();lt();await mn();await nr();Ft();oi("unsafe-code",new Pn(async e=>{let t=Qe("button",{},"Yes, run"),n=Qe("div",{},"This flow runs arbitrary code. Please confirm you want to run it: ",t);e.addConnect(n),await new Promise(r=>{t.addEventListener("click",()=>r())})},{doc:"Used by nodes that have access to all of Javascript, meaning that they could do just about anything, including executing malicious code. This feature forces the user to confirm they want to run the flow first before anything happens."}));Le({id:"fn",inputs:[new $e("inputs","any")],outputs:[new $e("outputs","any")],features:["unsafe-code"],doc:"Transforms the input and output values using a Scheme function. The value of the inputs is available in the variable <code>$inputs</code> (JS <code>undefined</code>), and the node object is available in the variable <code>$node</code>. Whatever array the function returns will be passed to the output. If <code>#&lt;void></code> is returned, the node will not update its outputs.",async setup({node:e,params:t,features:n}){let r=we.get("vector->list");console.log(n["unsafe-code"]);let i=(s,o)=>new O(s,o),a=s=>new D(s),u=i(a("lambda"),i(i(a("$inputs"),i(a("$node"),re)),r(t)));console.log(u.toString()),e.state.func=(await rn(u))[0]},async update({node:e,app:t}){let n=we.get("vector->list");var r;try{r=await e.state.func(n(e.get("inputs",[])),e)}catch(i){t.error(i),console.error(i);return}r instanceof O&&(r=rr(r)),r!==void 0&&e.output("outputs",r)}})});var vl={};var as=Ye(()=>{"use strict";lt();Ft();Le({id:"clock",argTypes:["number"],inputs:[],outputs:[new ge("clock","signal")],doc:"Updates connected nodes every N milliseconds.",setup({node:e,params:t}){setInterval(()=>e.output("clock"),t[0].valueOf())}});Le({id:"clock",argTypes:["number"],inputs:[new ge("enabled","boolean")],outputs:[new ge("clock","signal")],doc:"Updates connected nodes every N milliseconds, unless :enabled is false. When :enables changes to true again, the timer starts counting from 0.",setup({node:e,params:t}){e.state.interval=t[0].valueOf(),e.update("enabled",!1,void 0)},update({node:e,changes:t}){e.state.tid&&clearInterval(e.state.tid),t.enabled&&(e.state.tid=setInterval(()=>e.output("clock"),e.state.interval))}});Le({id:"clock",argTypes:[],inputs:[new ge("interval","number")],outputs:[new ge("clock","signal")],doc:"Updates connected nodes every N milliseconds.",setup({node:e}){e.state.lastTime=Date.now(),e.state.interval=1/0},update({node:e,changes:t}){e.state.interval=t.interval},tick({node:e}){let t=Date.now();e.state.lastTime+e.state.interval<=t&&(e.state.lastTime=t,e.output("clock"))}})});async function ss(e){await yl;for(var t of us)e.defineNode(t);for(var[n,r]of os)e.defineFeature(n,r);console.log("Initialized nodes and features"),console.log(e.nodeDefs,e.features)}function Le(e){us.push(e)}function oi(e,t){os.push([e,t])}var yl,us,os,Ft=Ye(()=>{"use strict";yl=Promise.all([Promise.resolve().then(()=>(Qo(),fl)),Promise.resolve().then(()=>(Zo(),ll)),Promise.resolve().then(()=>(es(),pl)),Promise.resolve().then(()=>(ts(),_l)),Promise.resolve().then(()=>(ns(),hl)),Promise.resolve().then(()=>(rs(),dl)),is().then(()=>ml),Promise.resolve().then(()=>(as(),vl))]),us=[],os=[]});vn();await nr();var Vo=".scm",Ho="chain",ei=/^\*([a-z-_+]+)\*$/i,ti="lynx_localsaves",ba="lynx_autosave";function Wo(e){let t={title:void 0,category:"Uncategorized",author:void 0,"author-url":void 0,version:void 0,description:void 0},n=we.get("list->array");for(var r of e){let i=n(r);if(i.length===3&&D.is(i[0],"define")&&i[1]instanceof D){let a=i[1].__name__,u=ei.exec(a);if(u===null)continue;t[u[1]]=i[2].valueOf()}}return t}await nr();lt();await mn();var un=class{name;args;def;templateInstantiation;where;#e;linksByOutput;nodesInputting;state;currentValues;constructor(t,n,r){this.name=t,this.args=n,this.def=void 0,this.where=r,this.#e={},this.linksByOutput={},this.nodesInputting={},this.state={},this.currentValues={},this.templateInstantiation={}}async setup(t){for(var n of this.def.outputs)n instanceof $e&&(this.currentValues[n.name]=[]);await this.def.setup?.({app:t,node:this,params:this.args,features:Object.fromEntries(await Promise.all(this.def.features!==void 0?this.def.features.map(async o=>[o,await t.feature(o)]):[]))});for(var r of Object.keys(this.linksByOutput))for(var[i,a,u,s]of this.linksByOutput[r])await this.def.connect?.({app:t,nodeFrom:this,outFrom:r,nodeTo:i,inTo:a,busNOut:u,busNIn:s})}update(t,n,r){r===void 0?this.#e[t]=n:this.#e[t]=this.get(t)}async tick(t){this.def===void 0&&mt(this,"Node has no definition"),await this.def.tick?.({app:t,node:this}),Object.keys(this.#e).length>0&&await this.def.update?.({app:t,node:this,changes:this.#e}),this.#e={}}output(t,n,r){Array.isArray(this.currentValues[t])&&r!==void 0?this.currentValues[t][r]=n:this.currentValues[t]=n;let i=this.linksByOutput[t];if(i)for(var[a,u,s,o]of i)(r===s||r===void 0)&&a.update(u,n,o)}get(t,n){if(!this.nodesInputting[t])return n;let r=this.nodesInputting[t];if(r.length===1&&r[0][3]===void 0){let[c,l,h,w]=r[0],B=c.currentValues[l];return h!==void 0?B[h]:B}let i=[];for(var[a,u,s,o]of r){var f;let c=a.currentValues[u];s!==void 0?f=c[s]:f=c,i[o]=f}return i}connect(t,n,r,i,a){if(console.log("connecting",this,t,n,r,i,a),(this.linksByOutput[t]||(this.linksByOutput[t]=[])).push([n,r,i,a]),n.nodesInputting[r]!==void 0&&n.nodesInputting[r].length===1){let[u,s,o,f]=n.nodesInputting[r][0];(o===void 0&&f===void 0||f===a)&&mt(this,`Can't connect multiple outputs to the same input :${r}`)}(n.nodesInputting[r]||(n.nodesInputting[r]=[])).push([this,t,i,a])}insertParameterizedTypes(t){let n=r=>t.template?.[r]!==void 0?this.templateInstantiation[r]!==void 0?this.templateInstantiation[r]:t.template[r]:t.generics?.[r]!==void 0?Da(this.args[t.generics[r]]):r;return{inputs:t.inputs.map(r=>new r.constructor(r.name,n(r.type))),outputs:t.outputs.map(r=>new r.constructor(r.name,n(r.type)))}}};function Ut(e,t,n=1){return new an(t,n,e.where?.line,e.where?.col,e.name.length)}function mt(e,t,n=1){throw Ut(e,t,n)}lt();await mn();function Ko(e,t){let n=[],r=we.get("list->array"),i={},a=[];for(var u of t){if(!(u instanceof O)){a.push(Rt(`Unknown ${we.get("type")(u)} ${we.get("repr")(u)} at top level`,u));continue}let o=u.car,f=u.cdr;switch(o.__name__){case"define":let c=r(f);if(c.length<2){a.push(Rt("Truncated definition",o));continue}c[0]instanceof O?Xf(e,c):Jf(c,i);break;case Ho:n.push(...Qf(r(f)));break;default:a.push(Rt(`Unknown top-level data type "${o.__name__}"`,o))}}console.log("unprocessed chains",n);var s;try{s=Zf(e,n,i)}catch(o){o instanceof dt?a.push(...o.subErrors):a.push(o)}if(a.length>0)throw console.warn(a),new dt(a);return s}function Jf([e,t],n){ei.test(e.valueOf())||(n[e.valueOf()]=Jo(t))}function Xf(e,t){let[n,...r]=rr(t[0]).map(i=>i.valueOf());throw console.log(n,r),new RangeError("makeHON: not implemented");e.defineNode({id:n})}function Jo(e){return console.log("CREATING NODE",e),new un(e.car.valueOf(),rr(e.cdr),{line:e.car.__line__!==void 0?e.car.__line__+1:void 0,col:e.car.__col__})}function Qf(e){let t=[];var n=[];let r=[];for(var i of e)if(i instanceof O)n.push(Jo(i));else if(i instanceof D&&i.valueOf()==="~")t.push(n),n=[];else if(i instanceof D&&i.valueOf().startsWith("@")){let a=t.flat(1).concat(n).findLast(u=>u instanceof un&&u.name===i.valueOf().slice(1));a===void 0?r.push(Rt(`Backreference to "${i.valueOf().slice(1)}" node, but there weren't any previous to here`,i,3)):n.push(a)}else n.push(i);if(r.length>0)throw new dt(r);return n.length>0&&t.push(n),t}function Zf(e,t,n){let r=[];for(var i of t)for(var a=0;a<i.length;a++)if(i[a]instanceof D&&!/^:/.test(i[a].toString())){if(!(i[a].toString()in n)){r.push(Rt(`Node named "${i[a]}" wasn't defined`,i[a],4));continue}i[a]=n[i[a].toString()]}let u=new Map;for(var i of t)for(var a=0;a<i.length;a++){let h=i[a];if(h instanceof un&&!u.has(h)){var s=e.nodeDefs.filter(w=>w.id!==h.name?!1:w.argTypes===void 0?!0:w.argTypes.length!==h.args.length?!1:w.argTypes.every((B,b)=>xa(h.args[b],B)));s.length===0&&(console.log("got undefined node"),r.push(Ut(h,e.nodeDefs.some(w=>w.id===h.name)?`Bad parameters to "${h.name}"`:`Undefined node type "${h.name}"`,4))),a===0&&(s=s.filter(w=>w.inputs.length===0),s.length===0&&r.push(Ut(h,`"${h.name}" can't be used at the start of a chain as it requires input`))),u.set(h,s)}}console.log("variants",u);let o=new Map(u.entries()),f=[];for(var i of t){if(console.log("proc chain",i),!(i[0]instanceof un)){r.push(Rt(`${we.get("type")(i[0])} not allowed here`,i[0]));continue}for(var a=0;a<i.length;){if(a+1===i.length){f.includes(i[a])||f.push(i[a]);break}let h=i.findIndex((w,B)=>B>a&&w instanceof un);if(h===-1){r.push(Rt(`${we.get("type")(i[a+1])} not allowed here`,i[a+1]));break}try{console.log("aac",i[a],i[h],i.slice(a+1,h)),el(i[a],i[h],u,i.slice(a+1,h),o)}catch(w){if(w instanceof dt)r.push(...w.subErrors);else if(w instanceof an)r.push(w);else throw w}f.includes(i[a])||f.push(i[a]),a=h}}if(console.log("all nodes",f),r.length>0)throw new dt(r);return f}function el(e,t,n,r,i){let a=n.get(e),u=n.get(t),s=[],o=[],f=[];for(var c of a)for(var l of u)try{console.group("guessConnect",c,l),s.push([c,l,nl(c,l,r,e,t)])}catch(b){f.push(b)}finally{console.groupEnd()}if(console.log("candidate connections",s),s.length===0){let b=i.get(e),g=i.get(t);b.length!==a.length?o.push(Ut(e,`No variant of "${e.name}" works here`)):g.length!==u.length?o.push(Ut(t,`No variant of "${t.name}" works here`)):o.length===0&&o.push(Ut(e,`No outputs of "${e.name}" match the type of any input of "${t.name}"`))}s.length>1&&o.push(Ut(e,`Multiple ways to connect "${e.name}" to "${t.name}" and no one in particular was specified`));var h,w,B;if(s.length>0){[h,w,B]=s[0];let b=h.outputs.find(d=>d.name===B[0]),g=w.inputs.find(d=>d.name===B[1]),_=h.template?.[b.type]!==void 0,m=w.template?.[g.type]!==void 0;_&&m?o.push(Ut(e,`Failed to resolve template types between ${e.name}:${B[0]} and ${t.name}:${B[1]}. Try using a converter node that expects a type.`)):_?e.templateInstantiation[b.type]=g.type:m&&(t.templateInstantiation[g.type]=b.type)}if(o.length>0)throw new dt(o.concat(f));console.log("Assigned definitions",e,h,t,w),e.def=h,t.def=w,e.connect(B[0],t,B[1],B[2],B[3]),n.set(e,[e.def]),n.set(t,[t.def])}function tl(e,t,n,r){let i=e.insertParameterizedTypes(n),a=t.insertParameterizedTypes(r),u=[];for(var s of a.inputs)for(var o of i.outputs)Ea(o,s)!=="no"&&u.push([o.name,s.name]);return console.log("possibilities for connections",u),u}function nl(e,t,n,r,i){e.outputs.length===0&&mt(i,`Can't connect here, "${e.id}" has no outputs`),t.inputs.length===0&&mt(r,`Can't connect here, "${t.id}" has no inputs`);var a;let u=n.filter(x=>typeof x.valueOf()=="string"),s=n.filter(x=>typeof x.valueOf()=="number");console.log("guessConnect",r,e,u,s,i,t);let o=tl(r,i,e,t);var f,c,l,h,w,B,b,g,_,m;switch(u.length){case 0:o.length>1&&(e.outputs.length>1&&mt(r,`"${e.id}" node has multiple outputs and none was specified`),t.inputs.length>1&&mt(i,`"${t.id}" node has multiple inputs and none was specified`)),f=o[0][1],c=o[0][0],_=m=void 0;break;case 1:a=u[0].toString().replace(/^:/,""),b=o.filter(([x,S])=>x===a),g=o.filter(([x,S])=>S===a),console.log(b,g),b.length>0&&g.length>0&&$t(`Write ":${a}" twice if you intend to connect :${a} to :${a}`,u[0]),g.length===1?(c=g[0][0],f=a,_=u[0],m=void 0):b.length===1?(f=b[0][1],c=a,m=u[0],_=void 0):(f=c=a,m=_=u[0]);break;case 2:m=u[0],_=u[1],c=m.toString().replace(/^:/,""),f=_.toString().replace(/^:/,"");break;default:$t("too many symbols",u[2])}switch(l=t.inputs.findIndex(x=>x.name===f),h=e.outputs.findIndex(x=>x.name===c),h===-1&&$t(`"${e.id}" node has no output :${c}`,m,2),l===-1&&$t(`"${t.id}" node has no input :${f}`,_,2),s.length){case 0:break;case 1:e.outputs[h]instanceof $e?w=s[0].valueOf():t.inputs[l]instanceof $e?B=s[0].valueOf():$t(`Neither input "${f}" nor output "${c}" are busses`,s[0],3);break;case 2:t.inputs[l]instanceof $e||$t(`Invalid number, input :${f} is not a bus`,s[1]),e.outputs[h]instanceof $e||$t(`Invalid number, output :${c} is not a bus`,s[0]),w=s[0].valueOf(),B=s[1].valueOf();break;default:$t("too many numbers",s[2])}let d=Ea(e.outputs[h],t.inputs[l]);return d==="no"&&mt(r,`Type mismatch: can't connect output "${c}" (${e.outputs[h].type}) to input "${f}" (${t.inputs[l].type})`,2),d==="selectIn"&&w===void 0&&mt(i,`Output of "${e.id}" is a bus, but no index was specified`,3),d==="selectOut"&&B===void 0&&mt(r,`Input of "${t.id}" is a bus, but no index was specified`,3),w!==void 0==(B===void 0)&&e.outputs[h]instanceof $e&&t.inputs[l]instanceof $e&&mt(i,`Must specify two numbers or none, both input "${f}" and output "${c}" are busses`,2),[c,f,w,B]}await mn();var ai=class{nodeDefs;features;mainEl;titleEl;logEl;connectEl;constructor(t,n,r,i){this.nodeDefs=[],this.features={},this.mainEl=t,this.titleEl=n,this.logEl=r,this.connectEl=i}defineNode(t){this.nodeDefs.push(t)}defineFeature(t,n){if(this.features[t]!==void 0)throw new Error(`Feature "${t}" is already defined`);this.features[t]=n}async feature(t){let n=this.features[t];if(!n)throw new Error(`Feature "${t}" doesn't exist`);return await n.init(this),n}build(t){return Ko(this,t)}async run(t){for(console.log("Running nodes",t);;)await Promise.all(t.map(n=>n.tick(this))),await new Promise(n=>setTimeout(n,0))}async setup({source:t,title:n}){let r=await Yo(t),i=this.build(r),a=Wo(r);return console.log("Got metadata",a),this.setTitle(a.title??n),await Promise.all(i.map(u=>u.setup(this))),this.connectEl&&(this.connectEl.innerHTML=""),i}setTitle(t){document.title=`${t} | Lynx`,this.titleEl&&(this.titleEl.textContent=t)}addUI(t){return this.mainEl?.append(t),t}addConnect(t){return this.connectEl?.append(t),t}log(t,n=5e3){let r=new Date(Date.now()),i=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}.${r.getMilliseconds().toString().padStart(3,"0")}`,a=Qe("span.log",{"data-timestamp":i},t);return this.logEl?.append(a),n>0&&setTimeout(()=>a.remove(),n),t}warn(t,n){this.log(Qe("span.warning",{},t),n)}error(t,n){this.log(Qe("span.error",{},t),n)}info(t,n){this.log(Qe("span.info",{},t),n)}};await mn();async function ui(e){let r=new Blob([e]).stream().pipeThrough(new DecompressionStream("deflate")).getReader(),i=[];for(;;){let u=await r.read();if(u.done)break;i.push(u.value)}let a=await rl(i);return new TextDecoder().decode(a)}async function rl(e){let n=await new Blob(e).arrayBuffer();return new Uint8Array(n)}async function il(){return location.hash===""?void 0:{source:await ui(ri(location.hash.slice(1))),title:ii()?"New Flow":"Shared Flow"}}async function al(){let t=new URLSearchParams(location.search).get("saved");localStorage.getItem(ti)||(localStorage[ti]="{}");let n=JSON.parse(localStorage[ti]);if(!t)return;if(!(t in n))throw new Error(`No save slot "${t}"`);return{source:await ui(ri(n[t])),title:`Saved flow '${t}'`}}async function ul(){let t=new URLSearchParams(location.search).get("url");if(!t)return;let n=await fetch(t,{mode:"cors",cache:"reload"});if(n.status===404)throw new Error(`Failed to fetch "${t}"`);return{source:await n.text(),title:`Linked flow from ${t}`}}async function ol(){let t=new URLSearchParams(location.search).get("example");if(!t)return;let n=await fetch(import.meta.resolve(`../examples/files/${t}${Vo}`),{cache:"reload"});if(n.status===404)throw new Error(`Failed to fetch example "${t}"`);return{source:await n.text(),title:`Example flow '${t}'`}}async function sl(){if(localStorage[ba])return{source:await ui(ri(localStorage[ba])),title:"Autosaved"}}var cl=[[il,"share hash"],[al,"save slot"],[ul,"external URL"],[ol,"example"],[sl,"autosaved app"]];async function Xo(e,t){let n=[];for(var[r,i]of cl)try{let a=await r();if(a!==void 0&&n.length===0)return a}catch(a){console.error(a),e.error(i+": "+a),n.push(a)}throw n.length===0&&(e.addUI(t),e.setTitle("Nothing to see here")),"Stop."}await mn();Ft();vn();ii()&&(zt("#re-edit").style.display="none");Ia("#re-edit","click",async()=>{window.location="../editor"+location.search+location.hash});var kt=new ai(zt("#app"),zt("#title"),zt("#log"),zt("#connect-area"));await ss(kt);var Ca=zt("#nothingToSeeHere");Ca.remove();Ca.style.cssText="";var cs=await Xo(kt,Ca);console.log("Loaded app!",cs);try{let e=await kt.setup(cs);e.length>0?kt.run(e).catch(t=>{console.error(t),kt.error(t)}):(kt.addUI("No nodes..."),kt.addUI(Qe("br")),kt.addUI(Ba('Try an <a href="../examples">example</a> to get started')))}catch(e){if(e instanceof dt)for(ka of Go(e.subErrors))console.error(ka),kt.addUI(Aa("Init error: ",ka));else console.error(e),kt.addUI(Aa("Init error: ",e))}var ka;
/*! Bundled license information:

@jcubic/lips/dist/lips.esm.min.js:
  (**@license
   *   __ __                          __
   *  / / \ \       _    _  ___  ___  \ \
   * | |   \ \     | |  | || . \/ __>  | |
   * | |    > \    | |_ | ||  _/\__ \  | |
   * | |   / ^ \   |___||_||_|  <___/  | |
   *  \_\ /_/ \_\                     /_/ v. DEV
   *
   * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
   *
   * Copyright (c) 2018-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>
   * Released under the MIT license
   *
   * includes:
   *
   * unfetch by Jason Miller (@developit) MIT License
   *
   * contentloaded.js
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   *
   * dist file generated by Babel includes code
   * Copyright (c) 2014-present, Facebook, Inc.
   * released under MIT license
   *
   * build: Sat, 10 May 2025 19:46:53 +0000
   *)
  (**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   *)
*/
//# sourceMappingURL=runner_main.js.map
