var Ye=(e,t)=>()=>(e&&(t=e(e=0)),t);function he(e,t,...n){let[r,...i]=e.split("."),a=document.createElement(r);i.length>0&&a.classList.add(...i);for(var[u,s]of Object.entries(t??{}))a.setAttribute(u,s);return a.append(...n),a}function $r(e){let t=he("span");return t.innerHTML=e,t}function Vr(e){return document.querySelector(e)}var kn=Ye(()=>{});var be,Ft,ft=Ye(()=>{"use strict";be=class{#e;#t;constructor(t,n){this.#e=t,this.#t=n}get name(){return this.#e}get type(){return this.#t}},Ft=class extends be{}});var Mo={};var ca=Ye(()=>{"use strict";ft();dt();Te({id:"value",generics:{T:0},argTypes:["any"],doc:"Emits the same value every time when it is updated by the trigger input.",inputs:[new be("trigger","signal")],outputs:[new be("value","T")],setup({node:e,params:t}){e.state.value=t[0]},update({node:e}){e.output("value",e.state.value)}});Te({id:"edges",argTypes:[],doc:"Emits a signal on :rising when :value changes from false to true, and a signal on :falling when :value changes from true to false.",inputs:[new be("value","boolean")],outputs:[new be("rising","signal"),new be("falling","signal")],setup({node:e}){e.state.oldState=!1},update({node:e,changes:t}){let n=e.state.oldState,r=t.value;e.state.oldState=r,n!==r&&e.output(r?"rising":"falling")}})});var qo={};var fa=Ye(()=>{"use strict";kn();ft();dt();Te({id:"button",inputs:[],argTypes:["string"],outputs:[new be("pressed","boolean"),new be("hovering","boolean")],doc:"Creates a HTML <code>&lt;button></code> with the argument and outputs :pressed and :hovering states when the user interacts with it.",setup({app:e,node:t,params:n}){let r=he("button",{},n[0]);e.addUI(r),r.addEventListener("pointerdown",()=>{t.output("pressed",!0)}),r.addEventListener("pointerup",()=>{t.output("pressed",!1)}),r.addEventListener("mouseover",()=>{t.output("hovering",!0)}),r.addEventListener("mouseout",()=>{t.output("hovering",!1)}),t.output("hovering",!1),t.output("pressed",!1)}})});var Uo={};var la=Ye(()=>{"use strict";ft();dt();Te({id:"log",inputs:[new be("value","any")],outputs:[],argTypes:["string"],doc:"Logs the value with a message whenever it updates.",setup({node:e,params:t}){e.state.message=t[0]??""},update({app:e,node:t,changes:n}){n.value===void 0&&(n.value=""),e.log(t.state.message+n.value)}})});var zo={};var _a=Ye(()=>{"use strict";ft();dt();Te({id:"string->number",argTypes:[],inputs:[new be("string","string")],outputs:[new be("number","number")],doc:"Receives a string representing a number, parses it as a number, and outputs that.",update({node:e,changes:t}){e.output("number",parseFloat(t.string))}});Te({id:"to-string",argTypes:[],inputs:[new be("what","any")],outputs:[new be("stringified","string")],doc:"Receives any object and converts it to a string using the Javascript <code>toString()</code> method.",update({node:e,changes:t}){e.output("stringified",t.what.toString())}})});var $o={};var pa=Ye(()=>{"use strict";ft();dt();Te({id:"random",argTypes:[],inputs:[new be("randomize","signal")],outputs:[new be("value","number")],doc:"Outputs a random value in the range [0, 1) when updated.",update({node:e}){e.output("value",Math.random())}})});var on,Hr=Ye(()=>{"use strict";on=class{#e=!1;doc;initializer;constructor(t,n){Object.assign(this,n),this.initializer=t}async init(t){this.#e||(await this.initializer(t),this.#e=!0)}}});var Cn,Gr=Ye(()=>{"use strict";Cn=class{x;y;constructor(t,n){this.x=t,this.y=n}toString(){return`Point(${this.x}, ${this.y})`}}});var Vo={};var ha=Ye(()=>{"use strict";Hr();ft();dt();Gr();Wn("geolocation",new on(async()=>{let e=await navigator.permissions.query({name:"geolocation"});if(e.name==="denied")throw new RangeError("This app need sto know your geolocation, but you denied Lynx permission to access it. Check your browser settings and try again.");e.name=="prompt"&&navigator.geolocation.getCurrentPosition(()=>{},()=>{},{enableHighAccuracy:!0})},{doc:"Accesses the device's gurrent GPS location and makes position updates available to the app. If you haven't already granted permission, you will be prompted to let Lynx access your geolocation when the app starts.",watch(e,t){navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0}),navigator.geolocation.watchPosition(e,t,{enableHighAccuracy:!0})}}));Te({id:"gps",inputs:[],features:["geolocation"],argTypes:[],outputs:[new be("pos","point"),new be("altitude","number"),new be("heading","number"),new be("speed","number")],doc:`Watches your device's GPS position and outputs position and movement data.
    <br>The point that <code>gps</code> sends for :pos is of the form <code>{x: longitude, y: latitude}</code>.
    <br>Altitude, heading, and speed may not be available depending on your device.`,setup({app:e,node:t,features:n}){n.geolocation.watch(({coords:r})=>{t.output("pos",new Cn(r.longitude,r.latitude)),r.altitude!==null&&t.output("altitude",r.altitude),r.heading!==null&&t.output("heading",r.heading),r.speed!==null&&t.output("speed",r.speed)},r=>{switch(console.error(r),r.code){case GeolocationPositionError.PERMISSION_DENIED:e.error("Permission denied when getting geolocation data.");break;case GeolocationPositionError.POSITION_UNAVAILABLE:e.warn("Geolocation is not available");break;case GeolocationPositionError.TIMEOUT:e.warn("Timed out trying to get geolocation");break}})}})});function cu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cu=function(){return!!e})()}function Mn(e,t){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Mn(e,t)}function dr(e,t,n){if(cu())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Mn(i,n.prototype),i}function fu(e){if(Array.isArray(e))return e}function lu(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ci(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ki(e,t){if(e){if(typeof e=="string")return ci(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ci(e,t):void 0}}function _u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mr(e){return fu(e)||lu(e)||ki(e)||_u()}function ge(e){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(e)}function Ho(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Go(e,t){if(t&&(ge(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ho(e)}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qn(e)}function Ci(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mn(e,t)}function Yo(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function vr(e){var t=typeof Map=="function"?new Map:void 0;return vr=function(r){if(r===null||!Yo(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return dr(r,arguments,qn(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Mn(i,r)},vr(e)}function da(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(f){return void n(f)}s.done?t(o):Promise.resolve(o).then(r,i)}function Oe(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function u(o){da(a,r,i,u,s,"next",o)}function s(o){da(a,r,i,u,s,"throw",o)}u(void 0)})}}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wo(e,t){if(ge(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ge(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pu(e){var t=Wo(e,"string");return ge(t)=="symbol"?t:t+""}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pu(r.key),r)}}function Dt(e,t,n){return t&&Jo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zt(e,t,n){return(t=pu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ko(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function gn(e,t){if(e==null)return{};var n,r,i=Ko(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qo(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,u,s=[],o=!0,f=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);o=!0);}catch(c){f=!0,i=c}finally{try{if(!o&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(f)throw i}}return s}}function ye(e,t){return fu(e)||Qo(e,t)||ki(e,t)||_u()}function Zo(e){if(Array.isArray(e))return ci(e)}function Xo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(e){return Zo(e)||lu(e)||ki(e)||Xo()}function hu(e,t){this.v=e,this.k=t}function es(e){return new hu(e,0)}function ts(e){return function(){return new Pn(e.apply(this,arguments))}}function Pn(e){var t,n;function r(a,u){try{var s=e[a](u),o=s.value,f=o instanceof hu;Promise.resolve(f?o.v:o).then(function(c){if(f){var l=a==="return"?"return":"next";if(!o.k||c.done)return r(l,c);c=e[l](c).value}i(s.done?"return":"normal",c)},function(c){r("throw",c)})}catch(c){i("throw",c)}}function i(a,u){switch(a){case"return":t.resolve({value:u,done:!0});break;case"throw":t.reject(u);break;default:t.resolve({value:u,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(a,u){return new Promise(function(s,o){var f={key:a,arg:u,resolve:s,reject:o,next:null};n?n=n.next=f:(t=n=f,r(a,u))})},typeof e.return!="function"&&(this.return=void 0)}function ns(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rs(){return ma||(ma=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Wr)),Wr.exports}function is(){return va||(va=1,function(e){var t=rs().default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},a=Object.prototype,u=a.hasOwnProperty,s=Object.defineProperty||function(j,D,A){j[D]=A.value},o=typeof Symbol=="function"?Symbol:{},f=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function m(j,D,A){return Object.defineProperty(j,D,{value:A,enumerable:!0,configurable:!0,writable:!0}),j[D]}try{m({},"")}catch{m=function(A,z,te){return A[z]=te}}function k(j,D,A,z){var te=D&&D.prototype instanceof F?D:F,ne=Object.create(te.prototype),De=new T(z||[]);return s(ne,"_invoke",{value:y(j,A,De)}),ne}function L(j,D,A){try{return{type:"normal",arg:j.call(D,A)}}catch(z){return{type:"throw",arg:z}}}i.wrap=k;var b="suspendedStart",g="suspendedYield",p="executing",v="completed",h={};function F(){}function O(){}function B(){}var V={};m(V,f,function(){return this});var J=Object.getPrototypeOf,Y=J&&J(J(Q([])));Y&&Y!==a&&u.call(Y,f)&&(V=Y);var R=B.prototype=F.prototype=Object.create(V);function W(j){["next","throw","return"].forEach(function(D){m(j,D,function(A){return this._invoke(D,A)})})}function ce(j,D){function A(te,ne,De,Ce){var K=L(j[te],j,ne);if(K.type!=="throw"){var it=K.arg,Qe=it.value;return Qe&&t(Qe)=="object"&&u.call(Qe,"__await")?D.resolve(Qe.__await).then(function(at){A("next",at,De,Ce)},function(at){A("throw",at,De,Ce)}):D.resolve(Qe).then(function(at){it.value=at,De(it)},function(at){return A("throw",at,De,Ce)})}Ce(K.arg)}var z;s(this,"_invoke",{value:function(ne,De){function Ce(){return new D(function(K,it){A(ne,De,K,it)})}return z=z?z.then(Ce,Ce):Ce()}})}function y(j,D,A){var z=b;return function(te,ne){if(z===p)throw Error("Generator is already running");if(z===v){if(te==="throw")throw ne;return{value:r,done:!0}}for(A.method=te,A.arg=ne;;){var De=A.delegate;if(De){var Ce=N(De,A);if(Ce){if(Ce===h)continue;return Ce}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(z===b)throw z=v,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);z=p;var K=L(j,D,A);if(K.type==="normal"){if(z=A.done?v:g,K.arg===h)continue;return{value:K.arg,done:A.done}}K.type==="throw"&&(z=v,A.method="throw",A.arg=K.arg)}}}function N(j,D){var A=D.method,z=j.iterator[A];if(z===r)return D.delegate=null,A==="throw"&&j.iterator.return&&(D.method="return",D.arg=r,N(j,D),D.method==="throw")||A!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+A+"' method")),h;var te=L(z,j.iterator,D.arg);if(te.type==="throw")return D.method="throw",D.arg=te.arg,D.delegate=null,h;var ne=te.arg;return ne?ne.done?(D[j.resultName]=ne.value,D.next=j.nextLoc,D.method!=="return"&&(D.method="next",D.arg=r),D.delegate=null,h):ne:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,h)}function P(j){var D={tryLoc:j[0]};1 in j&&(D.catchLoc=j[1]),2 in j&&(D.finallyLoc=j[2],D.afterLoc=j[3]),this.tryEntries.push(D)}function M(j){var D=j.completion||{};D.type="normal",delete D.arg,j.completion=D}function T(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(P,this),this.reset(!0)}function Q(j){if(j||j===""){var D=j[f];if(D)return D.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var A=-1,z=function te(){for(;++A<j.length;)if(u.call(j,A))return te.value=j[A],te.done=!1,te;return te.value=r,te.done=!0,te};return z.next=z}}throw new TypeError(t(j)+" is not iterable")}return O.prototype=B,s(R,"constructor",{value:B,configurable:!0}),s(B,"constructor",{value:O,configurable:!0}),O.displayName=m(B,l,"GeneratorFunction"),i.isGeneratorFunction=function(j){var D=typeof j=="function"&&j.constructor;return!!D&&(D===O||(D.displayName||D.name)==="GeneratorFunction")},i.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,B):(j.__proto__=B,m(j,l,"GeneratorFunction")),j.prototype=Object.create(R),j},i.awrap=function(j){return{__await:j}},W(ce.prototype),m(ce.prototype,c,function(){return this}),i.AsyncIterator=ce,i.async=function(j,D,A,z,te){te===void 0&&(te=Promise);var ne=new ce(k(j,D,A,z),te);return i.isGeneratorFunction(D)?ne:ne.next().then(function(De){return De.done?De.value:ne.next()})},W(R),m(R,l,"Generator"),m(R,f,function(){return this}),m(R,"toString",function(){return"[object Generator]"}),i.keys=function(j){var D=Object(j),A=[];for(var z in D)A.push(z);return A.reverse(),function te(){for(;A.length;){var ne=A.pop();if(ne in D)return te.value=ne,te.done=!1,te}return te.done=!0,te}},i.values=Q,T.prototype={constructor:T,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!D)for(var A in this)A.charAt(0)==="t"&&u.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=r)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var A=this;function z(it,Qe){return De.type="throw",De.arg=D,A.next=it,Qe&&(A.method="next",A.arg=r),!!Qe}for(var te=this.tryEntries.length-1;te>=0;--te){var ne=this.tryEntries[te],De=ne.completion;if(ne.tryLoc==="root")return z("end");if(ne.tryLoc<=this.prev){var Ce=u.call(ne,"catchLoc"),K=u.call(ne,"finallyLoc");if(Ce&&K){if(this.prev<ne.catchLoc)return z(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return z(ne.finallyLoc)}else if(Ce){if(this.prev<ne.catchLoc)return z(ne.catchLoc,!0)}else{if(!K)throw Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return z(ne.finallyLoc)}}}},abrupt:function(D,A){for(var z=this.tryEntries.length-1;z>=0;--z){var te=this.tryEntries[z];if(te.tryLoc<=this.prev&&u.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var ne=te;break}}ne&&(D==="break"||D==="continue")&&ne.tryLoc<=A&&A<=ne.finallyLoc&&(ne=null);var De=ne?ne.completion:{};return De.type=D,De.arg=A,ne?(this.method="next",this.next=ne.finallyLoc,h):this.complete(De)},complete:function(D,A){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&A&&(this.next=A),h},finish:function(D){for(var A=this.tryEntries.length-1;A>=0;--A){var z=this.tryEntries[A];if(z.finallyLoc===D)return this.complete(z.completion,z.afterLoc),M(z),h}},catch:function(D){for(var A=this.tryEntries.length-1;A>=0;--A){var z=this.tryEntries[A];if(z.tryLoc===D){var te=z.completion;if(te.type==="throw"){var ne=te.arg;M(z)}return ne}}throw Error("illegal catch attempt")},delegateYield:function(D,A,z){return this.delegate={iterator:Q(D),resultName:A,nextLoc:z},this.method==="next"&&(this.arg=r),h}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Yr)),Yr.exports}function as(){if(ya)return Jr;ya=1;var e=is()();Jr=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return Jr}function Jn(){try{let e=ve();if(qe){if(I>=qe.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}I=qe.postBundlePosition,qe=null}if(I==rn)Ie=null,ee=null,ut&&(ut=null);else if(I>rn){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!zn)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw di(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function ve(){let e=ee[I++],t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=ee[I++];break;case 25:if(t==7)return ps();e=Ze.getUint16(I),I+=2;break;case 26:if(t==7){let n=Ze.getFloat32(I);if(me.useFloat32>2){let r=Si[(ee[I]&127)<<1|ee[I+1]>>7];return I+=4,(r*n+(n>0?.5:-.5)>>0)/r}return I+=4,n}e=Ze.getUint32(I),I+=4;break;case 27:if(t==7){let n=Ze.getFloat64(I);return I+=8,n}if(t>1){if(Ze.getUint32(I)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=Ze.getUint32(I+4)}else me.int64AsNumber?(e=Ze.getUint32(I)*4294967296,e+=Ze.getUint32(I+4)):e=Ze.getBigUint64(I);I+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],r,i=0;for(;(r=ve())!=sn;){if(i>=On)throw new Error(`Array length exceeds ${On}`);n[i++]=r}return t==4?n:t==3?n.join(""):Buffer.concat(n);case 5:let a;if(me.mapsAsObjects){let u={},s=0;if(me.keyMap)for(;(a=ve())!=sn;){if(s++>=At)throw new Error(`Property count exceeds ${At}`);u[ot(me.decodeKey(a))]=ve()}else for(;(a=ve())!=sn;){if(s++>=At)throw new Error(`Property count exceeds ${At}`);u[ot(a)]=ve()}return u}else{Nn&&(me.mapsAsObjects=!0,Nn=!1);let u=new Map;if(me.keyMap){let s=0;for(;(a=ve())!=sn;){if(s++>=At)throw new Error(`Map size exceeds ${At}`);u.set(me.decodeKey(a),ve())}}else{let s=0;for(;(a=ve())!=sn;){if(s++>=At)throw new Error(`Map size exceeds ${At}`);u.set(a,ve())}}return u}case 7:return sn;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return _s(e);case 3:if(Un>=I)return yr.slice(I-gr,(I+=e)-gr);if(Un==0&&rn<140&&e<32){let i=e<16?mu(e):ls(e);if(i!=null)return i}return fs(e);case 4:if(e>=On)throw new Error(`Array length exceeds ${On}`);let n=new Array(e);for(let i=0;i<e;i++)n[i]=ve();return n;case 5:if(e>=At)throw new Error(`Map size exceeds ${On}`);if(me.mapsAsObjects){let i={};if(me.keyMap)for(let a=0;a<e;a++)i[ot(me.decodeKey(ve()))]=ve();else for(let a=0;a<e;a++)i[ot(ve())]=ve();return i}else{Nn&&(me.mapsAsObjects=!0,Nn=!1);let i=new Map;if(me.keyMap)for(let a=0;a<e;a++)i.set(me.decodeKey(ve()),ve());else for(let a=0;a<e;a++)i.set(ve(),ve());return i}case 6:if(e>=ga){let i=Ie[e&8191];if(i)return i.read||(i.read=_i(i)),i.read();if(e<65536){if(e==cs){let a=pn(),u=ve(),s=ve();hi(u,s);let o={};if(me.keyMap)for(let f=2;f<a;f++){let c=me.decodeKey(s[f-2]);o[ot(c)]=ve()}else for(let f=2;f<a;f++){let c=s[f-2];o[ot(c)]=ve()}return o}else if(e==ss){let a=pn(),u=ve();for(let s=2;s<a;s++)hi(u++,ve());return ve()}else if(e==ga)return gs();if(me.getShared&&(Oi(),i=Ie[e&8191],i))return i.read||(i.read=_i(i)),i.read()}}let r=Ne[e];if(r)return r.handlesRead?r(ve):r(ve());{let i=ve();for(let a=0;a<li.length;a++){let u=li[a](e,i);if(u!==void 0)return u}return new Ot(i,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let i=(nt||en())[e];if(i!==void 0)return i;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let i=new Error("Unexpected end of CBOR data");throw i.incomplete=!0,i}throw new Error("Unknown CBOR token "+e)}}function _i(e){if(!e)throw new Error("Structure is required in record definition");function t(){let n=ee[I++];if(n=n&31,n>23)switch(n){case 24:n=ee[I++];break;case 25:n=Ze.getUint16(I),I+=2;break;case 26:n=Ze.getUint32(I),I+=4;break;default:throw new Error("Expected array header, but got "+ee[I-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===n)return r(ve);r=r.next}if(this.slowReads++>=du){let a=this.length==n?this:this.slice(0,n);return r=me.keyMap?new Function("r","return {"+a.map(u=>me.decodeKey(u)).map(u=>Da.test(u)?ot(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>Da.test(u)?ot(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=n,this.compiledReader=r,r(ve)}let i={};if(me.keyMap)for(let a=0;a<n;a++)i[ot(me.decodeKey(this[a]))]=ve();else for(let a=0;a<n;a++)i[ot(this[a])]=ve();return i}return e.slowReads=0,t}function ot(e){if(typeof e=="string")return e==="__proto__"?"__proto_":e;if(typeof e=="number"||typeof e=="boolean"||typeof e=="bigint")return e.toString();if(e==null)return e+"";throw new Error("Invalid property name type "+typeof e)}function pi(e){let t;if(e<16&&(t=mu(e)))return t;if(e>64&&fi)return fi.decode(ee.subarray(I,I+=e));let n=I+e,r=[];for(t="";I<n;){let i=ee[I++];if((i&128)===0)r.push(i);else if((i&224)===192){let a=ee[I++]&63;r.push((i&31)<<6|a)}else if((i&240)===224){let a=ee[I++]&63,u=ee[I++]&63;r.push((i&31)<<12|a<<6|u)}else if((i&248)===240){let a=ee[I++]&63,u=ee[I++]&63,s=ee[I++]&63,o=(i&7)<<18|a<<12|u<<6|s;o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o)}else r.push(i);r.length>=4096&&(t+=Ue.apply(String,r),r.length=0)}return r.length>0&&(t+=Ue.apply(String,r)),t}function ls(e){let t=I,n=new Array(e);for(let r=0;r<e;r++){let i=ee[I++];if((i&128)>0){I=t;return}n[r]=i}return Ue.apply(String,n)}function mu(e){if(e<4)if(e<2){if(e===0)return"";{let t=ee[I++];if((t&128)>1){I-=1;return}return Ue(t)}}else{let t=ee[I++],n=ee[I++];if((t&128)>0||(n&128)>0){I-=2;return}if(e<3)return Ue(t,n);let r=ee[I++];if((r&128)>0){I-=3;return}return Ue(t,n,r)}else{let t=ee[I++],n=ee[I++],r=ee[I++],i=ee[I++];if((t&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){I-=4;return}if(e<6){if(e===4)return Ue(t,n,r,i);{let a=ee[I++];if((a&128)>0){I-=5;return}return Ue(t,n,r,i,a)}}else if(e<8){let a=ee[I++],u=ee[I++];if((a&128)>0||(u&128)>0){I-=6;return}if(e<7)return Ue(t,n,r,i,a,u);let s=ee[I++];if((s&128)>0){I-=7;return}return Ue(t,n,r,i,a,u,s)}else{let a=ee[I++],u=ee[I++],s=ee[I++],o=ee[I++];if((a&128)>0||(u&128)>0||(s&128)>0||(o&128)>0){I-=8;return}if(e<10){if(e===8)return Ue(t,n,r,i,a,u,s,o);{let f=ee[I++];if((f&128)>0){I-=9;return}return Ue(t,n,r,i,a,u,s,o,f)}}else if(e<12){let f=ee[I++],c=ee[I++];if((f&128)>0||(c&128)>0){I-=10;return}if(e<11)return Ue(t,n,r,i,a,u,s,o,f,c);let l=ee[I++];if((l&128)>0){I-=11;return}return Ue(t,n,r,i,a,u,s,o,f,c,l)}else{let f=ee[I++],c=ee[I++],l=ee[I++],m=ee[I++];if((f&128)>0||(c&128)>0||(l&128)>0||(m&128)>0){I-=12;return}if(e<14){if(e===12)return Ue(t,n,r,i,a,u,s,o,f,c,l,m);{let k=ee[I++];if((k&128)>0){I-=13;return}return Ue(t,n,r,i,a,u,s,o,f,c,l,m,k)}}else{let k=ee[I++],L=ee[I++];if((k&128)>0||(L&128)>0){I-=14;return}if(e<15)return Ue(t,n,r,i,a,u,s,o,f,c,l,m,k,L);let b=ee[I++];if((b&128)>0){I-=15;return}return Ue(t,n,r,i,a,u,s,o,f,c,l,m,k,L,b)}}}}}function _s(e){return me.copyBuffers?Uint8Array.prototype.slice.call(ee,I,I+=e):ee.subarray(I,I+=e)}function ps(){let e=ee[I++],t=ee[I++],n=(e&127)>>2;if(n===31)return t||e&3?NaN:e&128?-1/0:1/0;if(n===0){let r=((e&3)<<8|t)/16777216;return e&128?-r:r}return Kn[3]=e&128|(n>>1)+56,Kn[2]=(e&7)<<5|t>>3,Kn[1]=t<<5,Kn[0]=0,vu[0]}function cn(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function en(){if(!nt)if(me.getShared)Oi();else throw new Error("No packed values available");return nt}function ys(e,t){let n="get"+e.name.slice(0,-5),r;typeof e=="function"?r=e.BYTES_PER_ELEMENT:e=null;for(let i=0;i<2;i++){if(!i&&r==1)continue;let a=r==2?1:r==4?2:r==8?3:0;Ne[i?t:t-4]=r==1||i==ms?u=>{if(!e)throw new Error("Could not find typed array for code "+t);return!me.copyBuffers&&(r===1||r===2&&!(u.byteOffset&1)||r===4&&!(u.byteOffset&3)||r===8&&!(u.byteOffset&7))?new e(u.buffer,u.byteOffset,u.byteLength>>a):new e(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!e)throw new Error("Could not find typed array for code "+t);let s=new DataView(u.buffer,u.byteOffset,u.byteLength),o=u.length>>a,f=new e(o),c=s[n];for(let l=0;l<o;l++)f[l]=c.call(s,l<<a,i);return f}}}function gs(){let e=pn(),t=I+ve();for(let r=2;r<e;r++){let i=pn();I+=i}let n=I;return I=t,qe=[pi(pn()),pi(pn())],qe.position0=0,qe.position1=0,qe.postBundlePosition=I,I=n,ve()}function pn(){let e=ee[I++]&31;if(e>23)switch(e){case 24:e=ee[I++];break;case 25:e=Ze.getUint16(I),I+=2;break;case 26:e=Ze.getUint32(I),I+=4;break}return e}function Oi(){if(me.getShared){let e=gu(()=>(ee=null,me.getShared()))||{},t=e.structures||[];me.sharedVersion=e.version,nt=me.sharedValues=e.packedValues,Ie===!0?me.structures=Ie=t:Ie.splice.apply(Ie,[0,t.length].concat(t))}}function gu(e){let t=rn,n=I,r=gr,i=Un,a=yr,u=ut,s=qe,o=new Uint8Array(ee.slice(0,rn)),f=Ie,c=me,l=zn,m=e();return rn=t,I=n,gr=r,Un=i,yr=a,ut=u,qe=s,ee=o,zn=l,Ie=f,me=c,Ze=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),m}function di(){ee=null,ut=null,Ie=null}function bs(e){Ne[e.tag]=e.decode}function ka(e,t){e<24?w[d++]=t|e:e<256?(w[d++]=t|24,w[d++]=e):e<65536?(w[d++]=t|25,w[d++]=e>>8,w[d++]=e&255):(w[d++]=t|26,Ae.setUint32(d,e),d+=4)}function vt(e){e<24?w[d++]=128|e:e<256?(w[d++]=152,w[d++]=e):e<65536?(w[d++]=153,w[d++]=e>>8,w[d++]=e&255):(w[d++]=154,Ae.setUint32(d,e),d+=4)}function Zr(e){if(e instanceof xs)return!0;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function ur(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let r=t.get(e);if(r)++r.count==2&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let i=t.samplingPackedValues.get(e);i?i.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let r=0,i=e.length;r<i;r++)ur(e[r],t);else{let r=!t.encoder.useRecords;for(var n in e)e.hasOwnProperty(n)&&(r&&ur(n,t),ur(e[n],t))}break;case"function":console.log(e)}}function mt(e,t){return!Es&&t>1&&(e-=4),{tag:e,encode:function(r,i){let a=r.byteLength,u=r.byteOffset||0,s=r.buffer||r;i(Vn?jr.from(s,u,a):new Uint8Array(s,u,a))}}}function mi(e,t){let n=e.byteLength;n<24?w[d++]=64+n:n<256?(w[d++]=88,w[d++]=n):n<65536?(w[d++]=89,w[d++]=n>>8,w[d++]=n&255):(w[d++]=90,Ae.setUint32(d,n),d+=4),d+n>=w.length&&t(d+n),w.set(e.buffer?e:new Uint8Array(e),d),d+=n}function Fs(e,t){let n,r=t.length*2,i=e.length-r;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let s of u.references)e[s++]=a>>8,e[s]=a&255}for(;n=t.pop();){let a=n.offset;e.copyWithin(a+r,a,i),r-=2;let u=a+r;e[u++]=216,e[u++]=28,i=a}return e}function Ca(e,t){Ae.setUint32(Re.position+e,d-Re.position-e+1);let n=Re;Re=null,t(n[0]),t(n[1])}function Oa(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");ji.unshift(e.Class),wr.unshift(e)}bs(e)}function ks(){if(Ba)return Sn;Ba=1,Object.defineProperty(Sn,"__esModule",{value:!0});let e=8,t=6,n=3,r=(1<<t)+(n-1),i=(1<<16-t)-1,a=256;function u(g,p){var v=0,h=0,F=0,O=0,B=0,V=1<<e-1,J=0,Y=0,R=0,W=new Int32Array(a),ce=0;for(ce=0;ce<a;ce++)W[ce]=-858993460;for(v=g.length;h<v;){if((V<<=1)==1<<e&&(V=1,B=F,p[F++]=0),h>v-r){p[F++]=g[h++];continue}if(R=(g[h]+13^g[h+1]-13^g[h+2])&a-1,Y=h-W[R]&i,W[R]=h,O=h-Y,O>=0&&O!=h&&g[h]==g[O]&&g[h+1]==g[O+1]&&g[h+2]==g[O+2]){for(p[B]|=V,J=n;J<r&&g[h+J]==g[O+J];J++);p[F++]=J-n<<e-t|Y>>e,p[F++]=Y,h+=J}else p[F++]=g[h++]}return console.assert(g.length>=h),F}function s(g,p,v){p=p|0;for(var h=0,F=0,O=0,B=0,V=1<<(e-1|0),J=0,Y=0;h<p;)if((V<<=1)===1<<e&&(V=1,B=g[h],h=h+1|0),B&V){J=(g[h]>>(e-t|0))+n|0,Y=(g[h]<<e|g[h+1|0])&i,h=h+2|0,O=F-Y|0;{for(;J>4;)v[F]=v[O],F=F+1|0,O=O+1|0,v[F]=v[O],F=F+1|0,O=O+1|0,v[F]=v[O],F=F+1|0,O=O+1|0,v[F]=v[O],F=F+1|0,O=O+1|0,J=J-4|0;for(;J>0;)v[F]=v[O],F=F+1|0,O=O+1|0,J=J-1|0}}else v[F]=g[h],F=F+1|0,h=h+1|0;return F}function o(){return new TextEncoder("utf-8").encode(f)}let f="@lzjb",c=o();function l(...g){if(g.length>1){let p=g.reduce((F,O)=>F+O.length,0),v=new Uint8Array(p),h=0;return g.forEach(F=>{v.set(F,h),h+=F.length}),v}else if(g.length)return g[0]}function m(g){let p=Math.ceil(Math.log2(g)/8),v=new Uint8Array(p);for(let h=0;h<v.length;h++){let F=g&255;v[h]=F,g=(g-F)/256}return v}function k(g){let p=0;for(let v=g.length-1;v>=0;v--)p=p*256+g[v];return p}function L(g,{magic:p=!0}={}){let v=new Uint8Array(Math.max(g.length*1.5|0,16384)),h=u(g,v),F=m(g.length),O=[Uint8Array.of(F.length),F,v.slice(0,h)];return p&&O.unshift(c),l(...O)}function b(g,{magic:p=!0}={}){if(p&&new TextDecoder("utf-8").decode(g.slice(0,c.length))!==f)throw new Error("Invalid magic value");let v=p?c.length:0,h=g[v],F=v+1,O=v+h+1,B=k(g.slice(F,O));g=g.slice(O);let V=new Uint8Array(B);return s(g,g.length,V),V}return Sn.pack=L,Sn.unpack=b,Sn}function Cs(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest,a=[],u={},s=function f(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:f,headers:{keys:function(){return a},entries:function(){return a.map(function(c){return[c,i.getResponseHeader(c)]})},get:function(c){return i.getResponseHeader(c)},has:function(c){return i.getResponseHeader(c)!=null}}}};for(var o in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,function(f,c){u[c]||a.push(u[c]=c)}),n(s())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(o,t.headers[o]);i.send(t.body||null)})}function Ns(e,t,n){Ts(e,t),t.set(e,n)}function Ts(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ls(e,t){return e.get(wu(e,t))}function ja(e,t,n){return e.set(wu(e,t),n),n}function wu(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Pi(e,t,n){return t=qn(t),Go(e,Du()?Reflect.construct(t,n||[],qn(e).constructor):t.apply(e,n))}function Du(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Du=function(){return!!e})()}function It(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Rs(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return u=f.done,f},e:function(f){s=!0,a=f},f:function(){try{u||n.return==null||n.return()}finally{if(s)throw a}}}}function Rs(e,t){if(e){if(typeof e=="string")return Ia(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ia(e,t):void 0}}function Ia(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pa(Object(n),!0).forEach(function(r){zt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xu(e){var t,n,r,i=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&(t=e[n])!=null)return t.call(e);if(r&&(t=e[r])!=null)return new or(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function or(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return or=function(r){this.s=r,this.n=r.next},or.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):t(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):t(i.apply(this.s,arguments))}},new or(e)}function Us(e,t){var n=!1,r=!0,i=e.document,a=i.documentElement,u=i.addEventListener,s=u?"addEventListener":"attachEvent",o=u?"removeEventListener":"detachEvent",f=u?"":"on",c=function(k){k.type=="readystatechange"&&i.readyState!="complete"||((k.type=="load"?e:i)[o](f+k.type,c,!1),!n&&(n=!0)&&t.call(e,k.type||k))},l=function(){try{a.doScroll("left")}catch{setTimeout(l,50);return}c("poll")};if(i.readyState=="complete")t.call(e,"lazy");else{if(!u&&a.doScroll){try{r=!e.frameElement}catch{}r&&l()}i[s](f+"DOMContentLoaded",c,!1),i[s](f+"readystatechange",c,!1),e[s](f+"load",c,!1)}}function G(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(lt(e)&&vi(n[0]))console.log(Xu(e,function(a){return He(a,!0)}));else if(vi()){var i;(i=console).log.apply(i,[He(e,!0)].concat(we(n.map(function(a){return He(a,!0)}))))}}function vi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=Be&&Be.get("DEBUG",{throwError:!1});return e===null?t===!0:t?.valueOf()===e.valueOf()}function Ni(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Fu(e,t){return"".concat(Ni(e),"[+-]?").concat(t,"+/").concat(t,"+")}function Ti(e,t){return"".concat(Ni(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function Au(e,t){return"".concat(Ni(e),"[+-]?").concat(t,"+")}function ku(e,t){var n=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")"),r="";return e===""&&(r="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"),new RegExp("^((?:(?:".concat(r,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(n,")?)(").concat(r,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}function Vs(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)===56320?t.push(((i&1023)<<10)+(a&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}function Ys(e){var t=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]],n=t.map(function(r){var i=ye(r,2),a=i[0],u=i[1];return e(a,u)}).join("|");return e===Ti&&(n=zs+"|"+n),n}function Ri(e){return new RegExp("^(?:"+Ys(e)+")$","i")}function Pr(e){var t=e.match(Ks),n={};if(t[1]){var r=t[1].replace(/#/g,"").toLowerCase().split("");r.includes("x")?n.radix=16:r.includes("o")?n.radix=8:r.includes("b")?n.radix=2:r.includes("d")&&(n.radix=10),r.includes("i")&&(n.inexact=!0),r.includes("e")&&(n.exact=!0)}return n.number=t[2],n}function ju(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=Pr(e),r=n.number.split("/"),i=le({num:_([r[0],n.radix||t]),denom:_([r[1],n.radix||t])});return n.inexact?i.valueOf():i}function Iu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=Pr(e);return n.inexact?ue(parseInt(n.number,n.radix||t)):_([n.number,n.radix||t])}function Na(e){var t=e.match(/#\\x([0-9a-f]+)$/i),n;if(t){var r=parseInt(t[1],16);n=String.fromCodePoint(r)}else t=e.match(/#\\([\s\S]+)$/),t&&(n=t[1]);if(n)return de(n);throw new Error("Parse: invalid character")}function Pu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;function n(o){var f;if(o==="+")f=_(1);else if(o==="-")f=_(-1);else if(o.match(Su))f=_([o,t]);else if(o.match(Bu)){var c=o.split("/");f=le({num:_([c[0],t]),denom:_([c[1],t])})}else if(o.match(Ir)){var l=zi(o);return r.exact?l.toRational():l}else{if(o.match(/nan.0$/))return _(NaN);if(o.match(/inf.0$/))return o[0]==="-"?_(Number.NEGATIVE_INFINITY):_(Number.POSITIVE_INFINITY);throw new Error("Internal Parser Error")}return r.inexact?ue(f.valueOf()):f}var r=Pr(e);t=r.radix||t;var i,a=r.number.match(Js);t!==10&&a?i=a:i=r.number.match($s[t]);var u,s;return s=n(i[2]),i[1]?u=n(i[1]):s instanceof ue?u=ue(0):u=_(0),s.cmp(0)===0&&s.__type__==="bigint"?u:oe({im:s,re:u})}function Qs(e){return parseInt(e.toString(),10)===e}function Zs(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var n=parseInt(t[4],10),r,i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length,a=t[3]&&t[3].length;i<Math.abs(n)&&(r=_([t[1].replace(/\./,""),10]),a&&(n-=a))}return{exponent:n,mantisa:r}}function Xs(e){if(e.match(/e/i)){var t=e.split("e"),n=ye(t,2),r=n[0],i=n[1],a=Math.abs(parseInt(i));if(a<7&&i<0){var u="0".repeat(a-1),s=r[0]==="-"?"-":"+",o=r.replace(/(^[-+])|\./g,""),f="".concat(s,"0.").concat(u).concat(o);return parseFloat(f)}}return parseFloat(e)}function zi(e){var t=Pr(e),n=Xs(t.number),r=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&r||Qs(n)&&Number.isSafeInteger(n)&&t.number.match(/e\+?[0-9]/i))return _(n);var i=Zs(t.number),a=i.mantisa,u=i.exponent;if(a!==void 0&&u!==void 0){var s=_(10).pow(_(Math.abs(u)));if(t.exact&&u<0)return le({num:a,denom:s});if(u>0&&(t.exact||!t.number.match(/\./)))return _(a).mul(s)}}return n=ue(n),t.exact?n.toRational():n}function ec(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(i,a){return"\\u"+a.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0)throw new Error("Invalid string literal, unclosed ".concat(t[2]));try{var n=Z(JSON.parse(e));return n.freeze(),n}catch(i){var r=i.message.replace(/in JSON /,"").replace(/.*Error: /,"");throw new Error("Invalid string literal: ".concat(r))}}function tc(e){e.match(/^name/);var t=/(^|.)\|/g;if(e.match(t)){e=e.split("|").filter(Boolean).reduce(function(r,i){var a="";if(i.match(/^\\+$/)){if(i.length>1){var u=Math.floor(i.length/2);a="\\".repeat(u)}i.length%2!==0&&(a+="|")}else a=i;return r+a});var n={t:"	",r:"\r",n:`
`};e=e.replace(/\\(x[^;]+);/g,function(r,i){return String.fromCharCode(parseInt("0"+i,16))}).replace(/\\([trn])/g,function(r,i){return n[i]})}return new x(e)}function nc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.token;if(tu.hasOwnProperty(n))return tu[n];var r;if(n.match(/^"[\s\S]*"$/))r=ec(n);else if(n[0]==="#"){var i=n.match(Li);i?r=new RegExp(i[1],i[2]):n.match(Ou)&&(r=Na(n));var a=n.match(/#\\(.+)/);a&&Vs(a[1]).length===1&&(r=Na(n))}if(n.match(/[0-9a-f]|[+-]i/i)&&(n.match(Ui)?r=Iu(n):n.match(Ir)?r=zi(n):n.match(qi)?r=ju(n):n.match(Mi)&&(r=Pu(n))),!r&&n.match(/^#[iexobd]/))throw new Error("Invalid numeric constant: "+e);if(r||(r=tc(n)),t){var u=e.col,s=e.offset,o=e.line;X(r,"__col__",u),X(r,"__offset__",s),X(r,"__line__",o)}return r}function rc(e){return!(["(",")","[","]"].includes(e)||Se.names().includes(e))}function ic(e){return rc(e)&&!(e.match(Li)||e.match(/^"[\s\S]*"$/)||e.match(Ui)||e.match(Ir)||e.match(Mi)||e.match(qi)||e.match(Ou)||["#t","#f","nil"].includes(e))}function ac(e){if(typeof e=="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function Hn(){this.data=[]}function Ta(e){e instanceof Z&&(e=e.valueOf());for(var t=new q(e,{whitespace:!0}),n=[];;){var r=t.peek(!0);if(r===je)break;n.push(r),t.skip()}return n}function uc(e){var t=e.token,n=gn(e,Os);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var r=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(r,"")}return se({token:t},n)}function Fr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};this.fn=e,this.cont=t}function oc(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sc(e.apply(this,n))}}function sc(e){for(;e instanceof Fr;){var t=e;e=e.fn(),e instanceof Fr||t.cont()}return e}function bn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e instanceof Z&&(e=e.toString()),t)return Ta(e);var n=Ta(e).map(function(r){return r.token==="#\\ "||r.token==`#\\
`?r.token:r.token.trim()}).filter(function(r){return r&&!r.match(/^;/)&&!r.match(/^#\|[\s\S]*\|#$/)});return cc(n)}function cc(e){for(var t=0,n=null,r=[],i=0;i<e.length;++i){var a=e[i];if(a==="#;"){["(","["].includes(e[i+1])?(t=1,n=i):r.push([i,i+2]),i+=1;continue}n!==null&&([")","]"].includes(a)?t--:["(","["].includes(a)&&t++,t===0&&(r.push([n,i+1]),n=null))}e=e.slice(),r.reverse();for(var u=0,s=r;u<s.length;u++){var o=ye(s[u],2),f=o[0],c=o[1];e.splice(f,c-f)}return e}function fc(e){return ge(e)==="symbol"||ge(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function x(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e instanceof Z&&(e=e.valueOf()),t&&x.list[e]instanceof x)return x.list[e];if(typeof this<"u"&&this.constructor!==x||typeof this>"u")return new x(e,t);this.__name__=e,t&&typeof e=="string"&&(x.list[e]=this)}function $i(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function Vi(e){return ge(e)==="symbol"?!!e.toString().match(/^Symbol\(#:/):!1}function gi(e,t){var n=H.get("begin"),r=Hi("begin");return e.forEach(function(i){i.set(r,n)}),new S(r,t)}function Le(e){var t=this,n={pending:!0,rejected:!1,fulfilled:!1,reason:void 0,type:void 0};e=e.then(function(r){return n.type=ke(r),n.fulfilled=!0,n.pending=!1,r}),X(this,"_promise",e,{hidden:!0}),pe(e.catch)&&(e=e.catch(function(r){n.rejected=!0,n.pending=!1,n.reason=r})),Object.keys(n).forEach(function(r){Object.defineProperty(t,"__".concat(r,"__"),{enumerable:!0,get:function(){return n[r]}})}),X(this,"__promise__",e),this.then=!1}function wn(e){return Array.isArray(e)?Promise.all(lc(e)).then(_c):e}function lc(e){for(var t=new Array(e.length),n=e.length;n--;){var r=e[n];r instanceof Le?t[n]=new Je(r):t[n]=r}return t}function _c(e){for(var t=new Array(e.length),n=e.length;n--;){var r=e[n];r instanceof Je?t[n]=r.valueOf():t[n]=r}return t}function sr(e){return Se.names().includes(e)}function pc(e){return Se.__builtins__.includes(e)}function La(e){return Se.type(e)===Se.LITERAL}function hc(e){return Se.type(e)===Se.SYMBOL}function Ma(e,t){return Ju(e)?e===t:e===null||t.match(e)}function Gi(e,t){return bi.apply(this,arguments)}function bi(){return bi=ts(ae.mark(function e(t,n){var r,i,a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n||(H?n=H.get("**interaction-environment**",{throwError:!1}):n=Be),t instanceof Vt?r=t:(r=new Vt({env:n}),r.prepare(t));case 2:return s.next=5,es(r.read_object());case 5:if(a=s.sent,r.balanced()||r._ballancing_error(a,i),a!==je){s.next=9;break}return s.abrupt("break",14);case 9:return i=a,s.next=12,a;case 12:s.next=2;break;case 14:case"end":return s.stop()}},e)})),bi.apply(this,arguments)}function _e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i){return i},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(Xe(e)){var r=e.then(t);return n===null?r:r.catch(n)}return e instanceof Array?dc(e,t,n):lt(e)?mc(e,t,n):t(e)}function dc(e,t,n){return e.find(Xe)?_e(wn(e),function(r){return Object.isFrozen(e)&&Object.freeze(r),t(r)},n):t(e)}function mc(e,t,n){for(var r=Object.keys(e),i=[],a=[],u=r.length;u--;){var s=r[u],o=e[s];i[u]=o,Xe(o)&&a.push(o)}return a.length?_e(wn(i),function(f){var c={};return f.forEach(function(l,m){var k=r[m];c[k]=l}),Object.isFrozen(e)&&Object.freeze(c),c},n):t(e)}function X(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=r.hidden,a=i===void 0?!1:i;Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0,enumerable:!a})}function vc(e){return wi.apply(this,arguments)}function wi(){return wi=Oe(ae.mark(function e(t){var n,r,i,a,u,s,o;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=[],r=!1,i=!1,c.prev=3,u=xu(t);case 5:return c.next=7,u.next();case 7:if(!(r=!(s=c.sent).done)){c.next=13;break}o=s.value,n.push(o);case 10:r=!1,c.next=5;break;case 13:c.next=19;break;case 15:c.prev=15,c.t0=c.catch(3),i=!0,a=c.t0;case 19:if(c.prev=19,c.prev=20,!(r&&u.return!=null)){c.next=24;break}return c.next=24,u.return();case 24:if(c.prev=24,!i){c.next=27;break}throw a;case 27:return c.finish(24);case 28:return c.finish(19);case 29:return c.abrupt("return",n);case 30:case"end":return c.stop()}},e,null,[[3,15,19,29],[20,,24,28]])})),wi.apply(this,arguments)}function qa(e,t){if(t instanceof RegExp)return function(a){return String(a).match(t)};if(pe(t))return t;if(t instanceof _)return function(a){return _(a).cmp(t)===0};if(t instanceof Z){var n=t.__string__;return function(a){return Z.is(a,n)}}else if(t instanceof x){var r=t.__name__;return function(a){return x.is(a,r)}}else if(t instanceof de){var i=t.__char__;return function(a){return de.is(a,i)}}return function(a){return t===a}}function E(e,t,n,r){return typeof e!="string"&&(t=arguments[0],n=arguments[1],r=arguments[2],e=null),n&&(r?t.__doc__=n:t.__doc__=Yi(n)),e?t.__name__=e:t.name&&!Ht(t)&&(t.__name__=t.name),t}function Yi(e){return e.split(`
`).map(function(t){return t.trim()}).join(`
`)}function Mu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=e.length;if(t<=0)throw Error("previousSexp: Invalid argument sexp = ".concat(t));e:for(;t--&&n>=0;){for(var r=1;r>0;){var i=e[--n];if(!i)break e;i==="("||i.token==="("?r--:(i===")"||i.token===")")&&r++}n--}return e.slice(n+1)}function yc(e){if(!e||!e.length)return 0;var t=e.length;if(e[t-1].token===`
`)return 0;for(;--t;)if(e[t].token===`
`){var n=(e[t+1]||{}).token;if(n)return n.length}return 0}function qu(e,t){return n(e,t)===t.length;function n(r,i){function a(k,L){var b=It(k),g;try{for(b.s();!(g=b.n()).done;){var p=g.value,v=n(p,L);if(v!==-1)return v}}catch(h){b.e(h)}finally{b.f()}return-1}function u(){return r[o]===Symbol.for("symbol")&&!ic(i[c])}function s(){var k=r[o+1],L=i[c+1];if(k!==void 0&&L!==void 0)return n([k],[L])}for(var o=0,f={},c=0;c<i.length;++c){if(typeof r[o]>"u")return c;if(r[o]instanceof xt){var l;if(["+","*"].includes(r[o].flag)){for(;c<i.length&&(l=a(r[o].patterns,i.slice(c)),l!==-1);)c+=l;c-=1,o++;continue}else if(r[o].flag==="?"){l=a(r[o].patterns,i.slice(c)),l===-1?c-=2:o++;continue}}else if(r[o]instanceof RegExp){if(!i[c].match(r[o]))return-1}else if(bt.LString.isString(r[o])){if(r[o].valueOf()!==i[c])return-1}else if(ge(r[o])==="symbol"){if(r[o]===Symbol.for("*")){if(f[o]=f[o]||0,["(","["].includes(i[c])?f[o]++:[")","]"].includes(i[c])&&f[o]--,typeof r[o+1]<"u"&&f[o]===0&&s()===-1||f[o]>0)continue}else if(u())return-1}else if(r[o]instanceof Array){var m=n(r[o],i.slice(c));if(m===-1||m+c>i.length)return-1;c+=m-1,o++;continue}else return-1;o++}return r.length!==o?-1:i.length}}function ze(e){this.__code__=e.replace(/\r/g,"")}function Dn(e){this.pattern=e}function xt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();this.patterns=t,this.flag=r}function nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}function zu(e){return e=e.valueOf(),Array.from(e).map(function(t){var n=t.codePointAt(0),r=Dc[n];return r?String.fromCodePoint(r):t}).join("")}function xc(e,t){var n=Object.prototype.toString,r="[object Array]",i=[],a=e.slice(),u;if(!e.length)return i;u=a.pop();do n.call(u)===r?a.push.apply(a,u):i.push(u);while(a.length&&(u=a.pop())!==void 0);return i.reverse(),i}function $a(e,t){for(var n=e.length,r;n>0;){r=Math.floor(t()*n),n--;var i=[e[r],e[n]];e[n]=i[0],e[r]=i[1]}return e}function Pt(){}function S(e,t){if(typeof this<"u"&&this.constructor!==S||typeof this>"u")return new S(e,t);this.car=e,this.cdr=t}function Va(e,t){return function(r){if(U(e,r,["pair","nil"]),$(r))return[];for(var i=[],a=r;;)if(C(a)){if(a.have_cycles("cdr"))break;var u=a.car;t&&C(u)&&(u=this.get(e).call(this,u)),i.push(u),a=a.cdr}else{if($(a))break;throw new Error("".concat(e,": can't convert improper list"))}return i}}function lt(e){return e&&ge(e)==="object"&&e.constructor===Object}function Ec(e){return e=tt(e),Vu.includes(e)}function ti(e){return pe(e)&&(Ht(e)||e.__doc__)}function Fc(e){var t=e.constructor||Object,n=lt(e),r=pe(e[Symbol.asyncIterator])||pe(e[Symbol.iterator]),i;return Tn.has(t)?i=Tn.get(t):Tn.forEach(function(a,u){u=tt(u),t===u&&(u===Object&&n&&!r||u!==Object)&&(i=a)}),i}function Hu(e){if(e&&ge(e)==="object"){var t={},n=Object.getOwnPropertySymbols(e);n.forEach(function(i){var a=i.toString().replace(/Symbol\(([^)]+)\)/,"$1");t[a]=He(e[i])});var r=Object.getOwnPropertyNames(e);return r.forEach(function(i){var a=e[i];a&&ge(a)==="object"&&a.constructor===Object?t[i]=Hu(a):t[i]=He(a)}),t}return e}function Gu(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Ac(e,t){return e.hasOwnProperty(t)&&pe(e.toString)}function kc(e){if(Lr(e))return"#<procedure(native)>";var t=e.prototype&&e.prototype.constructor;if(pe(t)&&Ht(t)&&e[Gc]&&t.hasOwnProperty("__name__")){var n=t.__name__;return Z.isString(n)?(n=n.toString(),"#<class:".concat(n,">")):"#<class>"}if(e.hasOwnProperty("__name__")){var r=e.__name__;if(ge(r)==="symbol"&&(r=$i(r)),typeof r=="string")return"#<procedure:".concat(r,">")}return Ac(e,"toString")?e.toString():e.name&&!Ht(e)?"#<procedure:".concat(e.name.trim(),">"):"#<procedure>"}function He(e,t,n){if(typeof jQuery<"u"&&e instanceof jQuery.fn.init)return"#<jQuery("+e.length+")>";if(Di.has(e))return Di.get(e);if(cr(e))return"#<prototype>";if(e){var r=e.constructor;if(xi.has(r)){for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return xi.get(r)(e,{quote:t,skip_cycles:n,pair_args:a})}}var s=It(Cc),o;try{for(s.s();!(o=s.n()).done;){var f=o.value;if(e instanceof f)return e.toString(t)}}catch(k){s.e(k)}finally{s.f()}if(e instanceof _||[re,je].includes(e))return e.toString();if(e===St)return"#<js:global>";if(e===null)return"null";if(pe(e))return pe(e.toString)&&e.hasOwnProperty("toString")?e.toString().valueOf():kc(e);if(ge(e)==="object"){var c=e.constructor;c||(c=Object);var l;if(typeof c.__class__=="string")l=c.__class__;else{var m=Fc(e);if(m){if(pe(m))return m(e,t);throw new Error("toString: Invalid repr value")}l=c.name}return pe(e.toString)&&e.hasOwnProperty("toString")?e.toString().valueOf():(ke(e)==="instance"&&(Ht(c)&&c.__name__?(l=c.__name__.valueOf(),ge(l)==="symbol"&&(l=l.toString().replace(/^Symbol\((?:#:)?([^\)]+)\)$/,"$1"))):Lr(c)||(l="instance")),Ar(e,Symbol.iterator)?l?"#<iterator(".concat(l,")>"):"#<iterator>":Ar(e,Symbol.asyncIterator)?l?"#<asyncIterator(".concat(l,")>"):"#<asyncIterator>":l!==""?"#<"+l+">":"#<Object>")}return typeof e!="string"?e.toString():e}function Ei(e){return C(e)?e.have_cycles()?!0:Ei(e.car,fn)||Ei(e.cdr,fn):!1}function Oc(e){var t=[],n=[],r=[];function i(f){t.includes(f)||t.push(f)}function a(f,c,l,m){if(C(l)&&m.includes(l))return r.includes(l)||r.push(l),f[Ve]||(f[Ve]={}),f[Ve][c]=l,n.includes(f)||n.push(f),!0}var u=oc(function f(c,l){if(C(c)){delete c[hn],delete c[Ve],i(c),l.push(c);var m=a(c,"car",c.car,l),k=a(c,"cdr",c.cdr,l);if(m||u(c.car,l.slice()),!k)return new Fr(function(){return f(c.cdr,l.slice())})}});function s(f,c){if(C(f[Ve][c])){var l=o.indexOf(f[Ve][c]);f[Ve][c]="#".concat(l,"#")}}u(e,[]);var o=t.filter(function(f){return r.includes(f)});o.forEach(function(f,c){f[hn]="#".concat(c,"=")}),n.forEach(function(f){s(f,"car"),s(f,"cdr")})}function ni(e){return e<0?-e:e}function Bn(e,t){for(var n=mr(t),r=n[0],i=n.slice(1);i.length>0;){var a=i,u=ye(a,1),s=u[0];if(!e(r,s))return!1;var o=i,f=mr(o);r=f[0],i=f.slice(1)}return!0}function Wi(e,t){if(pe(e))return pe(t)&&tt(e)===tt(t);if(e instanceof _){if(!(t instanceof _))return!1;var n;return e.__type__===t.__type__&&(e.__type__==="complex"?n=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__:n=!0,n&&e.cmp(t)===0)?e.valueOf()===0?Object.is(e.valueOf(),t.valueOf()):!0:!1}else return typeof e=="number"?typeof t!="number"?!1:Number.isNaN(e)?Number.isNaN(t):e===Number.NEGATIVE_INFINITY?t===Number.NEGATIVE_INFINITY:e===Number.POSITIVE_INFINITY?t===Number.POSITIVE_INFINITY:Wi(_(e),_(t)):e instanceof de?t instanceof de?e.__char__===t.__char__:!1:e===t}function Sc(e,t){return ke(e)!==ke(t)||!Ji(e)?!1:e instanceof RegExp?e.source===t.source:e instanceof Z?e.valueOf()===t.valueOf():Wi(e,t)}function Ji(e){return e instanceof x||Z.isString(e)||$(e)||e===null||e instanceof de||e instanceof _||e===!0||e===!1}function fe(e,t,n,r){if(typeof this<"u"&&this.constructor!==fe||typeof this>"u")return new fe(e,t);U("Macro",e,"string",1),U("Macro",t,"function",2),n&&(r?this.__doc__=n:this.__doc__=Yi(n)),this.__name__=e,this.__fn__=t}function jc(e){return e.car instanceof x&&C(e.cdr)&&C(e.cdr.car)&&x.is(e.cdr.car.car,"lambda")}function Ic(e){return C(e.car)&&e.car.car instanceof x}function Pc(e,t,n,r,i){var a=i.use_dynamic,u=i.error,s=fe.defmacro(e,function(o){var f=Nc(t,o,this),c={env:f,dynamic_env:f,use_dynamic:a,error:u};if(C(n)){var l=n.reduce(function(m,k){return ie(k,c)});return _e(l,function(m){return ge(m)==="object"&&delete m[gt],m})}},r,!0);return s.__code__=new S(new x("define-macro"),Yu),s}function Nc(e,t,n){for(var r=new xe({},n,"defmacro"),i=t;!$(e);){if(e instanceof x){r.__env__[e.__name__]=i;break}else $(e.car)||($(i)?r.__env__[e.car.__name__]=re:(C(i.car)&&(i.car[gt]=!0),r.__env__[e.car.__name__]=i.car));if($(e.cdr))break;$(i)||(i=i.cdr),e=e.cdr}return r}function Ga(e){return function(){var t=Oe(ae.mark(function n(r,i){var a,u,s,o,f,c,l,m,k,L,b,g,p,v,h,F,O;return ae.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(O=function(){return O=Oe(ae.mark(function Y(R,W,ce){var y,N,P,M,T,Q,j,D,A,z,te,ne,De;return ae.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(C(R)&&R.car instanceof x)){K.next=50;break}if(!R[gt]){K.next=3;break}return K.abrupt("return",R);case 3:if(y=R.car.valueOf(),N=ce.get(R.car,{throwError:!1}),P=l(y),M=P||k(N,R)||L(N),!(p(y,N)&&!m(y))){K.next=31;break}return T=N instanceof Me?R:R.cdr,K.next=11,N.invoke(T,se(se({},i),{},{env:ce}),!0);case 11:if(Q=K.sent,!(N instanceof Me)){K.next=20;break}if(j=Q,D=j.expr,A=j.scope,!C(D)){K.next=19;break}if(!(W!==-1&&W<=1||W<Ha)){K.next=17;break}return K.abrupt("return",D);case 17:return W!==-1&&(W=W-1),K.abrupt("return",F(D,W,A));case 19:Q=D;case 20:if(!(Q instanceof x)){K.next=22;break}return K.abrupt("return",We(Q));case 22:if(!C(Q)){K.next=27;break}if(!(W!==-1&&W<=1||W<Ha)){K.next=25;break}return K.abrupt("return",Q);case 25:return W!==-1&&(W=W-1),K.abrupt("return",F(Q,W,ce));case 27:if(!Ji(Q)){K.next=29;break}return K.abrupt("return",Q);case 29:K.next=50;break;case 31:if(!(M&&C(R.cdr.car))){K.next=50;break}if(!P){K.next=39;break}return u=g(R.cdr.car),K.next=36,v(R.cdr.car,W);case 36:z=K.sent,K.next=41;break;case 39:u=b(R.cdr.car),z=R.cdr.car;case 41:return K.t0=S,K.t1=R.car,K.t2=S,K.t3=z,K.next=47,F(R.cdr.cdr,W,ce);case 47:return K.t4=K.sent,K.t5=new K.t2(K.t3,K.t4),K.abrupt("return",new K.t0(K.t1,K.t5));case 50:if(te=R.car,!C(te)){K.next=55;break}return K.next=54,F(te,W,ce);case 54:te=K.sent;case 55:if(ne=R.cdr,!C(ne)){K.next=60;break}return K.next=59,F(ne,W,ce);case 59:ne=K.sent;case 60:return De=new S(te,ne),K.abrupt("return",De);case 62:case"end":return K.stop()}},Y)})),O.apply(this,arguments)},F=function(Y,R,W){return O.apply(this,arguments)},h=function(){return h=Oe(ae.mark(function Y(R,W){var ce;return ae.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!$(R)){N.next=2;break}return N.abrupt("return",re);case 2:return ce=R.car,N.t0=S,N.t1=S,N.t2=ce.car,N.next=8,F(ce.cdr,W,a);case 8:return N.t3=N.sent,N.t4=new N.t1(N.t2,N.t3),N.next=12,v(R.cdr);case 12:return N.t5=N.sent,N.abrupt("return",new N.t0(N.t4,N.t5));case 14:case"end":return N.stop()}},Y)})),h.apply(this,arguments)},v=function(Y,R){return h.apply(this,arguments)},p=function(Y,R){return R instanceof fe&&R.__defmacro__&&!u.includes(Y)},g=function(Y){return[].concat(we(u),we(Y.to_array(!1).map(function(R){if(C(R))return R.car.valueOf();var W=ke(R),ce="macroexpand: Invalid let binding expectig pair got ".concat(W);throw new Error(ce)})))},b=function(Y){for(var R=[];!$(Y);){if(Y instanceof x){R.push(Y.valueOf());break}R.push(Y.car.valueOf()),Y=Y.cdr}return[].concat(we(u),R)},L=function(Y){return Y===f},k=function(Y,R){return Y===c&&C(R.cdr.car)},m=function(Y){return l(Y)?o.includes(a.get(Y)):!1},l=function(Y){return s.includes(Y)},a=i.env=this,u=[],s=["let","let*","letrec","letrec*"],o=s.map(function(J){return H.get(J)}),f=H.get("lambda"),c=H.get("define"),!(C(r.cdr)&&_.isNumber(r.cdr.car))){V.next=23;break}return V.t0=We,V.next=21,F(r,r.cdr.car.valueOf(),a);case 21:return V.t1=V.sent.car,V.abrupt("return",(0,V.t0)(V.t1));case 23:if(!e){V.next=29;break}return V.t2=We,V.next=27,F(r,1,a);case 27:return V.t3=V.sent.car,V.abrupt("return",(0,V.t2)(V.t3));case 29:return V.t4=We,V.next=32,F(r,-1,a);case 32:return V.t5=V.sent.car,V.abrupt("return",(0,V.t4)(V.t5));case 34:case"end":return V.stop()}},n,this)}));return function(n,r){return t.apply(this,arguments)}}()}function Me(e,t){this.__env__=t,this.__fn__=e,this.__defmacro__=!0}function Tc(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a={"...":{symbols:{},lists:[]},symbols:{}},u=i.expansion,s=i.define;G(n);function o(f,c){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=l.ellipsis,k=m===void 0?!1:m,L=l.trailing,b=L===void 0?!1:L,g=l.pattern_names,p=g===void 0?[]:g;if(G({code:c,pattern:f}),Ji(f)&&!(f instanceof x))return Sc(f,c);if(f instanceof x){var v=f.literal();if(n.includes(v)){if(!x.is(c,v)&&!x.is(f,c))return!1;var h=u.ref(v);return!h||h===s||h===H}}if(Array.isArray(f)&&Array.isArray(c)){if(G("<<< a 1"),f.length===0&&c.length===0)return!0;if(x.is(f[1],r)){if(f[0]instanceof x){var F=f[0].valueOf();if(G("<<< a 2 "+k),k){var O=c.length-2,B=O>0?c.slice(0,O):c,V=S.fromArray(B,!1);a["..."].symbols[F]?a["..."].symbols[F].append(new S(V,re)):a["..."].symbols[F]=new S(V,re)}else a["..."].symbols[F]=S.fromArray(c,!1)}else if(Array.isArray(f[0])){G("<<< a 3");var J=we(p),Y=se(se({},l),{},{pattern_names:J,ellipsis:!0});if(!c.every(function(Ro){return o(f[0],Ro,Y)}))return!1}if(f.length>2){var R=f.slice(2);return o(R,c.slice(-R.length),l)}return!0}var W=o(f[0],c[0],l);G({first:W,pattern:f[0],code:c[0]});var ce=o(f.slice(1),c.slice(1),l);return G({first:W,rest:ce}),W&&ce}if(C(f)&&C(f.car)&&C(f.car.cdr)&&x.is(f.car.cdr.car,r)&&(G(">> 0"),$(c)&&(G({pattern:f}),f.car.car instanceof x))){var y=f.car.car.valueOf();if(a["..."].symbols[y])throw new Error("syntax: named ellipsis can only appear onces");a["..."].symbols[y]=c}if(C(f)&&C(f.cdr)&&x.is(f.cdr.car,r)){if(G(">> 1 (a)"),!$(f.cdr.cdr)&&C(f.cdr.cdr)){G(">> 1 (b)");var N=f.cdr.cdr.length(),P=!$(f.last_pair().cdr);if(!C(c))return!1;for(var M=c.length(),T=c,Q=1;M-Q>N;)T=T.cdr,M--;var j=T.cdr;T.cdr=re;var D=se(se({},l),{},{trailing:P});if(!o(f.cdr.cdr,j,D))return!1}if(f.car instanceof x){var A=f.car.__name__;if(a["..."].symbols[A]&&!p.includes(A)&&!k)throw new Error("syntax: named ellipsis can only appear onces");if(G(">> 1 (next)"),$(c))G(">> 2"),k?(G("NIL"),a["..."].symbols[A]=re):(G("NULL"),a["..."].symbols[A]=null);else if(C(c)&&(C(c.car)||$(c.car)))if(G(">> 3 "+k),k)if(a["..."].symbols[A]){var z=a["..."].symbols[A];$(z)?z=new S(re,new S(c,re)):z=z.append(new S(c,re)),a["..."].symbols[A]=z}else a["..."].symbols[A]=new S(c,re);else G(">> 4"),a["..."].symbols[A]=new S(c,re);else if(G(">> 6"),C(c)){if(G(">> 7 "+k),!C(c.cdr)&&!$(c.cdr)){if(G(">> 7 (b)"),$(f.cdr.cdr))return!1;if(!a["..."].symbols[A])return a["..."].symbols[A]=new S(c.car,re),o(f.cdr.cdr,c.cdr,l)}var te=c.last_pair();if(G({last_pair:te}),!$(te.cdr)){if(G(">> 7 (c)"),$(f.cdr.cdr))return!1;G(">> 7 (d)");var ne=c.clone();return ne.last_pair().cdr=re,a["..."].symbols[A]=ne,o(f.cdr.cdr,te.cdr,l)}if(p.push(A),!a["..."].symbols[A])G(">> 7 (e)"),a["..."].symbols[A]=new S(c,re);else{G(">> 7 (f)");var De=a["..."].symbols[A];a["..."].symbols[A]=De.append(new S(c,re))}G({IIIIII:a["..."].symbols[A]})}else return f.car instanceof x&&C(f.cdr)&&x.is(f.cdr.car,r)?(G(">> 8"),a["..."].symbols[A]=null,o(f.cdr.cdr,c,l)):(G(">> 9"),!1);return!0}else if(C(f.car)){var Ce=we(p);if($(c))return G(">> 10"),a["..."].lists.push(re),!0;G(">> 11");for(var K=c,it=se(se({},l),{},{pattern_names:Ce,ellipsis:!0});C(K);){if(!o(f.car,K.car,it))return!1;K=K.cdr}return!0}if(Array.isArray(f.car)){for(var Ce=we(p),Qe=c,at=se(se({},l),{},{pattern_names:Ce,ellipsis:!0});C(Qe);){if(!o(f.car,Qe.car,at))return!1;Qe=Qe.cdr}return!0}return!1}if(f instanceof x){if(x.is(f,r))throw new Error("syntax: invalid usage of ellipsis");G(">> 12");var ht=f.__name__;if(n.includes(ht))return!0;if(k){var Nt,Zt;G(a["..."].symbols[ht]),(Zt=(Nt=a["..."].symbols)[ht])!==null&&Zt!==void 0||(Nt[ht]=[]),a["..."].symbols[ht].push(c)}else a.symbols[ht]=c;return!0}if(C(f)&&C(c)){G(">> 13"),G({a:13,code:c,pattern:f});var Pe=f.car instanceof x&&f.cdr instanceof x;if(b&&Pe){if(G(">> 13 (a)"),!$(c.cdr))return!1;var Fn=f.car.valueOf(),Yn=f.cdr.valueOf();return a.symbols[Fn]=c.car,a.symbols[Yn]=re,!0}if($(c.cdr)&&(G(">> 13 (b)"),Pe)){if(!o(f.car,c.car,l))return!1;G(">> 14");var Et=f.cdr.valueOf();return Et in a.symbols||(a.symbols[Et]=re),Et=f.car.valueOf(),Et in a.symbols||(a.symbols[Et]=c.car),!0}if(G({pattern:f,code:c}),C(f.cdr)&&C(f.cdr.cdr)&&f.cdr.car instanceof x&&x.is(f.cdr.cdr.car,r)&&C(f.cdr.cdr.cdr)&&!x.is(f.cdr.cdr.cdr.car,r)&&o(f.car,c.car,l)&&o(f.cdr.cdr.cdr,c.cdr,se(se({},l),{},{trailing:!0}))){var An=f.cdr.car.__name__;return G({pattern:f,code:c,name:An}),n.includes(An)||(a["..."].symbols[An]=null),!0}G("recur"),G({pattern:f,code:c});var oa=o(f.car,c.car,l),sa=o(f.cdr,c.cdr,l);if(G({$car_code:c.car,$car_pattern:f.car,car:oa,$cdr_code:c.cdr,$cdr_pattern:f.cdr,cdr:sa}),oa&&sa)return!0}else{if($(f)&&($(c)||c===void 0))return!0;if(C(f.car)&&x.is(f.car.car,r))throw new Error("syntax: invalid usage of ellipsis");return!1}}if(o(e,t))return a}function Lc(e,t){function n(r){if(C(r)){if(!t.length)return r;var i=n(r.car),a=n(r.cdr);return new S(i,a)}else if(r instanceof x){var u=t.find(function(s){return s.gensym===r});return u?x(u.name):r}else return r}return n(e)}function Rc(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.bindings,n=e.expr,r=e.scope,i=e.symbols,a=e.names,u=e.ellipsis,s={};function o(b){return b instanceof x?!0:["string","symbol"].includes(ge(b))}function f(b){if(!o(b)){var g=ke(b);throw new Error("syntax: internal error, need symbol got ".concat(g))}var p=b.valueOf();if(p===u)throw new Error("syntax: internal error, ellipis not transformed");var v=ge(p);if(["string","symbol"].includes(v)){if(p in t.symbols)return t.symbols[p];if(v==="string"&&p.match(/\./)){var h=p.split("."),F=h[0];if(F in t.symbols)return S.fromArray([x("."),t.symbols[F]].concat(h.slice(1).map(function(O){return Z(O)})))}}return i.includes(p)?b:c(p,b)}function c(b,g){if(!s[b]){var p=r.ref(b);if(ge(b)==="symbol"&&!p&&(b=g.literal()),s[b])return s[b];var v=Hi(b);if(p){var h=r.get(b);r.set(v,h)}else{var F=r.get(b,{throwError:!1});typeof F<"u"&&r.set(v,F)}if(a.push({name:b,gensym:v}),s[b]=v,typeof b=="string"&&b.match(/\./)){var O=b.split(".").filter(Boolean),B=mr(O),V=B[0],J=B.slice(1);s[V]&&Ct(v,"__object__",[s[V]].concat(we(J)))}}return s[b]}function l(b,g,p){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},h=p.nested;if(G({bindings:g,expr:b}),Array.isArray(b)&&!b.length)return b;if(b instanceof x){var F=b.valueOf();if(Vi(b)&&g[F],G("[t 1"),g[F]){if(C(g[F])){var O=g[F],B=O.car,V=O.cdr;if(h){var J=B.car,Y=B.cdr;return $(Y)||v(F,new S(Y,re)),J}return $(V)||v(F,V),B}else if(g[F]instanceof Array)return v(F,g[F].slice(1)),g[F][0]}return f(b)}var R=Array.isArray(b);if(C(b)||R){var W=R?b[0]:b.car,ce=R?b[1]:C(b.cdr)&&b.cdr.car;if(W instanceof x&&x.is(ce,u)){R?b.slice(2):b.cdr.cdr,G("[t 2");var y=W.valueOf(),N=g[y];if(N===null)return;if(y in g)if(G({name:y,binding:g[y]}),C(N)){G("[t 2 Pair "+h);var P=N.car,M=N.cdr,T=R?b.slice(2):b.cdr.cdr;if(h){if($(M)||(G("|| next 1"),v(y,M)),R&&T.length||!$(T)&&!R){var Q=l(T,g,p,v);if(R)return P.concat(Q);if(C(P))return P.append(Q);G("UNKNOWN")}return P}else{if(C(P))return $(P.cdr)||(G("|| next 2"),v(y,new S(P.cdr,M))),new Je(P.car);if($(M))return P;var j=b.last_pair();if(j.cdr instanceof x)return G("|| next 3"),v(y,N.last_pair()),P}}else if(N instanceof Array){if(G("[t 2 Array "+h),h)return v(y,N.slice(1)),S.fromArray(N);var D=N.slice(1);return D.length&&v(y,D),N[0]}else return N}G("[t 3 recur ",b);var A=R?b.slice(1):b.cdr,z=l(W,g,p,v),te=l(A,g,p,v);return G({head:z,rest:te}),R?[z].concat(te):new S(z,te)}return b}function m(b,g){var p=Object.values(b),v=Object.getOwnPropertySymbols(b);return v.length&&p.push.apply(p,we(v.map(function(h){return b[h]}))),p.length&&p.every(function(h){return h===null?!g:C(h)||$(h)||Array.isArray(h)&&h.length})}function k(b){return Object.keys(b).concat(Object.getOwnPropertySymbols(b))}function L(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=g.disabled;G("traverse>> ",b);var v=Array.isArray(b);if(v&&b.length===0)return b;if(C(b)||v){G(">> 0");var h=v?b[0]:b.car,F,O;if(v?(F=b[1],O=b.slice(2)):C(b.cdr)&&(F=b.cdr.car,O=b.cdr.cdr),G({first:h,second:F,rest_second:O}),!p&&C(h)&&x.is(h.car,u))return new S(h.cdr.car,L(b.cdr));if(F&&x.is(F,u)&&!p){G(">> 1");var B=t["..."].symbols,V=Object.values(B);if(V.length&&V.every(function(ht){return ht===null}))return G(">>> 1 (a)"),L(O,{disabled:p});var J=k(B),Y=h instanceof x&&x.is(O.car,u);if(C(h)||Y){if(G(">>> 1 (b)"),$(t["..."].lists[0]))return Y?(G(O),re):L(O,{disabled:p});var R=h;Y&&(G(">>> 1 (c)"),R=new S(h,new S(F,re))),G(">> 2");var W;if(J.length){G(">> 2 (a)");var ce=se({},B);W=v?[]:re;for(var y=function(){if(G({bind:ce}),!m(ce))return 1;var Nt={},Zt=function(Et,An){Nt[Et]=An},Pe=l(R,ce,{nested:!0},Zt);if(Pe!==void 0)if(Pe instanceof Je&&(Pe=Pe.valueOf()),Y)if(v)if(Array.isArray(Pe)){var Fn;(Fn=W).push.apply(Fn,we(Pe))}else G("ZONK {1}");else $(W)?W=Pe:W=W.append(Pe);else v?W.push(Pe):W=new S(Pe,W);ce=Nt};!y(););if(!$(W)&&!Y&&!v&&(W=W.reverse()),v){if(O){G({rest_second:O,expr:b});var N=L(O,{disabled:p});return W.concat(N)}return W}if(!$(b.cdr.cdr)&&!x.is(b.cdr.cdr.car,u)){var P=L(b.cdr.cdr,{disabled:p});return W.append(P)}return W}else{G(">> 3");var M=l(h,B,{nested:!0});return M?(M instanceof Je&&(M=M.valueOf()),new S(M,re)):re}}else if(h instanceof x){G(">> 4"),x.is(O.car,u)?G(">> 4 (a)"):G(">> 4 (b)");var T=h.__name__,Q=zt({},T,B[T]);G({bind:Q});for(var j=B[T]===null,D=v?[]:re,A=function(){if(!m(Q,!0))return G({bind:Q}),1;var Nt={},Zt=function(Yn,Et){Nt[Yn]=Et},Pe=l(b,Q,{nested:!1},Zt);G({value:Pe}),typeof Pe<"u"&&(Pe instanceof Je&&(Pe=Pe.valueOf()),v?D.push(Pe):D=new S(Pe,D)),Q=Nt};!A(););if(!$(D)&&!v&&(D=D.reverse()),C(b.cdr)&&(C(b.cdr.cdr)||b.cdr.cdr instanceof x)){var z=L(b.cdr.cdr,{disabled:p});if(G({node:z}),j)return z;$(D)?D=z:D.append(z),G({result:D,node:z})}return G("<<<< 2"),G({result:D}),D}}var te=L(h,{disabled:p}),ne,De;if(h instanceof x){var Ce=r.get(h,{throwError:!1});De=Ce instanceof fe&&Ce.__name__==="syntax-rules"}return De?(b.cdr.car instanceof x?ne=new S(L(b.cdr.car,{disabled:p}),new S(b.cdr.cdr.car,L(b.cdr.cdr.cdr,{disabled:p}))):ne=new S(b.cdr.car,L(b.cdr.cdr,{disabled:p})),G("REST >>>> ",ne)):ne=L(b.cdr,{disabled:p}),G({a:!0,car:He(b.car),cdr:He(b.cdr),head:He(te),rest:He(ne)}),new S(te,ne)}if(b instanceof x){if(p&&x.is(b,u))return b;var K=Object.keys(t["..."].symbols),it=b.literal();if(K.includes(it)){var Qe="missing ellipsis symbol next to name `".concat(it,"'");throw new Error("syntax-rules: ".concat(Qe))}var at=f(b);if(typeof at<"u")return at}return b}return L(n,{})}function Ut(e){return Zi(e)||$(e)||e===null}function $(e){return e===re}function pe(e){return typeof e=="function"&&typeof e.bind=="function"}function Wu(e){return Ru.includes(e)}function jn(e){return e===!1||e===null}function Ju(e){return typeof e=="string"}function Ht(e){return e&&e[io]}function Mc(e){return e&&e[Yc]}function Ku(e){return Ht(e)&&!e[ro]&&!Mc(e)&&!eo(e)}function Lr(e){var t=Symbol.for("__native__");return pe(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===!0||!e.name.match(/^bound /)&&!e[t])}function cr(e){return e&&ge(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor=="function"&&e.constructor.prototype===e}function Ki(e){return e instanceof yo}function Ya(e){return e instanceof zr}function vn(e){return e instanceof Ur}function C(e){return e instanceof S}function Qi(e){return e instanceof xe}function Wa(e){return pe(e)||Ki(e)||vn(e)||qc(e)}function qc(e){return e instanceof fe||e instanceof mn}function Xe(e){return e instanceof Le?!1:e instanceof Promise?!0:!!e&&pe(e.then)}function Zi(e){return typeof e>"u"}function Uc(e){return Object.getPrototypeOf(e)}function Ar(e,t){if(Ja(e,t)||Ja(Uc(e),t))return pe(e[t])}function Qu(e){return!e||ge(e)!=="object"?!1:e.__instance__?(e.__instance__=!1,e.__instance__):!1}function zc(e){var t=ge(e);return["string","function"].includes(t)||ge(e)==="symbol"||e instanceof Le||e instanceof x||e instanceof _||e instanceof Z||e instanceof RegExp}function Zu(e){return e&&(e instanceof _||e instanceof Z||e instanceof de)}function Ja(e,t){return e===null?!1:ge(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function Xi(e){switch(ge(e)){case"string":return Z(e);case"bigint":return _(e);case"number":return Number.isNaN(e)?Or:_(e)}return e}function Xu(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e),i={};return n.concat(r).forEach(function(a){var u=t(e[a]);i[a]=u}),i}function Gt(e){var t=[Z,_,de].some(function(n){return e instanceof n});return t?e.valueOf():e instanceof Array?e.map(Gt):(e instanceof Le&&delete e.then,lt(e)?Xu(e,Gt):e)}function kr(e,t){return C(e)?(e.mark_cycles(),We(e)):pe(e)&&t?$c(e,t):Xi(e)}function tt(e){return ea(e)?e[no]:e}function $c(e,t){if(e[Symbol.for("__bound__")])return e;var n=e.bind(t),r=Object.getOwnPropertyNames(e),i=It(r),a;try{for(i.s();!(a=i.n()).done;){var u=a.value;if(Jc(u))try{n[u]=e[u]}catch{}}}catch(s){i.e(s)}finally{i.f()}return Ct(n,"__fn__",e),Ct(n,"__context__",t),Ct(n,"__bound__",!0),Lr(e)&&Ct(n,"__native__",!0),lt(t)&&Ht(e)&&Ct(n,"__method__",!0),n.valueOf=function(){return e},n}function Vc(e){return ea(e)&&e[Symbol.for("__context__")]===Object}function ea(e){return!!(pe(e)&&e[no])}function Hc(e){if(pe(e)){var t=e[to];if(t&&(t===bt||t.constructor&&t.constructor.__class__))return!0}return!1}function fr(e){return e instanceof Ke||e instanceof Ge}function eo(e){return!!(pe(e)&&fr(e[to]))}function Jc(e){return!Wc.includes(e)}function _t(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function Ct(e,t,n){Object.defineProperty(e,Symbol.for(t),{get:function(){return n},set:function(){},configurable:!1,enumerable:!1})}function Kc(e,t){try{return Object.defineProperty(e,"length",{get:function(){return t}}),e}catch{var n=new Array(t).fill(0).map(function(a,u){return"a"+u}).join(","),r=new Function("f","return function(".concat(n,`) {
                return f.apply(this, arguments);
            };`));return r(e)}}function er(e){var t;switch(e){case Symbol.for("letrec"):t="letrec";break;case Symbol.for("let"):t="let";break;case Symbol.for("let*"):t="let*";break;default:throw new Error("Invalid let_macro value")}return fe.defmacro(t,function(n,r){var i=r.dynamic_env,a=r.error,u=r.macro_expand,s=r.use_dynamic,o;if(n.car instanceof x){if(!(C(n.cdr.car)||$(n.cdr.car)))throw new Error("let require list of pairs");var f;return $(n.cdr.car)?(o=re,f=re):(f=n.cdr.car.map(function(p){return p.car}),o=n.cdr.car.map(function(p){return p.cdr.car})),new S(S.fromArray([x("letrec"),[[n.car,S(x("lambda"),S(f,n.cdr.cdr))]],n.car]),o)}else if(u)return;var c=this;o=H.get("list->array")(n.car);var l=c.inherit(t),m,k;t==="let*"?k=l:t==="let"&&(m=[]);var L=0;function b(){var p=gi([l],n.cdr);return ie(p,{env:l,dynamic_env:l,use_dynamic:s,error:a})}function g(p){if(p in l.__env__)throw new Error("Duplicated let variable ".concat(p))}return function p(){var v=o[L++];if(i=t==="let*"?l:c,v){t==="let"?k=c:t==="letrec"&&(k=l);var R=ie(v.cdr.car,{env:k,dynamic_env:i,use_dynamic:s,error:a});return t==="let*"&&(k=l=k.inherit("let*["+L+"]")),m?(m.push({name:v.car,value:R}),p()):_e(R,function(W){return l.set(v.car,W),p()})}else{if(m&&m.length){var h=m.map(function(W){return W.value}),F=h.filter(Xe);if(F.length)return wn(h).then(function(W){for(var ce=0,y=W.length;ce<y;++ce){var N=m[ce].name;g(N),l.set(N,W[ce])}}).then(b);var O=It(m),B;try{for(O.s();!(B=O.n()).done;){var V=B.value,J=V.name,Y=V.value;g(J),l.set(J,Y)}}catch(W){O.e(W)}finally{O.f()}}return b()}}()})}function Qc(e,t){return new fe(e,function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.use_dynamic,a=r.error,u=this,s=this,o=[],f=n;C(f);)o.push(ie(f.car,{env:u,dynamic_env:s,use_dynamic:i,error:a})),f=f.cdr;var c=o.filter(Xe).length;return c?wn(o).then(t.bind(this)):t.call(this,o)})}function Zc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(i){U("",i,"number")}),e.apply(void 0,n)}function ao(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i,a){U("pipe",i,"function",a+1)}),function(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n.reduce(function(s,o){return[o.apply(e,s)]},a)[0]}}function uo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(r,i){U("compose",r,"function",i+1)}),ao.apply(void 0,we(t.reverse()))}function Ka(e,t){var n=this;return function r(i,a){U(e,i,"function");for(var u=arguments.length,s=new Array(u>2?u-2:0),o=2;o<u;o++)s[o-2]=arguments[o];return s.some(Ut)?typeof a=="number"?_(a):a:t.call.apply(t,[n,r,i,a].concat(s))}}function oo(e,t){return Xc(e+1,Rr(Zc,t))}function Qa(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t!==null&&(r=[t].concat(we(r))),r.reduce(lr(e))}}function Rr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];U("curry",e,"function");var i=e.length;return function(){var a=this,u=n.slice(),s=function(){return function(){for(var o=arguments.length,f=new Array(o),c=0;c<o;c++)f[c]=arguments[c];return u=u.concat(f),u.length>=i?e.apply(a,u):s}}();return s.apply(void 0,arguments)}}function Xc(e,t){return U("limit",t,"function",2),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,we(r.slice(0,e)))}}function de(e){if(typeof this<"u"&&!(this instanceof de)||typeof this>"u")return new de(e);e instanceof Z&&(e=e.valueOf());var t;if(Array.from(e).length>1)if(e=e.toLowerCase(),de.__names__[e])t=e,e=de.__names__[e];else throw new Error("Internal: Unknown named character");else t=de.__rev_names__[e];_t(this,"__char__",e),t&&_t(this,"__name__",t)}function Z(e){if(typeof this<"u"&&!(this instanceof Z)||typeof this>"u")return new Z(e);e instanceof Array?this.__string__=e.map(function(t,n){return U("LString",t,"character",n+1),t.toString()}).join(""):this.__string__=e.valueOf()}function _(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e instanceof _)return e;if(typeof this<"u"&&!(this instanceof _)||typeof this>"u")return new _(e,t);if(typeof e>"u")throw new Error("Invalid LNumber constructor call");var n=_.getType(e);if(_.types[n])return _.types[n](e,t);var r=e instanceof Array&&Z.isString(e[0])&&_.isNumber(e[1]);if(e instanceof _)return _(e.value);if(!_.isNumber(e)&&!r)throw new Error("You can't create LNumber from ".concat(ke(e)));e===null&&(e=0);var i;if(r){var a=e,u=ye(a,2),s=u[0],o=u[1];s instanceof Z&&(s=s.valueOf()),o instanceof _&&(o=o.valueOf());var f=s.match(/^([+-])/),c=!1;f&&(s=s.replace(/^[+-]/,""),f[1]==="-"&&(c=!0))}if(Number.isNaN(e))return ue(e);if(r&&Number.isNaN(parseInt(s,o)))return Or;if(typeof BigInt<"u"){if(typeof e!="bigint"){if(r){var l;switch(o){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l>"u"){var m=BigInt(o);i=we(s).map(function(k,L){return BigInt(parseInt(k,o))*Mr(m,BigInt(L))}).reduce(function(k,L){return k+L})}else i=BigInt(l+s)}else i=BigInt(e);c&&(i*=BigInt(-1))}else i=e;return Ee(i,!0)}else{if(typeof yt<"u"&&!(e instanceof yt))return e instanceof Array?Ee(dr(yt,we(e))):Ee(new yt(e));r?this.constant(parseInt(s,o),"integer"):this.constant(e,"integer")}}function Rt(e,t,n,r){return _r[e][t](n,r)}function oe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof this<"u"&&!(this instanceof oe)||typeof this>"u")return new oe(e,t);if(e instanceof oe)return oe({im:e.__im__,re:e.__re__});if(_.isNumber(e)&&t){if(!t)return Number(e)}else if(!_.isComplex(e)){var n="Invalid constructor call for LComplex expect &(:im <num> :re <num>) object but got ".concat(toString(e));throw new Error(n)}var r=e.im instanceof _?e.im:_(e.im),i=e.re instanceof _?e.re:_(e.re);this.constant(r,i)}function ue(e){if(typeof this<"u"&&!(this instanceof ue)||typeof this>"u")return new ue(e);if(!_.isNumber(e))throw new Error("Invalid constructor call for LFloat");if(e instanceof _)return ue(e.valueOf());typeof e=="number"&&(Object.is(e,-0)&&Object.defineProperty(this,"_minus",{value:!0}),this.constant(e,"float"))}function co(e){return function(t){var n=function(a,u,s){var o=function(c,l){return l<a?c:o(l,c%l)};return Number.isNaN(u)||Number.isNaN(s)?NaN:o(Math.abs(u),Math.abs(s))},r=n(e||1e-4,1,t);return le({num:Math.floor(t/r),denom:Math.floor(1/r)})}}function tf(e,t){var n=e.sub(t),r=e.add(t),i;return n.cmp(r)>0?i=pr(r,n):r.cmp(n)<=0?i=n:n.cmp(0)>0?i=pr(n,r):t.cmp(0)<0?i=_(pr(r.sub(),n.sub())).sub():i=_(0),_.isFloat(t)||_.isFloat(e)?ue(i):i}function pr(e,t){var n=_(e).floor(),r=_(t).floor();if(e.cmp(n)<1)return n;if(n.cmp(r)===0){var i=_(1).div(t.sub(r)),a=_(1).div(e.sub(n));return n.add(_(1).div(pr(i,a)))}else return n.add(_(1))}function le(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof this<"u"&&!(this instanceof le)||typeof this>"u")return new le(e,t);if(!_.isRational(e))throw new Error("Invalid constructor call for LRational");var n,r;if(e instanceof le?(n=_(e.__num__),r=_(e.__denom__)):(n=_(e.num),r=_(e.denom)),!t&&r.cmp(0)!==0){var i=n.op("%",r).cmp(0)===0;if(i)return _(n.div(r))}this.constant(n,r)}function Ee(e,t){if(typeof this<"u"&&!(this instanceof Ee)||typeof this>"u")return new Ee(e,t);if(e instanceof Ee)return Ee(e.__value__,e._native);if(!_.isBigInteger(e))throw new Error("Invalid constructor call for LBigInteger");this.constant(e,"bigint"),Object.defineProperty(this,"_native",{value:t})}function Ke(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H;if(typeof this<"u"&&!(this instanceof Ke)||typeof this>"u")return new Ke(e);U("InputPort",e,"function"),X(this,"__type__",xn);var r;Object.defineProperty(this,"__parser__",{enumerable:!0,get:function(){return r},set:function(a){U("InputPort::__parser__",a,"parser"),r=a}}),this._read=e,this._with_parser=this._with_init_parser.bind(this,Oe(ae.mark(function i(){var a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.char_ready()){s.next=6;break}return s.next=3,t._read();case 3:a=s.sent,r=new Vt({env:n}),r.prepare(a);case 6:return s.abrupt("return",t.__parser__);case 7:case"end":return s.stop()}},i)}))),this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==je},this._make_defaults()}function Ge(e){if(typeof this<"u"&&!(this instanceof Ge)||typeof this>"u")return new Ge(e);U("OutputPort",e,"function"),X(this,"__type__",xn),this.write=e}function Bt(e){var t=this;if(typeof this<"u"&&!(this instanceof Bt)||typeof this>"u")return new Bt(e);U("OutputStringPort",e,"function"),X(this,"__type__",xn),X(this,"__buffer__",[]),this.write=function(n){Z.isString(n)?n=n.valueOf():n=e(n),t.__buffer__.push(n)}}function st(e,t){var n=this;if(typeof this<"u"&&!(this instanceof st)||typeof this>"u")return new st(e,t);U("OutputFilePort",e,"string"),X(this,"__filename__",e),X(this,"_fd",t.valueOf(),{hidden:!0}),X(this,"__type__",xn),this.write=function(r){Z.isString(r)?r=r.valueOf():r=He(r),n.fs().write(n._fd,r,function(i){if(i)throw i})}}function pt(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H;if(typeof this<"u"&&!(this instanceof pt)||typeof this>"u")return new pt(e);U("InputStringPort",e,"string"),e=e.valueOf(),this._with_parser=this._with_init_parser.bind(this,function(){return t.__parser__||(t.__parser__=new Vt({env:n}),t.__parser__.prepare(e)),t.__parser__}),X(this,"__type__",xn),this._make_defaults()}function Yt(e){if(typeof this<"u"&&!(this instanceof Yt)||typeof this>"u")return new Yt(e);this._with_parser=this._with_init_parser.bind(this,function(){return e}),X(this,"__type__",xn),this._make_defaults()}function et(e){if(typeof this<"u"&&!(this instanceof et)||typeof this>"u")return new et(e);U("InputByteVectorPort",e,"uint8array"),X(this,"__vector__",e),X(this,"__type__",qr);var t=0;Object.defineProperty(this,"__index__",{enumerable:!0,get:function(){return t},set:function(r){if(U("InputByteVectorPort::__index__",r,"number"),r instanceof _&&(r=r.valueOf()),typeof r=="bigint"&&(r=Number(r)),Math.floor(r)!==r)throw new Error("InputByteVectorPort::__index__ value is not integer");t=r}})}function ct(){if(typeof this<"u"&&!(this instanceof ct)||typeof this>"u")return new ct;X(this,"__type__",qr),X(this,"_buffer",[],{hidden:!0}),this.write=function(e){if(U("write",e,["number","uint8array"]),_.isNumber(e))this._buffer.push(e.valueOf());else{var t;(t=this._buffer).push.apply(t,we(Array.from(e)))}},Object.defineProperty(this,"__buffer__",{enumerable:!0,get:function(){return Uint8Array.from(this._buffer)}})}function Wt(e,t){if(typeof this<"u"&&!(this instanceof Wt)||typeof this>"u")return new Wt(e,t);pt.call(this,e),U("InputFilePort",t,"string"),X(this,"__filename__",t)}function an(e,t){if(typeof this<"u"&&!(this instanceof an)||typeof this>"u")return new an(e,t);et.call(this,e),U("InputBinaryFilePort",t,"string"),X(this,"__filename__",t)}function jt(e,t){var n=this;if(typeof this<"u"&&!(this instanceof jt)||typeof this>"u")return new jt(e,t);U("OutputBinaryFilePort",e,"string"),X(this,"__filename__",e),X(this,"_fd",t.valueOf(),{hidden:!0}),X(this,"__type__",qr);var r;this.write=function(i){U("write",i,["number","uint8array"]);var a;return r||(r=n.internal("fs")),_.isNumber(i)?a=new Uint8Array([i.valueOf()]):a=new Uint8Array(Array.from(i)),new Promise(function(u,s){r.write(n._fd,a,function(o){o?s(o):u()})})}}function ta(){}function un(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.stderr,i=n.stdin,a=n.stdout,u=n.command_line,s=u===void 0?null:u,o=gn(n,Bs);if(typeof this<"u"&&!(this instanceof un)||typeof this>"u")return new un(e,se({stdin:i,stdout:a,stderr:r,command_line:s},o));typeof e>"u"&&(e="anonymous"),this.__env__=Be.inherit(e,o),this.__parser__=new Vt({env:this.__env__}),this.__env__.set("parent.frame",E("parent.frame",function(){return t.__env__},H.__env__["parent.frame"].__doc__));var f="**interaction-environment-defaults**";this.set(f,Gu(o).concat(f));var c=lo.inherit("internal-".concat(e));fr(i)&&c.set("stdin",i),fr(r)&&c.set("stderr",r),fr(a)&&c.set("stdout",a),c.set("command-line",s),_o(this.__env__,c)}function $n(e,t){this.name="LipsError",this.message=e,this.args=t,this.stack=new Error().stack}function xe(e,t,n){arguments.length===1&&(ge(arguments[0])==="object"?(e=arguments[0],t=null):typeof arguments[0]=="string"&&(e={},t=null,n=arguments[0])),this.__docs__=new Map,this.__env__=e,this.__parent__=t,this.__name__=n||"anonymous"}function Je(e){if(typeof this<"u"&&!(this instanceof Je)||typeof this>"u")return new Je(e);this.value=e}function Jt(e){if(e.length){if(e.length===1)return e[0];if(typeof this<"u"&&!(this instanceof Jt)||typeof this>"u")return new Jt(e);this.__values__=e}}function We(e){return Xe(e)?e.then(We):((C(e)||e instanceof x)&&(e[gt]=!0),e)}function fo(e){return rf(e,"**internal-env**")}function _n(e,t){var n=fo(e);return n.get(t)}function rf(e,t){var n=e.get("**interaction-environment**");return n.get(t)}function _o(e,t){e.constant("**internal-env**",t),e.doc("**internal-env**",`**internal-env**

         Constant used to hide stdin, stdout and stderr so they don't interfere
         with variables with the same name. Constants are an internal type
         of variable that can't be redefined, defining a variable with the same name
         will throw an error.`),H.set("**interaction-environment**",e)}function af(e){Be.get("**internal-env**").set("fs",e)}function po(e){if(e.length===1)return e[0];for(var t=[],n=po(e.slice(1)),r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push(e[0][i]+n[r]);return t}function uf(e,t,n){for(var r=[],i=t;i<=n;++i){for(var a=[],u=0;u<i;++u)a.push(e);r=r.concat(po(a))}return r}function of(e,t){for(var n=e.split(qt.sep).filter(Boolean),r=n.length;r--;){var i,a=(i=qt).join.apply(i,["/"].concat(we(n.slice(0,r+1))));if(t(a))return a}}function sf(e){return of(e,function(t){return Eu.existsSync(qt.join(t,"node_modules"))})}function na(){return typeof global<"u"&&global.global===global}function cf(){return Fi.apply(this,arguments)}function Fi(){return Fi=Oe(ae.mark(function e(){var t,n,r,i,a;return ae.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,import("module");case 2:return t=s.sent,n=t.createRequire,Mt=n(import.meta.url),s.next=7,import("fs");case 7:return Eu=s.sent,s.next=10,import("path");case 10:qt=s.sent,H.set("global",global),H.set("self",global),H.set("window",void 0),r=new URL(import.meta.url),i=qt.dirname(r.pathname),a=qt.basename(r.pathname),H.set("__dirname",i),H.set("__filename",a),H.set("require.resolve",E("require.resolve",function(o){U("require.resolve",o,"string");var f=o.valueOf();return Mt.resolve(f)},`(require.resolve path)

        Returns the path relative to the current module.

        Only available when LIPS is running under Node.js.`)),H.set("require",E("require",function(o){U("require",o,"string"),o=o.valueOf();var f=process.cwd(),c;try{if(o.match(/^\s*\./))c=Mt(qt.join(f,o));else{var l=sf(f);l?c=Mt(qt.join(l,"node_modules",o)):c=Mt(o)}}catch{c=Mt(o)}return kr(c,global)},`(require module)

        Function used inside Node.js to import a module.`)),process.on("unhandledRejection",function(o,f){o instanceof Ln&&f.catch(ho)});case 22:case"end":return s.stop()}},e)})),Fi.apply(this,arguments)}function $t(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=e?" in expression `".concat(e,"`"):"";if(r!==null&&(i+=" (argument ".concat(r,")")),pe(n))return"Invalid type: got ".concat(t).concat(i);if(n instanceof Array)if(n.length===1){var a=n[0].toLowerCase();n="a"+("aeiou".includes(a)?"n ":" ")+n[0]}else n=new Intl.ListFormat("en",{style:"long",type:"disjunction"}).format(n);return"Expecting ".concat(n," got ").concat(t).concat(i)}function mo(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;U(e,t,"number",r);var i=t.__type__,a;if(C(n)&&(n=n.to_array()),n instanceof Array&&(n=n.map(function(u){return u.valueOf()})),n instanceof Array?(n=n.map(function(u){return u.valueOf().toLowerCase()}),n.includes(i)&&(a=!0)):n=n.valueOf().toLowerCase(),!a&&i!==n)throw new Error($t(e,i,n,r))}function tr(e,t,n){t.forEach(function(r,i){mo(e,r,n,i+1)})}function Xt(e,t,n){t.forEach(function(r,i){U(e,r,n,i+1)})}function nr(e,t,n){if(U(e,t,n),t.__type__===qr)throw new Error($t(e,"binary-port","textual-port"))}function U(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;e=e.valueOf();var i=ke(t).toLowerCase();if(pe(n)){if(!n(t))throw new Error($t(e,i,n,r));return}var a=!1;if(C(n)&&(n=n.to_array()),n instanceof Array&&(n=n.map(function(u){return u.valueOf()})),n instanceof Array?(n=n.map(function(u){return u.valueOf().toLowerCase()}),n.includes(i)&&(a=!0)):n=n.valueOf().toLowerCase(),!a&&i!==n)throw new Error($t(e,i,n,r))}function ff(e){var t=new WeakMap;return function(n){var r=t.get(n);return r||(r=e(n)),r}}function ke(e){var t=qs.get(e);if(t)return t;if(ge(e)==="object"){for(var n=0,r=Object.entries(Ms);n<r.length;n++){var i=ye(r[n],2),a=i[0],u=i[1];if(e instanceof u)return a}if(Qu(e))return pe(e.typeOf)?e.typeOf():"instance";if(e.constructor){if(e.constructor.__class__)return e.constructor.__class__;if(e.constructor===Object){if(Ar(e,Symbol.iterator))return"iterator";if(Ar(e,Symbol.asyncIterator))return"async-iterator"}return e.constructor.name===""?"object":e.constructor.name.toLowerCase()}}return e===void 0?"void":ge(e)}function En(e){var t=[];if(n(e),t.length)return a(e);return e;function n(u){Xe(u)?t.push(u):C(u)?(u.have_cycles("car")||n(u.car),u.have_cycles("cdr")||n(u.cdr)):u instanceof Array&&u.forEach(n)}function r(u){return i.apply(this,arguments)}function i(){return i=Oe(ae.mark(function u(s){var o;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=S,!s.have_cycles("car")){c.next=5;break}c.t1=s.car,c.next=8;break;case 5:return c.next=7,a(s.car);case 7:c.t1=c.sent;case 8:if(c.t2=c.t1,!s.have_cycles("cdr")){c.next=13;break}c.t3=s.cdr,c.next=16;break;case 13:return c.next=15,a(s.cdr);case 15:c.t3=c.sent;case 16:return c.t4=c.t3,o=new c.t0(c.t2,c.t4),s[gt]&&(o[gt]=!0),c.abrupt("return",o);case 20:case"end":return c.stop()}},u)})),i.apply(this,arguments)}function a(u){return u instanceof Array?wn(u.map(a)):C(u)&&t.length?r(u):u}}function lf(e,t){var n=t.use_dynamic,r=gn(t,Is),i=[],a=e;function u(){return i}return function s(){if(C(a)){var o=ie(a.car,se({use_dynamic:n},r));return n&&(o=_e(o,function(f){return Lr(f)?f.bind(dynamic_env):f})),_e(En(o),function(f){if(i.push(f),a.have_cycles("cdr"))throw new Error("Invalid expression: Can't evaluate cycle");return a=a.cdr,s()})}else{if($(a))return u();throw new Error("Syntax Error: improper list found in apply")}}()}function nu(e,t,n){var r=e.invoke(t,n);return _e(En(r),function(i){return C(i)&&i.mark_cycles(),We(i)})}function _f(e,t,n){function r(a){return C(a)?(a.mark_cycles(),a):We(a)}var i=e.invoke(t,n);return _e(En(i),function(u){return!u||u&&u[gt]||zc(u)?u:_e(ie(u,n),r)},function(a){throw a})}function vo(e,t){if(ea(e)&&!Vc(e)&&(!Hc(e)||eo(e))&&(t=t.map(Gt)),!Ku(e)&&t.some(ti)&&!ti(e)&&!Ec(e)){for(var n=[],r=t.length,i=function(){var s=t[r];ti(s)?(a=function(){for(var f=arguments.length,c=new Array(f),l=0;l<f;l++)c[l]=arguments[l];return _e(s.apply(this,c),Gt)},Ct(a,"__bound__",!0),Ct(a,"__fn__",s),a.prototype=s.prototype,n[r]=a):n[r]=s},a;r--;)i();t=n}return t}function dn(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.env,i=n.dynamic_env,a=n.use_dynamic,u=r?.new_frame(e,t),s=i?.new_frame(e,t),o=new zr({env:u,use_dynamic:a,dynamic_env:s});return En(e.apply(o,t))}function pf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.env,i=n.dynamic_env,a=n.use_dynamic,u=n.error,s=u===void 0?function(){}:u;return t=lf(t,{env:r,dynamic_env:i,error:s,use_dynamic:a}),_e(t,function(o){Ku(e)&&(e=tt(e)),o=vo(e,o);var f=o.slice(),c=dn(e,f,{env:r,dynamic_env:i,use_dynamic:a});return _e(c,function(l){return C(l)?(l.mark_cycles(),We(l)):Xi(l)},s)})}function hf(e,t){var n=e.get(t.__name__,{throwError:!1});if(vn(n)&&n!==t)return n;for(var r=Be.get("**interaction-environment**");;){var i=e.get("parent.frame",{throwError:!1});if(e=i(0),e===r)break;if(n=e.get(t.__name__,{throwError:!1}),vn(n)&&n!==t)return n}return t}function ie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.env,r=t.dynamic_env,i=t.use_dynamic,a=t.error,u=a===void 0?ho:a,s=gn(t,Ps);return function(o){try{Qi(r)||(r=n===!0?Be:n||Be),i?n=r:n===!0?n=Be:n=n||H;var f={env:n,dynamic_env:r,use_dynamic:i,error:u},c;if(Ut(e))return e;if(e instanceof x)return n.get(e);if(!C(e))return e;var l=e.car,o=e.cdr;if(C(l)){if(c=En(ie(l,f)),Xe(c))return c.then(function(g){if(!Wa(g))throw new Error(ke(g)+" "+n.get("repr")(g)+" is not callable while evaluating "+e.toString());return ie(new S(g,e.cdr),f)});if(!Wa(c))throw new Error(ke(c)+" "+n.get("repr")(c)+" is not callable while evaluating "+e.toString())}l instanceof x?c=n.get(l):pe(l)&&(c=l);var m;if(c instanceof Me)m=nu(c,e,f);else if(c instanceof fe)m=_f(c,o,f);else if(pe(c))m=pf(c,o,f);else if(c instanceof mn)m=nu(c._syntax,e,f);else if(vn(c)){var k=hf(r,c);if(Ut(e.cdr))m=k.invoke();else return _e(ie(e.cdr.car,f),function(g){k.__value__=g})}else if(Ki(c))m=c.invoke();else{if(C(e))throw c=l&&l.toString(),new Error("".concat(ke(l)," ").concat(c," is not a function"));return e}var L=n.get(Symbol.for("__promise__"),{throwError:!1});return L===!0&&Xe(m)?(m=m.then(function(g){return C(g)&&!c[gt]?ie(g,f):g}),new Le(m)):m}catch(b){u&&u.call(n,b,e)}}(s)}function ru(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.env,r=t.dynamic_env,i=t.use_dynamic;return ie(e,{env:n,dynamic_env:r,use_dynamic:i,error:function(u,s){if(u&&u.message){if(u.message.match(/^Error:/)){var o=/^(Error:)\s*([^:]+:\s*)/;u.message=u.message.replace(o,"$1 $2")}s&&(u.__code__ instanceof Array||(u.__code__=[]),u.__code__.push(s.toString(!0)))}if(!(u instanceof Ln))throw u}})}function go(e){return function(){var t=Oe(function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.env,u=i.dynamic_env,s=i.use_dynamic;return ae.mark(function o(){var f,c,l,m,k,L,b,g,p;return ae.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(Qi(u)||(u=a===!0?Be:a||Be),a===!0?a=Be:a=a||Be,f=[],!C(r)){h.next=8;break}return h.next=6,ru(r,{env:a,dynamic_env:u,use_dynamic:s});case 6:return h.t0=h.sent,h.abrupt("return",[h.t0]);case 8:c=Array.isArray(r)?r:Gi(r),l=!1,m=!1,h.prev=11,L=xu(c);case 13:return h.next=15,L.next();case 15:if(!(l=!(b=h.sent).done)){h.next=24;break}return g=b.value,h.next=19,ru(g,{env:a,dynamic_env:u,use_dynamic:s});case 19:p=h.sent,f.push(e(g,p));case 21:l=!1,h.next=13;break;case 24:h.next=30;break;case 26:h.prev=26,h.t1=h.catch(11),m=!0,k=h.t1;case 30:if(h.prev=30,h.prev=31,!(l&&L.return!=null)){h.next=35;break}return h.next=35,L.return();case 35:if(h.prev=35,!m){h.next=38;break}throw k;case 38:return h.finish(35);case 39:return h.finish(30);case 40:return h.abrupt("return",f);case 41:case"end":return h.stop()}},o,null,[[11,26,30,40],[31,,35,39]])})()});function n(r){return t.apply(this,arguments)}return n}()}function hr(e){var t={"[":"]","(":")"},n;if(typeof e=="string")try{n=bn(e)}catch(l){if(l instanceof Nr)return!1;throw l}else n=e.map(function(l){return l&&l.token?l.token:l});var r=Object.keys(t),i=Object.values(t).concat(r);n=n.filter(function(l){return i.includes(l)});var a=new Hn,u=It(n),s;try{for(u.s();!(s=u.n()).done;){var o=s.value;if(r.includes(o))a.push(o);else{if(a.is_empty())throw new Error("Syntax error: not matched closing ".concat(o));var f=a.top(),c=t[f];if(o===c)a.pop();else throw new Error("Syntax error: missing closing ".concat(c))}}}catch(l){u.e(l)}finally{u.f()}return a.is_empty()}function mf(e){var t="("+e.toString()+")()",n=window.URL||window.webkitURL,r;try{r=new Blob([t],{type:"application/javascript"})}catch{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;r=new i,r.append(t),r=r.getBlob()}return new St.Worker(n.createObjectURL(r))}function vf(){return bt.version.match(/^(\{\{VER\}\}|DEV)$/)}function yf(){if(!na()){var e;if(document.currentScript)e=document.currentScript;else{var t=document.querySelectorAll("script");if(!t.length)return;e=t[t.length-1]}var n=e.getAttribute("src");return n}}function yn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t="dist/std.xcb";e===""&&(Sr?e=Sr.replace(/[^/]*$/,"std.xcb"):vf()?e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t):e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(bt.version,"/").concat(t)),H.set("__dirname",e.replace(/[^/]+$/,""));var n=H.get("load");return n.call(Be,e,H)}function gf(e){this.url=e;var t=this.worker=mf(function(){var n,r;self.addEventListener("message",function(i){var a=i.data,u=a.id;if(a.type!=="RPC"||u===null)return;function s(c){self.postMessage({id:u,type:"RPC",result:c})}function o(c){self.postMessage({id:u,type:"RPC",error:c})}if(a.method==="eval"){if(!r){o("Worker RPC: LIPS not initialized, call init first");return}r.then(function(){var c=a.params[0],l=a.params[1];n.exec(c,{use_dynamic:l}).then(function(m){m=m.map(function(k){return k&&k.valueOf()}),s(m)}).catch(function(m){o(m)})})}else if(a.method==="init"){var f=a.params[0];typeof f!="string"?o("Worker RPC: url is not a string"):(importScripts("".concat(f,"/dist/lips.min.js")),n=new bt.Interpreter("worker"),r=yn(f),r.then(function(){s(!0)}))}})});this.rpc=function(){var n=0;return function(i,a){var u=++n;return new Promise(function(s,o){t.addEventListener("message",function f(c){var l=c.data;l&&l.type==="RPC"&&l.id===u&&(l.error?o(l.error):s(l.result),t.removeEventListener("message",f))}),t.postMessage({type:"RPC",method:i,id:u,params:a})})}}(),this.rpc("init",[e]).catch(function(n){console.error(n)}),this.exec=function(n,r){var i=r.use_dynamic,a=i===void 0?!1:i;return this.rpc("eval",[n,a])}}function uu(e){return wo[e]}function bf(e){return bo[e]}function wf(e){return JSON.stringify(e,function(t,n){var r=this[t];if(r){if(r instanceof RegExp)return{"@":uu("regex"),"#":[r.source,r.flags]};var i=uu(r.constructor.__class__);if(!Zi(i))return{"@":i,"#":r.serialize()}}return n})}function Do(e){return JSON.parse(e,function(t,n){if(n&&ge(n)==="object"&&!Zi(n["@"])){var r=bf(n["@"]);if(Br[r])return Br[r](n["#"])}return n})}function Df(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){var r=t.reduce(function(u,s){return u+s.length},0),i=new Uint8Array(r),a=0;return t.forEach(function(u){i.set(u,a),a+=u.length}),i}else if(t.length)return t[0]}function xf(){var e=1,t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}function Ef(e){var t=new TextDecoder("utf-8"),n=t.decode(e.slice(0,Eo)),r=n.substring(0,4);if(r==="LIPS"){var i=n.match(/^(....).*([0-9]+)$/);if(i)return{type:i[1],version:Number(i[2])}}return{type:"unknown"}}function Ff(e){var t=xf(),n=xo.encode(e);return Df(t,bu.pack(n,{magic:!1}))}function Fo(e){var t=Ef(e),n=t.type,r=t.version;if(n==="LIPS"&&r===1){var i=bu.unpack(e.slice(Eo),{magic:!1});return xo.decode(i)}else throw new Error("Invalid file format ".concat(n))}function ou(e){console.error(e.message||e),Array.isArray(e.code)&&console.error(e.code.map(function(t,n){return"[".concat(n+1,"]: ").concat(t)}))}function Af(){var e=["text/x-lips","text/x-scheme"],t;function n(s){var o;return(o=s.getAttribute("data-bootstrap"))!==null&&o!==void 0?o:s.getAttribute("bootstrap")}function r(s){return new Promise(function(o){var f=s.getAttribute("src");return f?fetch(f).then(function(c){return c.text()}).then(Kt).then(o).catch(function(c){ou(c),o()}):Kt(s.innerHTML).then(o).catch(function(c){ou(c),o()})})}function i(){return new Promise(function(s){var o=Array.from(document.querySelectorAll("script"));return function f(){var c=o.shift();if(!c)s();else{var l=c.getAttribute("type");if(e.includes(l)){var m=n(c);return!t&&typeof m=="string"?yn(m).then(function(){return r(c)}).then(f):r(c).then(f)}else l&&l.match(/lips|lisp/)&&console.warn("Expecting "+e.join(" or ")+" found "+l);return f()}}()})}if(window.document){if(su){var a=su,u=n(a);if(typeof u=="string")return yn(u).then(function(){return t=!0,i()})}}else return Promise.resolve();return i()}var Yr,Wr,ma,va,Jr,ya,us,ae,fi,ee,rn,I,os,ss,cs,ga,ba,sn,On,At,me,Ie,yr,gr,Un,qe,ut,Ne,li,nt,Ze,Nn,wa,zn,du,br,Da,fs,Ue,vu,Kn,Ot,hi,hs,yu,ds,ms,xa,vs,Si,Bi,ar,wr,ji,jr,Vn,Kr,Ea,Fa,Aa,Qr,w,Ae,d,Tt,Re,ws,Ds,rt,Dr,xr,xs,Es,Ii,Sa,As,Xr,Sn,Ba,bu,Os,Ss,Bs,js,Is,Ps,St,Ms,qs,Eu,qt,Mt,yt,Li,yi,zs,Ir,$s,Cu,Hs,Gs,Ou,Mi,qi,Ui,Su,Bu,Ws,Js,Ks,Er,Hi,Se,Nu,Tu,q,Lu,Ru,Ra,Vt,Nr,Qn,Fe,Gn,tn,$e,Tr,gc,kt,Ua,bc,Lt,za,Zn,Xn,wc,ei,Uu,Dc,re,Tn,$u,Vu,Di,xi,Cc,Bc,Yu,Ha,mn,to,no,gt,hn,Ve,Gc,Yc,ro,io,Wc,ln,lr,Za,Xa,eu,In,ri,ii,_r,ai,so,Mr,ui,ef,Cr,qr,xn,je,Ln,nf,Rn,lo,Or,tu,H,Be,ho,Ai,rr,Ur,zr,yo,df,Kt,Sr,Br,bo,wo,si,iu,au,ir,oi,xo,Eo,su,kf,Cf,Of,Ao,bt,ra=Ye(()=>{Pn.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Pn.prototype.next=function(e){return this._invoke("next",e)},Pn.prototype.throw=function(e){return this._invoke("throw",e)},Pn.prototype.return=function(e){return this._invoke("return",e)};Yr={exports:{}},Wr={exports:{}};us=as(),ae=ns(us);try{fi=new TextDecoder}catch{}I=0,os=105,ss=57342,cs=57343,ga=57337,ba=6,sn={},On=11281e4,At=1681e4,me={},gr=0,Un=0,Ne=[],li=[],wa={useRecords:!1,mapsAsObjects:!0},zn=!1,du=2;try{new Function("")}catch{du=1/0}br=class e{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[n,r]of Object.entries(t.keyMap))this.mapKey.set(r,n)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let n=new Map;for(let[r,i]of Object.entries(t))n.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,i);return n}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[r,i]of Object.entries(this._keyMap))this._mapKey.set(i,r)}let n={};return t.forEach((r,i)=>n[ot(this._mapKey.has(i)?this._mapKey.get(i):i)]=r),n}mapDecode(t,n){let r=this.decode(t);if(this._keyMap)switch(r.constructor.name){case"Array":return r.map(i=>this.decodeKeys(i))}return r}decode(t,n){if(ee)return gu(()=>(di(),this?this.decode(t,n):e.prototype.decode.call(wa,t,n)));rn=n>-1?n:t.length,I=0,Un=0,yr=null,qe=null,ee=t;try{Ze=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw ee=null,t instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof e){if(me=this,nt=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return Ie=this.structures,Jn();(!Ie||Ie.length>0)&&(Ie=[])}else me=wa,(!Ie||Ie.length>0)&&(Ie=[]),nt=null;return Jn()}decodeMultiple(t,n){let r,i=0;try{let a=t.length;zn=!0;let u=this?this.decode(t,a):Bi.decode(t,a);if(n){if(n(u)===!1)return;for(;I<a;)if(i=I,n(Jn())===!1)return}else{for(r=[u];I<a;)i=I,r.push(Jn());return r}}catch(a){throw a.lastPosition=i,a.values=r,a}finally{zn=!1,di()}}};Da=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;fs=pi;Ue=String.fromCharCode;vu=new Float32Array(1),Kn=new Uint8Array(vu.buffer,0,4);new Array(4096);Ot=class{constructor(t,n){this.value=t,this.tag=n}};Ne[0]=e=>new Date(e);Ne[1]=e=>new Date(Math.round(e*1e3));Ne[2]=e=>{let t=BigInt(0);for(let n=0,r=e.byteLength;n<r;n++)t=BigInt(e[n])+(t<<BigInt(8));return t};Ne[3]=e=>BigInt(-1)-Ne[2](e);Ne[4]=e=>+(e[1]+"e"+e[0]);Ne[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));hi=(e,t)=>{e=e-57344;let n=Ie[e];n&&n.isShared&&((Ie.restoreStructures||(Ie.restoreStructures=[]))[e]=n),Ie[e]=t,t.read=_i(t)};Ne[os]=e=>{let t=e.length,n=e[1];hi(e[0],n);let r={};for(let i=2;i<t;i++){let a=n[i-2];r[ot(a)]=e[i]}return r};Ne[14]=e=>qe?qe[0].slice(qe.position0,qe.position0+=e):new Ot(e,14);Ne[15]=e=>qe?qe[1].slice(qe.position1,qe.position1+=e):new Ot(e,15);hs={Error,RegExp};Ne[27]=e=>(hs[e[0]]||Error)(e[1],e[2]);yu=e=>{if(ee[I++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw ee.length<I&&(n.incomplete=!0),n}let t=e();if(!t||!t.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return nt=nt?t.concat(nt.slice(t.length)):t,nt.prefixes=e(),nt.suffixes=e(),e()};yu.handlesRead=!0;Ne[51]=yu;Ne[ba]=e=>{if(!nt)if(me.getShared)Oi();else return new Ot(e,ba);if(typeof e=="number")return nt[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw e===void 0&&(t.incomplete=!0),t};Ne[28]=e=>{ut||(ut=new Map,ut.id=0);let t=ut.id++,n=I,r=ee[I],i;r>>5==4?i=[]:i={};let a={target:i};ut.set(t,a);let u=e();return a.used?(Object.getPrototypeOf(i)!==Object.getPrototypeOf(u)&&(I=n,i=u,ut.set(t,{target:i}),u=e()),Object.assign(i,u)):(a.target=u,u)};Ne[28].handlesRead=!0;Ne[29]=e=>{let t=ut.get(e);return t.used=!0,t.target};Ne[258]=e=>new Set(e);(Ne[259]=e=>(me.mapsAsObjects&&(me.mapsAsObjects=!1,Nn=!0),e())).handlesRead=!0;ds=1399353956;li.push((e,t)=>{if(e>=225&&e<=255)return cn(en().prefixes[e-224],t);if(e>=28704&&e<=32767)return cn(en().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return cn(en().prefixes[e-1879048192],t);if(e>=216&&e<=223)return cn(t,en().suffixes[e-216]);if(e>=27647&&e<=28671)return cn(t,en().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return cn(t,en().suffixes[e-1811939328]);if(e==ds)return{packedValues:nt,structures:Ie.slice(0),version:t};if(e==55799)return t});ms=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,xa=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],vs=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<xa.length;e++)ys(xa[e],vs[e]);Si=new Array(147);for(let e=0;e<256;e++)Si[e]=+("1e"+Math.floor(45.15-e*.30103));Bi=new br({useRecords:!1});Bi.decode;Bi.decodeMultiple;try{ar=new TextEncoder}catch{}jr=typeof globalThis=="object"&&globalThis.Buffer,Vn=typeof jr<"u",Kr=Vn?jr.allocUnsafeSlow:Uint8Array,Ea=Vn?jr:Uint8Array,Fa=256,Aa=Vn?4294967296:2144337920,d=0,Re=null,ws=61440,Ds=/[\u0080-\uFFFF]/,rt=Symbol("record-id"),Dr=class extends br{constructor(t){super(t),this.offset=0;let n,r,i,a,u;t=t||{};let s=Ea.prototype.utf8Write?function(y,N,P){return w.utf8Write(y,N,P)}:ar&&ar.encodeInto?function(y,N){return ar.encodeInto(y,w.subarray(N)).written}:!1,o=this,f=t.structures||t.saveStructures,c=t.maxSharedStructures;if(c==null&&(c=f?128:0),c>8190)throw new Error("Maximum maxSharedStructure is 8190");let l=t.sequential;l&&(c=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let m,k,L=t.sharedValues,b;if(L){b=Object.create(null);for(let y=0,N=L.length;y<N;y++)b[L[y]]=y}let g=[],p=0,v=0;this.mapEncode=function(y,N){if(this._keyMap&&!this._mapped)switch(y.constructor.name){case"Array":y=y.map(P=>this.encodeKeys(P));break}return this.encode(y,N)},this.encode=function(y,N){if(w||(w=new Kr(8192),Ae=new DataView(w.buffer,0,8192),d=0),Tt=w.length-10,Tt-d<2048?(w=new Kr(w.length),Ae=new DataView(w.buffer,0,w.length),Tt=w.length-10,d=0):N===Sa&&(d=d+7&2147483640),n=d,o.useSelfDescribedHeader&&(Ae.setUint32(d,3654940416),d+=3),u=o.structuredClone?new Map:null,o.bundleStrings&&typeof y!="string"?(Re=[],Re.size=1/0):Re=null,r=o.structures,r){if(r.uninitialized){let M=o.getShared()||{};o.structures=r=M.structures||[],o.sharedVersion=M.version;let T=o.sharedValues=M.packedValues;if(T){b={};for(let Q=0,j=T.length;Q<j;Q++)b[T[Q]]=Q}}let P=r.length;if(P>c&&!l&&(P=c),!r.transitions){r.transitions=Object.create(null);for(let M=0;M<P;M++){let T=r[M];if(!T)continue;let Q,j=r.transitions;for(let D=0,A=T.length;D<A;D++){j[rt]===void 0&&(j[rt]=M);let z=T[D];Q=j[z],Q||(Q=j[z]=Object.create(null)),j=Q}j[rt]=M|1048576}}l||(r.nextId=P)}if(i&&(i=!1),a=r||[],k=b,t.pack){let P=new Map;if(P.values=[],P.encoder=o,P.maxValues=t.maxPrivatePackedValues||(b?16:1/0),P.objectMap=b||!1,P.samplingPackedValues=m,ur(y,P),P.values.length>0){w[d++]=216,w[d++]=51,vt(4);let M=P.values;h(M),vt(0),vt(0),k=Object.create(b||null);for(let T=0,Q=M.length;T<Q;T++)k[M[T]]=T}}Qr=N&Xr;try{if(Qr)return;if(h(y),Re&&Ca(n,h),o.offset=d,u&&u.idsToInsert){d+=u.idsToInsert.length*2,d>Tt&&O(d),o.offset=d;let P=Fs(w.subarray(n,d),u.idsToInsert);return u=null,P}return N&Sa?(w.start=n,w.end=d,w):w.subarray(n,d)}finally{if(r){if(v<10&&v++,r.length>c&&(r.length=c),p>1e4)r.transitions=null,v=0,p=0,g.length>0&&(g=[]);else if(g.length>0&&!l){for(let P=0,M=g.length;P<M;P++)g[P][rt]=void 0;g=[]}}if(i&&o.saveShared){o.structures.length>c&&(o.structures=o.structures.slice(0,c));let P=w.subarray(n,d);return o.updateSharedData()===!1?o.encode(y):P}N&As&&(d=n)}},this.findCommonStringsToPack=()=>(m=new Map,b||(b=Object.create(null)),y=>{let N=y&&y.threshold||4,P=this.pack?y.maxPrivatePackedValues||16:0;L||(L=this.sharedValues=[]);for(let[M,T]of m)T.count>N&&(b[M]=P++,L.push(M),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);m=null});let h=y=>{d>Tt&&(w=O(d));var N=typeof y,P;if(N==="string"){if(k){let j=k[y];if(j>=0){j<16?w[d++]=j+224:(w[d++]=198,j&1?h(15-j>>1):h(j-16>>1));return}else if(m&&!t.pack){let D=m.get(y);D?D.count++:m.set(y,{count:1})}}let M=y.length;if(Re&&M>=4&&M<1024){if((Re.size+=M)>ws){let D,A=(Re[0]?Re[0].length*3+Re[1].length:0)+10;d+A>Tt&&(w=O(d+A)),w[d++]=217,w[d++]=223,w[d++]=249,w[d++]=Re.position?132:130,w[d++]=26,D=d-n,d+=4,Re.position&&Ca(n,h),Re=["",""],Re.size=0,Re.position=D}let j=Ds.test(y);Re[j?0:1]+=y,w[d++]=j?206:207,h(M);return}let T;M<32?T=1:M<256?T=2:M<65536?T=3:T=5;let Q=M*3;if(d+Q>Tt&&(w=O(d+Q)),M<64||!s){let j,D,A,z=d+T;for(j=0;j<M;j++)D=y.charCodeAt(j),D<128?w[z++]=D:D<2048?(w[z++]=D>>6|192,w[z++]=D&63|128):(D&64512)===55296&&((A=y.charCodeAt(j+1))&64512)===56320?(D=65536+((D&1023)<<10)+(A&1023),j++,w[z++]=D>>18|240,w[z++]=D>>12&63|128,w[z++]=D>>6&63|128,w[z++]=D&63|128):(w[z++]=D>>12|224,w[z++]=D>>6&63|128,w[z++]=D&63|128);P=z-d-T}else P=s(y,d+T,Q);P<24?w[d++]=96|P:P<256?(T<2&&w.copyWithin(d+2,d+1,d+1+P),w[d++]=120,w[d++]=P):P<65536?(T<3&&w.copyWithin(d+3,d+2,d+2+P),w[d++]=121,w[d++]=P>>8,w[d++]=P&255):(T<5&&w.copyWithin(d+5,d+3,d+3+P),w[d++]=122,Ae.setUint32(d,P),d+=4),d+=P}else if(N==="number")if(!this.alwaysUseFloat&&y>>>0===y)y<24?w[d++]=y:y<256?(w[d++]=24,w[d++]=y):y<65536?(w[d++]=25,w[d++]=y>>8,w[d++]=y&255):(w[d++]=26,Ae.setUint32(d,y),d+=4);else if(!this.alwaysUseFloat&&y>>0===y)y>=-24?w[d++]=31-y:y>=-256?(w[d++]=56,w[d++]=~y):y>=-65536?(w[d++]=57,Ae.setUint16(d,~y),d+=2):(w[d++]=58,Ae.setUint32(d,~y),d+=4);else{let M;if((M=this.useFloat32)>0&&y<4294967296&&y>=-2147483648){w[d++]=250,Ae.setFloat32(d,y);let T;if(M<4||(T=y*Si[(w[d]&127)<<1|w[d+1]>>7])>>0===T){d+=4;return}else d--}w[d++]=251,Ae.setFloat64(d,y),d+=8}else if(N==="object")if(!y)w[d++]=246;else{if(u){let T=u.get(y);if(T){if(w[d++]=216,w[d++]=29,w[d++]=25,!T.references){let Q=u.idsToInsert||(u.idsToInsert=[]);T.references=[],Q.push(T)}T.references.push(d-n),d+=2;return}else u.set(y,{offset:d-n})}let M=y.constructor;if(M===Object)F(y);else if(M===Array){P=y.length,P<24?w[d++]=128|P:vt(P);for(let T=0;T<P;T++)h(y[T])}else if(M===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(w[d++]=217,w[d++]=1,w[d++]=3),P=y.size,P<24?w[d++]=160|P:P<256?(w[d++]=184,w[d++]=P):P<65536?(w[d++]=185,w[d++]=P>>8,w[d++]=P&255):(w[d++]=186,Ae.setUint32(d,P),d+=4),o.keyMap)for(let[T,Q]of y)h(o.encodeKey(T)),h(Q);else for(let[T,Q]of y)h(T),h(Q);else{for(let T=0,Q=wr.length;T<Q;T++){let j=ji[T];if(y instanceof j){let D=wr[T],A=D.tag;A==null&&(A=D.getTag&&D.getTag.call(this,y)),A<24?w[d++]=192|A:A<256?(w[d++]=216,w[d++]=A):A<65536?(w[d++]=217,w[d++]=A>>8,w[d++]=A&255):A>-1&&(w[d++]=218,Ae.setUint32(d,A),d+=4),D.encode.call(this,y,h,O);return}}if(y[Symbol.iterator]){if(Qr){let T=new Error("Iterable should be serialized as iterator");throw T.iteratorNotHandled=!0,T}w[d++]=159;for(let T of y)h(T);w[d++]=255;return}if(y[Symbol.asyncIterator]||Zr(y)){let T=new Error("Iterable/blob should be serialized as iterator");throw T.iteratorNotHandled=!0,T}if(this.useToJSON&&y.toJSON){let T=y.toJSON();if(T!==y)return h(T)}F(y)}}else if(N==="boolean")w[d++]=y?245:244;else if(N==="bigint"){if(y<BigInt(1)<<BigInt(64)&&y>=0)w[d++]=27,Ae.setBigUint64(d,y);else if(y>-(BigInt(1)<<BigInt(64))&&y<0)w[d++]=59,Ae.setBigUint64(d,-y-BigInt(1));else if(this.largeBigIntToFloat)w[d++]=251,Ae.setFloat64(d,Number(y));else{y>=BigInt(0)?w[d++]=194:(w[d++]=195,y=BigInt(-1)-y);let M=[];for(;y;)M.push(Number(y&BigInt(255))),y>>=BigInt(8);mi(new Uint8Array(M.reverse()),O);return}d+=8}else if(N==="undefined")w[d++]=247;else throw new Error("Unknown type: "+N)},F=this.useRecords===!1?this.variableMapSize?y=>{let N=Object.keys(y),P=Object.values(y),M=N.length;if(M<24?w[d++]=160|M:M<256?(w[d++]=184,w[d++]=M):M<65536?(w[d++]=185,w[d++]=M>>8,w[d++]=M&255):(w[d++]=186,Ae.setUint32(d,M),d+=4),o.keyMap)for(let T=0;T<M;T++)h(o.encodeKey(N[T])),h(P[T]);else for(let T=0;T<M;T++)h(N[T]),h(P[T])}:y=>{w[d++]=185;let N=d-n;d+=2;let P=0;if(o.keyMap)for(let M in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(M))&&(h(o.encodeKey(M)),h(y[M]),P++);else for(let M in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(M))&&(h(M),h(y[M]),P++);w[N+++n]=P>>8,w[N+n]=P&255}:(y,N)=>{let P,M=a.transitions||(a.transitions=Object.create(null)),T=0,Q=0,j,D;if(this.keyMap){D=Object.keys(y).map(z=>this.encodeKey(z)),Q=D.length;for(let z=0;z<Q;z++){let te=D[z];P=M[te],P||(P=M[te]=Object.create(null),T++),M=P}}else for(let z in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(z))&&(P=M[z],P||(M[rt]&1048576&&(j=M[rt]&65535),P=M[z]=Object.create(null),T++),M=P,Q++);let A=M[rt];if(A!==void 0)A&=65535,w[d++]=217,w[d++]=A>>8|224,w[d++]=A&255;else if(D||(D=M.__keys__||(M.__keys__=Object.keys(y))),j===void 0?(A=a.nextId++,A||(A=0,a.nextId=1),A>=Fa&&(a.nextId=(A=c)+1)):A=j,a[A]=D,A<c){w[d++]=217,w[d++]=A>>8|224,w[d++]=A&255,M=a.transitions;for(let z=0;z<Q;z++)(M[rt]===void 0||M[rt]&1048576)&&(M[rt]=A),M=M[D[z]];M[rt]=A|1048576,i=!0}else{if(M[rt]=A,Ae.setUint32(d,3655335680),d+=3,T&&(p+=v*T),g.length>=Fa-c&&(g.shift()[rt]=void 0),g.push(M),vt(Q+2),h(57344+A),h(D),N)return;for(let z in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(z))&&h(y[z]);return}if(Q<24?w[d++]=128|Q:vt(Q),!N)for(let z in y)(typeof y.hasOwnProperty!="function"||y.hasOwnProperty(z))&&h(y[z])},O=y=>{let N;if(y>16777216){if(y-n>Aa)throw new Error("Encoded buffer would be larger than maximum buffer size");N=Math.min(Aa,Math.round(Math.max((y-n)*(y>67108864?1.25:2),4194304)/4096)*4096)}else N=(Math.max(y-n<<2,w.length-1)>>12)+1<<12;let P=new Kr(N);return Ae=new DataView(P.buffer,0,N),w.copy?w.copy(P,0,n,y):P.set(w.slice(n,y)),d-=n,n=0,Tt=P.length-10,w=P},B=100,V=1e3;this.encodeAsIterable=function(y,N){return W(y,N,J)},this.encodeAsAsyncIterable=function(y,N){return W(y,N,ce)};function*J(y,N,P){let M=y.constructor;if(M===Object){let T=o.useRecords!==!1;T?F(y,!0):ka(Object.keys(y).length,160);for(let Q in y){let j=y[Q];T||h(Q),j&&typeof j=="object"?N[Q]?yield*J(j,N[Q]):yield*Y(j,N,Q):h(j)}}else if(M===Array){let T=y.length;vt(T);for(let Q=0;Q<T;Q++){let j=y[Q];j&&(typeof j=="object"||d-n>B)?N.element?yield*J(j,N.element):yield*Y(j,N,"element"):h(j)}}else if(y[Symbol.iterator]&&!y.buffer){w[d++]=159;for(let T of y)T&&(typeof T=="object"||d-n>B)?N.element?yield*J(T,N.element):yield*Y(T,N,"element"):h(T);w[d++]=255}else Zr(y)?(ka(y.size,64),yield w.subarray(n,d),yield y,R()):y[Symbol.asyncIterator]?(w[d++]=159,yield w.subarray(n,d),yield y,R(),w[d++]=255):h(y);P&&d>n?yield w.subarray(n,d):d-n>B&&(yield w.subarray(n,d),R())}function*Y(y,N,P){let M=d-n;try{h(y),d-n>B&&(yield w.subarray(n,d),R())}catch(T){if(T.iteratorNotHandled)N[P]={},d=n+M,yield*J.call(this,y,N[P]);else throw T}}function R(){B=V,o.encode(null,Xr)}function W(y,N,P){return N&&N.chunkThreshold?B=V=N.chunkThreshold:B=100,y&&typeof y=="object"?(o.encode(null,Xr),P(y,o.iterateProperties||(o.iterateProperties={}),!0)):[o.encode(y)]}async function*ce(y,N){for(let P of J(y,N,!0)){let M=P.constructor;if(M===Ea||M===Uint8Array)yield P;else if(Zr(P)){let T=P.stream().getReader(),Q;for(;!(Q=await T.read()).done;)yield Q.value}else if(P[Symbol.asyncIterator])for await(let T of P)R(),T?yield*ce(T,N.async||(N.async={})):yield o.encode(T);else yield P}}}useBuffer(t){w=t,Ae=new DataView(w.buffer,w.byteOffset,w.byteLength),d=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let n=this.structures.slice(0),r=new xr(n,this.sharedValues,this.sharedVersion),i=this.saveShared(r,a=>(a&&a.version||0)==t);return i===!1?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):n.forEach((a,u)=>this.structures[u]=a),i}};xr=class{constructor(t,n,r){this.structures=t,this.packedValues=n,this.version=r}};xs=typeof Blob>"u"?function(){}:Blob;Es=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;ji=[Date,Set,Error,RegExp,Ot,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,xr];wr=[{tag:1,encode(e,t){let n=e.getTime()/1e3;(this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296?(w[d++]=26,Ae.setUint32(d,n),d+=4):(w[d++]=251,Ae.setFloat64(d,n),d+=8)}},{tag:258,encode(e,t){let n=Array.from(e);t(n)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,n){mi(e,n)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||Vn&&this.tagUint8Array!==!1))return 64},encode(e,t,n){mi(e,n)}},mt(68,1),mt(69,2),mt(70,4),mt(71,8),mt(72,1),mt(77,2),mt(78,4),mt(79,8),mt(85,4),mt(86,8),{encode(e,t){let n=e.packedValues||[],r=e.structures||[];if(n.values.length>0){w[d++]=216,w[d++]=51,vt(4);let i=n.values;t(i),vt(0),vt(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=i.length;a<u;a++)packedObjectMap[i[a]]=a}if(r){Ae.setUint32(d,3655335424),d+=3;let i=r.slice(0);i.unshift(57344),i.push(new Ot(e.version,1399353956)),t(i)}else t(new Ot(e.version,1399353956))}}];Ii=new Dr({useRecords:!1});Ii.encode;Ii.encodeAsIterable;Ii.encodeAsAsyncIterable;Sa=512,As=1024,Xr=2048,Sn={};bu=ks();Os=["token"],Ss=["env"],Bs=["stderr","stdin","stdout","command_line"],js=["use_dynamic"],Is=["use_dynamic"],Ps=["env","dynamic_env","use_dynamic","error"];St=typeof global<"u"?global:self;St.fetch||(St.fetch=Cs);Ms={pair:S,symbol:x,number:_,array:Array,nil:Pt,character:de,values:Jt,"input-port":Ke,"output-port":Ge,regex:RegExp,syntax:Me,eof:ta,macro:fe,string:Z,"native-symbol":Symbol},qs=new Map([[NaN,"NaN"],[null,"null"]]),yt=St.BN;Li=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/,yi="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)",zs="(?:#[ie])?(?:[+-]?(?:[0-9][0-9_]*/[0-9][0-9_]*|nan.0|inf.0|".concat(yi,"|[+-]?[0-9]+))?(?:").concat(yi,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i"),Ir=new RegExp("^(#[ie])?".concat(yi,"$"),"i");$s=function(){var e={};return[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(t){var n=ye(t,3),r=n[0],i=n[1],a=n[2];e[r]=ku(i,a)}),e}(),Cu={alarm:"\x07",backspace:"\b",delete:"",escape:"\x1B",newline:`
`,null:"\0",return:"\r",space:" ",tab:"	",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"\x07",etb:"",bs:"\b",can:"",ht:"	",em:"",lf:`
`,sub:"",vt:"\v",esc:"\x1B",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};Hs=Object.keys(Cu).join("|"),Gs="#\\\\(?:x[0-9a-f]+|".concat(Hs,"|[\\s\\S])"),Ou=new RegExp("^".concat(Gs,"$"),"i");Mi=Ri(Ti),qi=Ri(Fu),Ui=Ri(Au),Su=new RegExp("^(?:"+Au("","[0-9a-f]")+")$","i"),Bu=new RegExp("^(?:"+Fu("","[0-9a-f]")+")$","i"),Ws=new RegExp("^(?:"+Ti("","[0-9a-f]")+")$","i"),Js=ku("","[0-9a-fA-F]"),Ks=/((?:#[xodbie]){0,2})(.*)/i;Er=/"(?:\\[\S\s]|[^"])*"?/g;Hn.prototype.push=function(e){this.data.push(e)};Hn.prototype.top=function(){return this.data[this.data.length-1]};Hn.prototype.pop=function(){return this.data.pop()};Hn.prototype.is_empty=function(){return!this.data.length};Fr.prototype.toString=function(){return"#<Thunk>"};x.list={};x.literal=Symbol.for("__literal__");x.object=Symbol.for("__object__");x.prototype.is_interned=function(){return x.list[this.__name__]==this};x.is=function(e,t){return e instanceof x&&(t instanceof x&&e.__name__===t.__name__||typeof t=="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};x.prototype.toString=function(e){if(fc(this.__name__))return $i(this.__name__);var t=this.valueOf();return e&&t.match(/(^;|[\s()[\]'])/)?"|".concat(t,"|"):t};x.prototype.literal=function(){return this.is_gensym()?this[x.literal]:this.valueOf()};x.prototype.serialize=function(){return Z.isString(this.__name__)?this.__name__:[$i(this.__name__)]};x.prototype.valueOf=function(){return this.__name__.valueOf()};x.prototype.is_gensym=function(){return Vi(this.__name__)};Hi=function(){var e=0;function t(n,r){var i=new x(r,!1);return Ct(i,"__literal__",n),i}return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(n instanceof x){if(n.is_gensym())return n;n=n.valueOf()}return Vi(n)?x(n,!1):n!==null?t(n,Symbol("#:".concat(n))):(e++,t(e,Symbol("#:g".concat(e))))}}();Le.prototype.then=function(e){return new Le(this.valueOf().then(e))};Le.prototype.catch=function(e){return new Le(this.valueOf().catch(e))};Le.prototype.valueOf=function(){if(!this._promise)throw new Error("QuotedPromise: invalid promise created");return this._promise};Le.prototype.toString=function(){return this.__pending__?Le.pending_str:this.__rejected__?Le.rejected_str:"#<js-promise resolved (".concat(this.__type__,")>")};Le.pending_str="#<js-promise (pending)>";Le.rejected_str="#<js-promise (rejected)>";Se={LITERAL:Symbol.for("literal"),SPLICE:Symbol.for("splice"),SYMBOL:Symbol.for("symbol"),names:function(){return Object.keys(this.__list__)},type:function(t){try{return this.get(t).type}catch(n){return console.log({name:t}),console.log(n),null}},get:function(t){return this.__list__[t]},off:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Array.isArray(t)?t.forEach(function(i){return n.off(i,r)}):r===null?delete this.__events__[t]:this.__events__=this.__events__.filter(function(i){return i!==r})},on:function(t,n){var r=this;Array.isArray(t)?t.forEach(function(i){return r.on(i,n)}):this.__events__[t]?this.__events__[t].push(n):this.__events__[t]=[n]},trigger:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.__events__[t]&&this.__events__[t].forEach(function(a){return a.apply(void 0,r)})},remove:function(t){delete this.__list__[t],this.trigger("remove")},append:function(t,n,r){this.__list__[t]={seq:t,symbol:n,type:r},this.trigger("append")},__events__:{},__list__:{}};Nu=[["'",new x("quote"),Se.LITERAL],["`",new x("quasiquote"),Se.LITERAL],[",@",new x("unquote-splicing"),Se.LITERAL],[",",new x("unquote"),Se.LITERAL],["'>",new x("quote-promise"),Se.LITERAL]],Tu=Nu.map(function(e){return e[0]});Object.freeze(Tu);Object.defineProperty(Se,"__builtins__",{writable:!1,enumerable:!0,value:Tu});Nu.forEach(function(e){var t=ye(e,3),n=t[0],r=t[1],i=t[2];Se.append(n,r,i)});q=function(){function e(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.whitespace,a=i===void 0?!1:i;wt(this,e),X(this,"__input__",t);var u={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(s){Object.defineProperty(n,s,{configurable:!1,enumerable:!1,get:function(){return u[s]},set:function(f){u[s]=f}})}),this._whitespace=a,this._i=this._line=this._col=this._newline=0,this._state=this._next=this._token=null,this._prev_char=""}return Dt(e,[{key:"get",value:function(n){return this.__internal[n]}},{key:"set",value:function(n,r){this.__internal[n]=r}},{key:"token",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(n){var r=this._line;return this._whitespace&&this._token===`
`&&--r,{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this._i>=this.__input__.length)return je;if(this._token)return X(this,"__token__",this.token(!0)),this.token(n);var r=this.next_token();return r?(this._token=this.__input__.substring(this._i,this._next),this.__token__||X(this,"__token__",this.token(!0)),this.token(n)):je}},{key:"skip",value:function(){this._next!==null&&(this._token=null,this._i=this._next)}},{key:"read_line",value:function(){var n=this.__input__.length;if(this._i>=n)return je;for(var r=this._i;r<n;++r){var i=this.__input__[r];if(i===`
`){var a=this.__input__.substring(this._i,r);return this._i=r+1,++this._line,a}}return this.read_rest()}},{key:"read_rest",value:function(){var n=this._i;return this._i=this.__input__.length,this.__input__.substring(n)}},{key:"read_string",value:function(n){var r=this.__input__.length;if(this._i>=r)return je;if(n+this._i>=r)return this.read_rest();var i=this._i+n,a=this.__input__.substring(this._i,i),u=a.match(/\n/g);return u&&(this._line+=u.length),this._i=i,a}},{key:"peek_char",value:function(){return this._i>=this.__input__.length?je:de(this.__input__[this._i])}},{key:"read_char",value:function(){var n=this.peek_char();return this.skip_char(),n}},{key:"skip_char",value:function(){this._i<this.__input__.length&&(++this._i,this._token=null)}},{key:"match_rule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.prev_char,a=r.char,u=r.next_char,s=ye(n,4),o=s[0],f=s[1],c=s[2],l=s[3];if(n.length!==5)throw new Error("Lexer: Invalid rule of length ".concat(n.length));if(Ju(o)){if(o!==a)return!1}else if(!a.match(o))return!1;return!(!Ma(f,i)||!Ma(c,u)||l!==this._state)}},{key:"next_token",value:function(){if(this._i>=this.__input__.length)return!1;var n=!0;e:for(var r=this._i,i=this.__input__.length;r<i;++r){var a=this.__input__[r],u=this.__input__[r-1]||"",s=this.__input__[r+1]||"";if(a===`
`){++this._line;var o=this._newline;if(this._state===null&&(this._newline=r+1),this._whitespace&&this._state===null)return this._next=r+1,this._col=this._i-o,!0}if(n&&this._state===null&&a.match(/\s/))if(this._whitespace){if(s.match(/\s/))continue;return this._next=r+1,this._col=this._i-this._newline,!0}else{this._i=r+1;continue}n=!1;var f=It(e.rules),c;try{for(f.s();!(c=f.n()).done;){var l=c.value;if(this.match_rule(l,{prev_char:u,char:a,next_char:s})){var m=l[l.length-1];if(this._state=m,this._state===null)return this._next=r+1,this._col=this._i-this._newline,!0;continue e}}}catch(h){f.e(h)}finally{f.f()}if(this._state!==null)continue e;var k=this.__input__.split(`
`)[this._line];throw new Error("Invalid Syntax at line ".concat(this._line+1,`
`).concat(k))}if(![null,e.comment].includes(this._state)){var L,b,g=(L=(b=this.__input__.substring(0,this._newline).match(/\n/g))===null||b===void 0?void 0:b.length)!==null&&L!==void 0?L:0,p=this.__input__.substring(this._newline);if(this.__input__[this._i]==="#"){var v=this.__input__.substring(this._i).replace(/^([^\s()\[\]]+).*/,"$1");throw new Error("Invalid Syntax at line ".concat(g+1,": invalid token ").concat(v))}throw new Nr("Invalid Syntax at line ".concat(g+1,": Unterminated expression ").concat(p))}}}])}();q.literal_rule=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(t.length===0)throw new Error("Lexer: invalid literal rule");if(t.length===1)return[[t,r,i,null,null]];for(var a=[],u=0,s=t.length;u<s;++u){var o=[];o.push(t[u]),o.push(t[u-1]||r),o.push(t[u+1]||i),u===0?(o.push(null),o.push(n)):u===s-1?(o.push(n),o.push(null)):(o.push(n),o.push(n)),a.push(o)}return a};q.string=Symbol.for("string");q.string_escape=Symbol.for("string_escape");q.symbol=Symbol.for("symbol");q.comment=Symbol.for("comment");q.regex=Symbol.for("regex");q.regex_init=Symbol.for("regex_init");q.regex_class=Symbol.for("regex_class");q.character=Symbol.for("character");q.bracket=Symbol.for("bracket");q.b_symbol=Symbol.for("b_symbol");q.b_symbol_ex=Symbol.for("b_symbol_ex");q.b_comment=Symbol.for("b_comment");q.i_comment=Symbol.for("i_comment");q.l_datum=Symbol.for("l_datum");q.dot=Symbol.for("dot");q.boundary=/^$|[\s()[\]']/;q._rules=[[/"/,null,null,q.string,null],[/"/,null,null,null,q.string],[/"/,null,null,q.string_escape,q.string],[/\\/,null,null,q.string,q.string_escape],[/./,/\\/,null,q.string_escape,q.string],[/#/,null,/[bdxoei]/i,null,q.symbol],[/#/,null,/\\/,null,q.character],[/\\/,/#/,/\s/,q.character,q.character],[/\\/,/#/,/[()[\]]/,q.character,q.character],[/\s/,/\\/,null,q.character,null],[/\S/,null,q.boundary,q.character,null],[/#/,q.boundary,/\//,null,q.regex_init],[/./,/\//,null,q.regex_init,q.regex],[/[ \t]/,null,null,q.regex,q.regex],[/\[/,/[^\\]/,null,q.regex,q.regex_class],[/\]/,/[^\\]/,null,q.regex_class,q.regex],[/[()[\]]/,null,null,q.regex,q.regex],[/\//,/\\/,null,q.regex,q.regex],[/\//,null,q.boundary,q.regex,null],[/[gimyus]/,/\//,q.boundary,q.regex,null],[/[gimyus]/,/\//,/[gimyus]/,q.regex,q.regex],[/[gimyus]/,/[gimyus]/,q.boundary,q.regex,null],[/;/,/^$|[^#]/,null,null,q.comment],[/\n/,";",null,q.comment,null],[/[\s\S]/,null,/\n/,q.comment,null],[/\s/,null,null,q.comment,q.comment],[/#/,null,/\|/,null,q.b_comment],[/\s/,null,null,q.b_comment,q.b_comment],[/#/,/\|/,null,q.b_comment,null],[/#/,null,/;/,null,q.i_comment],[/;/,/#/,null,q.i_comment,null],[/#/,null,/[0-9]/,null,q.l_datum],[/=/,/[0-9]/,null,q.l_datum,null],[/#/,/[0-9]/,null,q.l_datum,null],[/\./,q.boundary,/,/,null,null],[/\|/,null,null,null,q.b_symbol],[/\s/,null,null,q.b_symbol,q.b_symbol],[/\|/,null,q.boundary,q.b_symbol,null],[/\|/,null,/\S/,q.b_symbol,q.b_symbol_ex],[/\S/,null,q.boundary,q.b_symbol_ex,null]];q._brackets=[[/[()[\]]/,null,null,null,null]];q._symbol_rules=[[/\S/,q.boundary,q.boundary,null,null],[/\S/,q.boundary,null,null,q.symbol],[/\S/,null,q.boundary,null,null],[/\S/,null,null,null,q.symbol],[/\S/,null,q.boundary,q.symbol,null]];q._cache={valid:!1,rules:null};Se.on(["remove","append"],function(){q._cache.valid=!1,q._cache.rules=null});Lu={"#null":null,"#void":void 0},Ru=["#!fold-case","#!no-fold-case"],Ra=["#t","#f"];Object.defineProperty(q,"rules",{get:function(){if(q._cache.valid)return q._cache.rules;var t=Object.keys(Lu).concat(Ru,Ra),n=Se.names().concat(t).sort(function(i,a){return a.length-i.length||i.localeCompare(a)}),r=n.reduce(function(i,a){var u,s=null;a[0]==="#"?a.length===1?u=Symbol.for(a):(Ra.includes(a)&&(s=q.boundary),u=Symbol.for(a[1])):u=Symbol.for(a);var o=q.literal_rule(a,u,null,s);return i.concat(o)},[]);return q._cache.rules=q._rules.concat(q._brackets,r,q._symbol_rules),q._cache.valid=!0,q._cache.rules}});Vt=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.env,r=t.meta,i=r===void 0?!1:r,a=t.formatter,u=a===void 0?uc:a;wt(this,e),X(this,"_formatter",u,{hidden:!0}),X(this,"__env__",n),X(this,"_meta",i,{hidden:!0}),X(this,"_refs",[],{hidden:!0}),X(this,"_state",{parentheses:0,line:0,fold_case:!1},{hidden:!0})}return Dt(e,[{key:"prepare",value:function(n){n instanceof Z&&(n=n.toString()),this._reset_state(),X(this,"__lexer__",new q(n))}},{key:"_with_syntax_scope",value:function(n){var r=fo(this.__env__),i=r.get("stdin");H.set("lips",se(se({},bt),{},{__parser__:this})),r.set("stdin",new Yt(this,this.__env__));var a=function(){H.set("lips",bt),r.set("stdin",i)};return _e(n(),function(u){return a(),u},a)}},{key:"_reset_state",value:function(){Object.assign(this._state,{parentheses:0,line:0})}},{key:"_resolve",value:function(n){return this.__env__&&this.__env__.get(n,{throwError:!1})}},{key:"_peek",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this.__lexer__.peek(!0),i!==je){u.next=4;break}return u.abrupt("return",je);case 4:if(!this._is_comment(i.token)){u.next=7;break}return this.skip(),u.abrupt("continue",0);case 7:if(!Wu(i.token)){u.next=11;break}return this.skip(),i.token==="#!fold-case"?this._state.fold_case=!0:i.token==="#!no-fold-case"&&(this._state.fold_case=!1),u.abrupt("continue",0);case 11:if(i.token!=="#;"){u.next=18;break}if(this.skip(),this.__lexer__.peek()!==je){u.next=15;break}throw new Error("Lexer: syntax error eof found after comment");case 15:return u.next=17,this._read_object();case 17:return u.abrupt("continue",0);case 18:return u.abrupt("break",21);case 21:return i=this._formatter(i),this._state.fold_case&&(i.token=zu(i.token)),u.abrupt("return",i);case 24:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"peek",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this._peek(),!this._meta){u.next=3;break}return u.abrupt("return",i);case 3:return u.abrupt("return",i.token);case 4:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_reset",value:function(){this._refs.length=0}},{key:"skip",value:function(){this.__lexer__.skip()}},{key:"_read",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._peek();case 2:return i=u.sent,this.skip(),u.abrupt("return",i);case 5:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"read",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.peek();case 2:return i=u.sent,this.skip(),u.abrupt("return",i);case 5:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_match_datum_label",value:function(n){var r=n.token.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"_match_datum_ref",value:function(n){var r=n.token.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"_is_open",value:function(n){return["(","["].includes(n.token)}},{key:"_is_close",value:function(n){return[")","]"].includes(n.token)}},{key:"_read_list",value:function(){var t=Oe(ae.mark(function r(){var i,a,u,s,o,f;return ae.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=re,a=i;case 1:return l.next=4,this._peek();case 4:if(s=l.sent,s!==je){l.next=7;break}return l.abrupt("break",31);case 7:if(!this._is_close(s)){l.next=11;break}return--this._state.parentheses,this.skip(),l.abrupt("break",31);case 11:if(!(s.token==="."&&!$(i))){l.next=19;break}return this.skip(),l.next=15,this._read_object();case 15:a.cdr=l.sent,u=!0,l.next=29;break;case 19:if(!u){l.next=23;break}throw new Error("Parser: syntax error more than one element after dot");case 23:return l.next=25,this._read_object();case 25:o=l.sent,f=new S(o,re),$(i)?i=f:a.cdr=f,a=f;case 29:l.next=1;break;case 31:return l.abrupt("return",i);case 32:case"end":return l.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_read_value",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._read();case 2:if(i=u.sent,!(i===je||i.token===je)){u.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return u.abrupt("return",nc(i,this._meta));case 6:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_is_comment",value:function(n){return n.match(/^;/)||n.match(/^#\|/)&&n.match(/\|#$/)}},{key:"evaluate",value:function(n){return ie(n,{env:this.__env__,error:function(i){throw i}})}},{key:"read_object",value:function(){var t=Oe(ae.mark(function r(){var i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this._reset(),u.next=3,this._read_object();case 3:if(i=u.sent,i instanceof Qn&&(i=i.valueOf()),!this._refs.length){u.next=7;break}return u.abrupt("return",_e(this._resolve_object(i),function(s){return C(s)&&s.mark_cycles(),s}));case 7:return u.abrupt("return",i);case 8:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"balanced",value:function(){return this._state.parentheses===0}},{key:"_ballancing_error",value:function(n,r){var i=this._state.parentheses,a;if(i<0)a=new Error("Parser: unexpected parenthesis"),r?a.__code__=[r.toString()+")"]:a.__code__=[")"];else{a=new Error("Parser: expected parenthesis but eof found");var u=new RegExp("\\){".concat(i,"}$"));a.__code__=[n.toString().replace(u,"")]}throw this._agument_exception(a),a}},{key:"_agument_exception",value:function(n){var r=this.__lexer__.__token__;if("col"in r){var i=r.col,a=r.offset,u=r.line;n.message+=" at line ".concat(u+1," and column ").concat(i+1),X(n,"__col__",i),X(n,"__offset__",a),X(n,"__line__",u)}}},{key:"_resolve_object",value:function(){var t=Oe(ae.mark(function r(i){var a=this,u;return ae.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!Array.isArray(i)){o.next=2;break}return o.abrupt("return",i.map(function(f){return a._resolve_object(f)}));case 2:if(!lt(i)){o.next=6;break}return u={},Object.keys(i).forEach(function(f){u[f]=a._resolve_object(i[f])}),o.abrupt("return",u);case 6:if(!C(i)){o.next=8;break}return o.abrupt("return",this._resolve_pair(i));case 8:return o.abrupt("return",i);case 9:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"_resolve_pair",value:function(){var t=Oe(ae.mark(function r(i){return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!C(i)){u.next=15;break}if(!(i.car instanceof Qn)){u.next=7;break}return u.next=4,i.car.valueOf();case 4:i.car=u.sent,u.next=8;break;case 7:this._resolve_pair(i.car);case 8:if(!(i.cdr instanceof Qn)){u.next=14;break}return u.next=11,i.cdr.valueOf();case 11:i.cdr=u.sent,u.next=15;break;case 14:this._resolve_pair(i.cdr);case 15:return u.abrupt("return",i);case 16:case"end":return u.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"get_line",value:function(){return this._state.line}},{key:"_read_object",value:function(){var t=Oe(ae.mark(function r(){var i=this,a,u,s,o,f,c,l,m,k,L,b,g,p,v,h,F;return ae.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this._peek();case 2:if(a=B.sent,a!==je){B.next=5;break}return B.abrupt("return",a);case 5:if(this._state.line=this.__lexer__.__token__.line,!sr(a.token)){B.next=58;break}return u=Se.get(a.token),s=pc(a.token),this.skip(),c=hc(a.token),B.t0=this,B.next=14,this._peek();case 14:if(B.t1=B.sent,l=B.t0._is_close.call(B.t0,B.t1),!c){B.next=20;break}B.t2=void 0,B.next=23;break;case 20:return B.next=22,this._read_object();case 22:B.t2=B.sent;case 23:if(m=B.t2,m!==je){B.next=26;break}throw new Nr("Expecting expression eof found");case 26:if(s){B.next=35;break}if(f=this.__env__.get(u.symbol),typeof f!="function"){B.next=35;break}if(La(a.token)?k=[m]:$(m)?k=[]:C(m)&&(k=m.to_array(!1)),!(k||c)){B.next=32;break}return B.abrupt("return",this._with_syntax_scope(function(){return dn(f,c?[]:k,{env:i.__env__,dynamic_env:i.__env__,use_dynamic:!1})}));case 32:throw L=new Error("Parse Error: Invalid parser extension "+"invocation ".concat(u.symbol)),this._agument_exception(L),L;case 35:if(!La(a.token)){B.next=43;break}if(!l){B.next=40;break}throw b=new Error("Parse Error: expecting datum"),this._agument_exception(b),b;case 40:o=new S(u.symbol,new S(m,re)),B.next=44;break;case 43:o=new S(u.symbol,m);case 44:if(!s){B.next=46;break}return B.abrupt("return",o);case 46:if(!(f instanceof fe)){B.next=55;break}return B.next=49,this._with_syntax_scope(function(){return i.evaluate(o)});case 49:if(g=B.sent,!(C(g)||g instanceof x)){B.next=52;break}return B.abrupt("return",S.fromArray([x("quote"),g]));case 52:return B.abrupt("return",g);case 55:throw p=new Error("Parse Error: invalid parser extension: "+u.symbol),this._agument_exception(p),p;case 58:if(v=this._match_datum_ref(a),v===null){B.next=66;break}if(this.skip(),!this._refs[v]){B.next=63;break}return B.abrupt("return",new Qn(v,this._refs[v]));case 63:throw h=new Error("Parse Error: invalid datum label #".concat(v,"#")),this._agument_exception(h),h;case 66:if(F=this._match_datum_label(a),F===null){B.next=73;break}return this.skip(),this._refs[F]=this._read_object(),B.abrupt("return",this._refs[F]);case 73:if(!this._is_close(a)){B.next=78;break}--this._state.parentheses,this.skip(),B.next=85;break;case 78:if(!this._is_open(a)){B.next=84;break}return++this._state.parentheses,this.skip(),B.abrupt("return",this._read_list());case 84:return B.abrupt("return",this._read_value());case 85:case"end":return B.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()}])}(),Nr=function(e){function t(){return wt(this,t),Pi(this,t,arguments)}return Ci(t,e),Dt(t)}(vr(Error));Vt.Unterminated=Nr;Qn=function(){function e(t,n){wt(this,e),this.name=t,this.data=n}return Dt(e,[{key:"valueOf",value:function(){return this.data}}])}();ze.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*?-values|\*)?)$/],shift:{1:["&","#"]}}};ze.match=qu;ze.prototype._options=function(t){var n=ze.defaults;if(typeof t>"u")return Object.assign({},n);var r=t&&t.exceptions||{},i=r.specials||[],a=r.shift||{1:[]};return se(se(se({},n),t),{},{exceptions:{specials:[].concat(we(n.exceptions.specials),we(i)),shift:se(se({},a),{},{1:[].concat(we(n.exceptions.shift[1]),we(a[1]))})}})};ze.prototype.indent=function(t){var n=bn(this.__code__,!0);return this._indent(n,t)};ze.exception_shift=function(e,t){function n(f){if(!f.length)return!1;if(f.indexOf(e)!==-1)return!0;var c=f.filter(function(L){return L instanceof RegExp});if(!c.length)return!1;var l=It(c),m;try{for(l.s();!(m=l.n()).done;){var k=m.value;if(e.match(k))return!0}}catch(L){l.e(L)}finally{l.f()}return!1}if(n(t.exceptions.specials))return t.indent;for(var r=t.exceptions.shift,i=0,a=Object.entries(r);i<a.length;i++){var u=ye(a[i],2),s=u[0],o=u[1];if(n(o))return+s}return-1};ze.prototype._indent=function(t,n){var r=this._options(n),i=yc(t),a=Mu(t),u=t[t.length-a.length-1],s=t[t.length-1];if(s.token.match(/^"[\S\s]+[^"]$/))return i+r.indent;if(a&&a.length){if(a[0].line>0&&(r.offset=0),a.toString()===t.toString()&&hr(a))return r.offset+a[0].col;if(a.length===1)return r.offset+a[0].col+1;var o=-1;if(u){var f=ze.exception_shift(u.token,r);f!==-1&&(o=f)}if(o===-1&&(o=ze.exception_shift(a[1].token,r)),o!==-1)return r.offset+a[0].col+o;if(a[0].line<a[1].line)return r.offset+a[0].col+1;if(a.length>3&&a[1].line===a[3].line)return a[1].token==="("||a[1].token==="["?r.offset+a[1].col:r.offset+a[3].col;if(a[0].line===a[1].line)return r.offset+r.indent+a[0].col;for(var c=a.slice(2),l=0;l<c.length;++l){var m=c[l];if(m.token.trim())return m.col}}else return 0;return i+r.indent};Dn.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};Dn.prototype.match=function(e){return e.match(this.pattern)};xt.prototype.toString=function(){var e=this.patterns.map(function(t){return He(t)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};ze.Pattern=xt;ze.Ahead=Dn;Fe=/^[[(]$/,Gn=/^[\])]$/,tn=/[^()[\]]/,$e=new Dn(/[^)\]]/),Tr=Symbol.for("*"),gc=new xt([Fe,Tr,Gn],[tn],"+"),kt=new xt([Fe,Tr,Gn],"+"),Ua=new xt([Symbol.for("symbol")],"?"),bc=new xt([Symbol.for("symbol")],"*"),Lt=[Fe,bc,Gn],za=new xt([Fe,Symbol.for("symbol"),Tr,Gn],"+"),Zn=nn("syntax-rules"),Xn=nn("define","lambda","define-macro","syntax-rules"),wc=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/,ei=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/,Uu=/^;.*/;ze.rules=[[[kt],0,$e],[[Fe,nn("begin","cond-expand")],1,$e],[[Fe,ei,Ua,Fe,za,Gn],1,$e],[[Fe,ei,Ua,gc],1,$e],[[Fe,ei,Fe,za],1,$e],[[Fe,nn("define-syntax"),/.+/],1],[[Fe,Zn,tn,Lt],1],[[Fe,Zn,tn,Lt,kt],1,$e],[[Fe,Zn,Lt],1],[Uu,-1],[[Fe,Zn,Lt,kt],1,$e],[[Fe,wc,new xt([/[^()[\]]/],"+"),kt],1,$e],[[Fe,kt],1,$e],[[Fe,tn,kt],1,$e],[[Fe,nn("lambda","if"),tn],1,$e],[[Fe,nn("while"),tn,kt],1,$e],[[Fe,nn("if"),tn,Tr],1,$e],[[Fe,Xn,Lt],0,$e],[[Fe,Xn,Lt,Er],0,$e],[[Fe,Xn,Lt,Er,kt],0,$e],[[Fe,Xn,Lt,kt],0,$e]];ze.prototype.break=function(){var e=this.__code__.replace(/\n[ \t]*/g,`
 `).trim(),t=function(B){return B.token.match(Er)||B.token.match(Li)?B.token:B.token.replace(/\s+/," ")},n=function(B){for(var V=B.length;V--;){var J=B[V];if(J.trim()&&!sr(J))return B.length-V-1}},r=bn(e,!0).map(t).filter(function(O){return O!==`
`}),i=ze.rules;e:for(var a=1;a<r.length;++a)if(r[a].trim()){var u=r.slice(0,a),s={};i.map(function(O){return O[1]}).forEach(function(O){O=O.valueOf(),O>0&&!s[O]&&(s[O]=Mu(u,O))});var o=It(i),f;try{for(o.s();!(f=o.n()).done;){var c=ye(f.value,3),l=c[0],m=c[1],k=c[2],L=l===Uu;m=m.valueOf();var b=m>0?s[m]:u,g=b.filter(function(O){return O.trim()&&!sr(O)});if(g.length){m===-1&&(l=[l],g=g.slice(-1));var p=n(b),v=qu(l,g),h=r.slice(a).find(function(O){return O.trim()&&!sr(O)});if(v&&(k instanceof Dn&&k.match(h)||!k)){var F=a-p;r[F]!==`
`&&(r[F].trim()?(r.splice(F,0,`
`),a++):r[F]=`
`),a+=p;continue e}}}}catch(O){o.e(O)}finally{o.f()}}return this.__code__=r.join(""),this};ze.prototype._spaces=function(e){return" ".repeat(e)};ze.prototype.format=function(t){for(var n=this.__code__.trim().replace(/[ \t]*\n[ \t]*/g,`
 `),r=bn(n,!0),i=this._options(t),a=0,u=0,s=0;s<r.length;++s){var o=r[s];if(o.token===`
`&&(a=this._indent(r.slice(0,s),i),u+=a,r[s+1])){r[s+1].token=this._spaces(a),a--,u--;for(var f=s+2;f<r.length;++f)if(r[f].offset+=u,r[f].col+=a,r[f].token===`
`){s=f-1;break}}}return r.map(function(c){if(c.token.match(Er)&&c.token.match(/\n/)){var l=" ".repeat(c.col),m=c.token.split(`
`);c.token=[m[0]].concat(m.slice(1).map(function(k){return l+k})).join(`
`)}return c.token}).join("")};Dc={65:97,66:98,67:99,68:100,69:101,70:102,71:103,72:104,73:105,74:106,75:107,76:108,77:109,78:110,79:111,80:112,81:113,82:114,83:115,84:116,85:117,86:118,87:119,88:120,89:121,90:122,181:956,192:224,193:225,194:226,195:227,196:228,197:229,198:230,199:231,200:232,201:233,202:234,203:235,204:236,205:237,206:238,207:239,208:240,209:241,210:242,211:243,212:244,213:245,214:246,216:248,217:249,218:250,219:251,220:252,221:253,222:254,256:257,258:259,260:261,262:263,264:265,266:267,268:269,270:271,272:273,274:275,276:277,278:279,280:281,282:283,284:285,286:287,288:289,290:291,292:293,294:295,296:297,298:299,300:301,302:303,306:307,308:309,310:311,313:314,315:316,317:318,319:320,321:322,323:324,325:326,327:328,330:331,332:333,334:335,336:337,338:339,340:341,342:343,344:345,346:347,348:349,350:351,352:353,354:355,356:357,358:359,360:361,362:363,364:365,366:367,368:369,370:371,372:373,374:375,376:255,377:378,379:380,381:382,383:115,385:595,386:387,388:389,390:596,391:392,393:598,394:599,395:396,398:477,399:601,400:603,401:402,403:608,404:611,406:617,407:616,408:409,412:623,413:626,415:629,416:417,418:419,420:421,422:640,423:424,425:643,428:429,430:648,431:432,433:650,434:651,435:436,437:438,439:658,440:441,444:445,452:454,453:454,455:457,456:457,458:460,459:460,461:462,463:464,465:466,467:468,469:470,471:472,473:474,475:476,478:479,480:481,482:483,484:485,486:487,488:489,490:491,492:493,494:495,497:499,498:499,500:501,502:405,503:447,504:505,506:507,508:509,510:511,512:513,514:515,516:517,518:519,520:521,522:523,524:525,526:527,528:529,530:531,532:533,534:535,536:537,538:539,540:541,542:543,544:414,546:547,548:549,550:551,552:553,554:555,556:557,558:559,560:561,562:563,570:11365,571:572,573:410,574:11366,577:578,579:384,580:649,581:652,582:583,584:585,586:587,588:589,590:591,837:953,880:881,882:883,886:887,895:1011,902:940,904:941,905:942,906:943,908:972,910:973,911:974,913:945,914:946,915:947,916:948,917:949,918:950,919:951,920:952,921:953,922:954,923:955,924:956,925:957,926:958,927:959,928:960,929:961,931:963,932:964,933:965,934:966,935:967,936:968,937:969,938:970,939:971,962:963,975:983,976:946,977:952,981:966,982:960,984:985,986:987,988:989,990:991,992:993,994:995,996:997,998:999,1e3:1001,1002:1003,1004:1005,1006:1007,1008:954,1009:961,1012:952,1013:949,1015:1016,1017:1010,1018:1019,1021:891,1022:892,1023:893,1024:1104,1025:1105,1026:1106,1027:1107,1028:1108,1029:1109,1030:1110,1031:1111,1032:1112,1033:1113,1034:1114,1035:1115,1036:1116,1037:1117,1038:1118,1039:1119,1040:1072,1041:1073,1042:1074,1043:1075,1044:1076,1045:1077,1046:1078,1047:1079,1048:1080,1049:1081,1050:1082,1051:1083,1052:1084,1053:1085,1054:1086,1055:1087,1056:1088,1057:1089,1058:1090,1059:1091,1060:1092,1061:1093,1062:1094,1063:1095,1064:1096,1065:1097,1066:1098,1067:1099,1068:1100,1069:1101,1070:1102,1071:1103,1120:1121,1122:1123,1124:1125,1126:1127,1128:1129,1130:1131,1132:1133,1134:1135,1136:1137,1138:1139,1140:1141,1142:1143,1144:1145,1146:1147,1148:1149,1150:1151,1152:1153,1162:1163,1164:1165,1166:1167,1168:1169,1170:1171,1172:1173,1174:1175,1176:1177,1178:1179,1180:1181,1182:1183,1184:1185,1186:1187,1188:1189,1190:1191,1192:1193,1194:1195,1196:1197,1198:1199,1200:1201,1202:1203,1204:1205,1206:1207,1208:1209,1210:1211,1212:1213,1214:1215,1216:1231,1217:1218,1219:1220,1221:1222,1223:1224,1225:1226,1227:1228,1229:1230,1232:1233,1234:1235,1236:1237,1238:1239,1240:1241,1242:1243,1244:1245,1246:1247,1248:1249,1250:1251,1252:1253,1254:1255,1256:1257,1258:1259,1260:1261,1262:1263,1264:1265,1266:1267,1268:1269,1270:1271,1272:1273,1274:1275,1276:1277,1278:1279,1280:1281,1282:1283,1284:1285,1286:1287,1288:1289,1290:1291,1292:1293,1294:1295,1296:1297,1298:1299,1300:1301,1302:1303,1304:1305,1306:1307,1308:1309,1310:1311,1312:1313,1314:1315,1316:1317,1318:1319,1320:1321,1322:1323,1324:1325,1326:1327,1329:1377,1330:1378,1331:1379,1332:1380,1333:1381,1334:1382,1335:1383,1336:1384,1337:1385,1338:1386,1339:1387,1340:1388,1341:1389,1342:1390,1343:1391,1344:1392,1345:1393,1346:1394,1347:1395,1348:1396,1349:1397,1350:1398,1351:1399,1352:1400,1353:1401,1354:1402,1355:1403,1356:1404,1357:1405,1358:1406,1359:1407,1360:1408,1361:1409,1362:1410,1363:1411,1364:1412,1365:1413,1366:1414,4256:11520,4257:11521,4258:11522,4259:11523,4260:11524,4261:11525,4262:11526,4263:11527,4264:11528,4265:11529,4266:11530,4267:11531,4268:11532,4269:11533,4270:11534,4271:11535,4272:11536,4273:11537,4274:11538,4275:11539,4276:11540,4277:11541,4278:11542,4279:11543,4280:11544,4281:11545,4282:11546,4283:11547,4284:11548,4285:11549,4286:11550,4287:11551,4288:11552,4289:11553,4290:11554,4291:11555,4292:11556,4293:11557,4295:11559,4301:11565,5112:5104,5113:5105,5114:5106,5115:5107,5116:5108,5117:5109,7296:1074,7297:1076,7298:1086,7299:1089,7300:1090,7301:1090,7302:1098,7303:1123,7304:42571,7312:4304,7313:4305,7314:4306,7315:4307,7316:4308,7317:4309,7318:4310,7319:4311,7320:4312,7321:4313,7322:4314,7323:4315,7324:4316,7325:4317,7326:4318,7327:4319,7328:4320,7329:4321,7330:4322,7331:4323,7332:4324,7333:4325,7334:4326,7335:4327,7336:4328,7337:4329,7338:4330,7339:4331,7340:4332,7341:4333,7342:4334,7343:4335,7344:4336,7345:4337,7346:4338,7347:4339,7348:4340,7349:4341,7350:4342,7351:4343,7352:4344,7353:4345,7354:4346,7357:4349,7358:4350,7359:4351,7680:7681,7682:7683,7684:7685,7686:7687,7688:7689,7690:7691,7692:7693,7694:7695,7696:7697,7698:7699,7700:7701,7702:7703,7704:7705,7706:7707,7708:7709,7710:7711,7712:7713,7714:7715,7716:7717,7718:7719,7720:7721,7722:7723,7724:7725,7726:7727,7728:7729,7730:7731,7732:7733,7734:7735,7736:7737,7738:7739,7740:7741,7742:7743,7744:7745,7746:7747,7748:7749,7750:7751,7752:7753,7754:7755,7756:7757,7758:7759,7760:7761,7762:7763,7764:7765,7766:7767,7768:7769,7770:7771,7772:7773,7774:7775,7776:7777,7778:7779,7780:7781,7782:7783,7784:7785,7786:7787,7788:7789,7790:7791,7792:7793,7794:7795,7796:7797,7798:7799,7800:7801,7802:7803,7804:7805,7806:7807,7808:7809,7810:7811,7812:7813,7814:7815,7816:7817,7818:7819,7820:7821,7822:7823,7824:7825,7826:7827,7828:7829,7835:7777,7840:7841,7842:7843,7844:7845,7846:7847,7848:7849,7850:7851,7852:7853,7854:7855,7856:7857,7858:7859,7860:7861,7862:7863,7864:7865,7866:7867,7868:7869,7870:7871,7872:7873,7874:7875,7876:7877,7878:7879,7880:7881,7882:7883,7884:7885,7886:7887,7888:7889,7890:7891,7892:7893,7894:7895,7896:7897,7898:7899,7900:7901,7902:7903,7904:7905,7906:7907,7908:7909,7910:7911,7912:7913,7914:7915,7916:7917,7918:7919,7920:7921,7922:7923,7924:7925,7926:7927,7928:7929,7930:7931,7932:7933,7934:7935,7944:7936,7945:7937,7946:7938,7947:7939,7948:7940,7949:7941,7950:7942,7951:7943,7960:7952,7961:7953,7962:7954,7963:7955,7964:7956,7965:7957,7976:7968,7977:7969,7978:7970,7979:7971,7980:7972,7981:7973,7982:7974,7983:7975,7992:7984,7993:7985,7994:7986,7995:7987,7996:7988,7997:7989,7998:7990,7999:7991,8008:8e3,8009:8001,8010:8002,8011:8003,8012:8004,8013:8005,8025:8017,8027:8019,8029:8021,8031:8023,8040:8032,8041:8033,8042:8034,8043:8035,8044:8036,8045:8037,8046:8038,8047:8039,8120:8112,8121:8113,8122:8048,8123:8049,8126:953,8136:8050,8137:8051,8138:8052,8139:8053,8152:8144,8153:8145,8154:8054,8155:8055,8168:8160,8169:8161,8170:8058,8171:8059,8172:8165,8184:8056,8185:8057,8186:8060,8187:8061,8486:969,8490:107,8491:229,8498:8526,8544:8560,8545:8561,8546:8562,8547:8563,8548:8564,8549:8565,8550:8566,8551:8567,8552:8568,8553:8569,8554:8570,8555:8571,8556:8572,8557:8573,8558:8574,8559:8575,8579:8580,9398:9424,9399:9425,9400:9426,9401:9427,9402:9428,9403:9429,9404:9430,9405:9431,9406:9432,9407:9433,9408:9434,9409:9435,9410:9436,9411:9437,9412:9438,9413:9439,9414:9440,9415:9441,9416:9442,9417:9443,9418:9444,9419:9445,9420:9446,9421:9447,9422:9448,9423:9449,11264:11312,11265:11313,11266:11314,11267:11315,11268:11316,11269:11317,11270:11318,11271:11319,11272:11320,11273:11321,11274:11322,11275:11323,11276:11324,11277:11325,11278:11326,11279:11327,11280:11328,11281:11329,11282:11330,11283:11331,11284:11332,11285:11333,11286:11334,11287:11335,11288:11336,11289:11337,11290:11338,11291:11339,11292:11340,11293:11341,11294:11342,11295:11343,11296:11344,11297:11345,11298:11346,11299:11347,11300:11348,11301:11349,11302:11350,11303:11351,11304:11352,11305:11353,11306:11354,11307:11355,11308:11356,11309:11357,11310:11358,11311:11359,11360:11361,11362:619,11363:7549,11364:637,11367:11368,11369:11370,11371:11372,11373:593,11374:625,11375:592,11376:594,11378:11379,11381:11382,11390:575,11391:576,11392:11393,11394:11395,11396:11397,11398:11399,11400:11401,11402:11403,11404:11405,11406:11407,11408:11409,11410:11411,11412:11413,11414:11415,11416:11417,11418:11419,11420:11421,11422:11423,11424:11425,11426:11427,11428:11429,11430:11431,11432:11433,11434:11435,11436:11437,11438:11439,11440:11441,11442:11443,11444:11445,11446:11447,11448:11449,11450:11451,11452:11453,11454:11455,11456:11457,11458:11459,11460:11461,11462:11463,11464:11465,11466:11467,11468:11469,11470:11471,11472:11473,11474:11475,11476:11477,11478:11479,11480:11481,11482:11483,11484:11485,11486:11487,11488:11489,11490:11491,11499:11500,11501:11502,11506:11507,42560:42561,42562:42563,42564:42565,42566:42567,42568:42569,42570:42571,42572:42573,42574:42575,42576:42577,42578:42579,42580:42581,42582:42583,42584:42585,42586:42587,42588:42589,42590:42591,42592:42593,42594:42595,42596:42597,42598:42599,42600:42601,42602:42603,42604:42605,42624:42625,42626:42627,42628:42629,42630:42631,42632:42633,42634:42635,42636:42637,42638:42639,42640:42641,42642:42643,42644:42645,42646:42647,42648:42649,42650:42651,42786:42787,42788:42789,42790:42791,42792:42793,42794:42795,42796:42797,42798:42799,42802:42803,42804:42805,42806:42807,42808:42809,42810:42811,42812:42813,42814:42815,42816:42817,42818:42819,42820:42821,42822:42823,42824:42825,42826:42827,42828:42829,42830:42831,42832:42833,42834:42835,42836:42837,42838:42839,42840:42841,42842:42843,42844:42845,42846:42847,42848:42849,42850:42851,42852:42853,42854:42855,42856:42857,42858:42859,42860:42861,42862:42863,42873:42874,42875:42876,42877:7545,42878:42879,42880:42881,42882:42883,42884:42885,42886:42887,42891:42892,42893:613,42896:42897,42898:42899,42902:42903,42904:42905,42906:42907,42908:42909,42910:42911,42912:42913,42914:42915,42916:42917,42918:42919,42920:42921,42922:614,42923:604,42924:609,42925:620,42926:618,42928:670,42929:647,42930:669,42931:43859,42932:42933,42934:42935,42936:42937,42938:42939,42940:42941,42942:42943,42944:42945,42946:42947,42948:42900,42949:642,42950:7566,42951:42952,42953:42954,42960:42961,42966:42967,42968:42969,42997:42998,43888:5024,43889:5025,43890:5026,43891:5027,43892:5028,43893:5029,43894:5030,43895:5031,43896:5032,43897:5033,43898:5034,43899:5035,43900:5036,43901:5037,43902:5038,43903:5039,43904:5040,43905:5041,43906:5042,43907:5043,43908:5044,43909:5045,43910:5046,43911:5047,43912:5048,43913:5049,43914:5050,43915:5051,43916:5052,43917:5053,43918:5054,43919:5055,43920:5056,43921:5057,43922:5058,43923:5059,43924:5060,43925:5061,43926:5062,43927:5063,43928:5064,43929:5065,43930:5066,43931:5067,43932:5068,43933:5069,43934:5070,43935:5071,43936:5072,43937:5073,43938:5074,43939:5075,43940:5076,43941:5077,43942:5078,43943:5079,43944:5080,43945:5081,43946:5082,43947:5083,43948:5084,43949:5085,43950:5086,43951:5087,43952:5088,43953:5089,43954:5090,43955:5091,43956:5092,43957:5093,43958:5094,43959:5095,43960:5096,43961:5097,43962:5098,43963:5099,43964:5100,43965:5101,43966:5102,43967:5103,65313:65345,65314:65346,65315:65347,65316:65348,65317:65349,65318:65350,65319:65351,65320:65352,65321:65353,65322:65354,65323:65355,65324:65356,65325:65357,65326:65358,65327:65359,65328:65360,65329:65361,65330:65362,65331:65363,65332:65364,65333:65365,65334:65366,65335:65367,65336:65368,65337:65369,65338:65370,66560:66600,66561:66601,66562:66602,66563:66603,66564:66604,66565:66605,66566:66606,66567:66607,66568:66608,66569:66609,66570:66610,66571:66611,66572:66612,66573:66613,66574:66614,66575:66615,66576:66616,66577:66617,66578:66618,66579:66619,66580:66620,66581:66621,66582:66622,66583:66623,66584:66624,66585:66625,66586:66626,66587:66627,66588:66628,66589:66629,66590:66630,66591:66631,66592:66632,66593:66633,66594:66634,66595:66635,66596:66636,66597:66637,66598:66638,66599:66639,66736:66776,66737:66777,66738:66778,66739:66779,66740:66780,66741:66781,66742:66782,66743:66783,66744:66784,66745:66785,66746:66786,66747:66787,66748:66788,66749:66789,66750:66790,66751:66791,66752:66792,66753:66793,66754:66794,66755:66795,66756:66796,66757:66797,66758:66798,66759:66799,66760:66800,66761:66801,66762:66802,66763:66803,66764:66804,66765:66805,66766:66806,66767:66807,66768:66808,66769:66809,66770:66810,66771:66811,66928:66967,66929:66968,66930:66969,66931:66970,66932:66971,66933:66972,66934:66973,66935:66974,66936:66975,66937:66976,66938:66977,66940:66979,66941:66980,66942:66981,66943:66982,66944:66983,66945:66984,66946:66985,66947:66986,66948:66987,66949:66988,66950:66989,66951:66990,66952:66991,66953:66992,66954:66993,66956:66995,66957:66996,66958:66997,66959:66998,66960:66999,66961:67e3,66962:67001,66964:67003,66965:67004,68736:68800,68737:68801,68738:68802,68739:68803,68740:68804,68741:68805,68742:68806,68743:68807,68744:68808,68745:68809,68746:68810,68747:68811,68748:68812,68749:68813,68750:68814,68751:68815,68752:68816,68753:68817,68754:68818,68755:68819,68756:68820,68757:68821,68758:68822,68759:68823,68760:68824,68761:68825,68762:68826,68763:68827,68764:68828,68765:68829,68766:68830,68767:68831,68768:68832,68769:68833,68770:68834,68771:68835,68772:68836,68773:68837,68774:68838,68775:68839,68776:68840,68777:68841,68778:68842,68779:68843,68780:68844,68781:68845,68782:68846,68783:68847,68784:68848,68785:68849,68786:68850,71840:71872,71841:71873,71842:71874,71843:71875,71844:71876,71845:71877,71846:71878,71847:71879,71848:71880,71849:71881,71850:71882,71851:71883,71852:71884,71853:71885,71854:71886,71855:71887,71856:71888,71857:71889,71858:71890,71859:71891,71860:71892,71861:71893,71862:71894,71863:71895,71864:71896,71865:71897,71866:71898,71867:71899,71868:71900,71869:71901,71870:71902,71871:71903,93760:93792,93761:93793,93762:93794,93763:93795,93764:93796,93765:93797,93766:93798,93767:93799,93768:93800,93769:93801,93770:93802,93771:93803,93772:93804,93773:93805,93774:93806,93775:93807,93776:93808,93777:93809,93778:93810,93779:93811,93780:93812,93781:93813,93782:93814,93783:93815,93784:93816,93785:93817,93786:93818,93787:93819,93788:93820,93789:93821,93790:93822,93791:93823,125184:125218,125185:125219,125186:125220,125187:125221,125188:125222,125189:125223,125190:125224,125191:125225,125192:125226,125193:125227,125194:125228,125195:125229,125196:125230,125197:125231,125198:125232,125199:125233,125200:125234,125201:125235,125202:125236,125203:125237,125204:125238,125205:125239,125206:125240,125207:125241,125208:125242,125209:125243,125210:125244,125211:125245,125212:125246,125213:125247,125214:125248,125215:125249,125216:125250,125217:125251};Pt.prototype.toString=function(){return"()"};Pt.prototype.valueOf=function(){};Pt.prototype.serialize=function(){return 0};Pt.prototype.to_object=function(){return{}};Pt.prototype.append=function(e){return new S(e,re)};Pt.prototype.to_array=function(){return[]};re=new Pt;S.prototype.flatten=function(){return S.fromArray(xc(this.to_array()))};S.prototype.length=function(){for(var e=0,t=this;!(!t||$(t)||!C(t)||t.have_cycles("cdr"));)e++,t=t.cdr;return e};S.prototype.freeze=function(){for(var e=this;X(e,"car",e.car),C(e.car)&&!e.have_cycles("car")&&e.car.freeze(),X(e,"cdr",e.cdr),!(e.have_cycles("cdr")||(e=e.cdr,!C(e))););};S.match=function(e,t){return e instanceof x?x.is(e,t):C(e)?S.match(e.car,t)||S.match(e.cdr,t):Array.isArray(e)?e.some(function(n){return S.match(n,t)}):lt(e)?Object.values(e).some(function(n){return S.match(n,t)}):!1};S.prototype.find=function(e){return S.match(this,e)};S.prototype.clone=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=new Map;function n(r){if(C(r)){if(t.has(r))return t.get(r);var i=new S;return t.set(r,i),e?i.car=n(r.car):i.car=r.car,i.cdr=n(r.cdr),i[Ve]=r[Ve],i}return r}return n(this)};S.prototype.last_pair=function(){for(var e=this;;){if(!C(e.cdr))return e;if(e.have_cycles("cdr"))break;e=e.cdr}};S.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=[];return C(this.car)?e?t.push(this.car.to_array()):t.push(this.car):t.push(this.car.valueOf()),C(this.cdr)&&(t=t.concat(this.cdr.to_array(e))),t};S.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(C(e)||n&&e instanceof Array&&e[gt])return e;if(t===!1){for(var r=re,i=e.length;i--;)r=new S(e[i],r);return r}e.length&&!(e instanceof Array)&&(e=we(e));for(var a=re,u=e.length;u--;){var s=e[u];s instanceof Array?s=S.fromArray(s,t,n):typeof s=="string"?s=Z(s):typeof s=="number"&&!Number.isNaN(s)&&(s=_(s)),a=new S(s,a)}return a};S.prototype.to_object=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this,n={};C(t)&&C(t.car);){var r=t.car,i=r.car;i instanceof x&&(i=i.__name__),i instanceof Z&&(i=i.valueOf());var a=r.cdr;C(a)&&(a=a.to_object(e)),Zu(a)&&(e||(a=a.valueOf())),n[i]=a,t=t.cdr}return n};S.fromPairs=function(e){return e.reduce(function(t,n){return new S(new S(new x(n[0]),n[1]),t)},re)};S.fromObject=function(e){var t=Object.keys(e).map(function(n){return[n,e[n]]});return S.fromPairs(t)};S.prototype.reduce=function(e){for(var t=this,n=re;!$(t);)n=e(n,t.car),t=t.cdr;return n};S.prototype.reverse=function(){if(this.have_cycles())throw new Error("You can't reverse list that have cycles");for(var e=this,t=re;!$(e);){var n=e.cdr;e.cdr=t,t=e,e=n}return t};S.prototype.transform=function(e){function t(n){if(C(n)){if(n.replace)return delete n.replace,n;var r=e(n.car);C(r)&&(r=t(r));var i=e(n.cdr);return C(i)&&(i=t(i)),new S(r,i)}return n}return t(this)};S.prototype.map=function(e){return typeof this.car<"u"?new S(e(this.car),$(this.cdr)?re:this.cdr.map(e)):re};Tn=new Map;$u=Object.getOwnPropertyNames(Array.prototype),Vu=[];$u.forEach(function(e){Vu.push(Array[e],Array.prototype[e])});Di=new Map;[[!0,"#t"],[!1,"#f"],[null,"#null"],[void 0,"#void"]].forEach(function(e){var t=ye(e,2),n=t[0],r=t[1];Di.set(n,r)});xi=new Map;[[Error,function(e){return e.message}],[S,function(e,t){var n=t.quote,r=t.skip_cycles,i=t.pair_args;return r||e.mark_cycles(),e.toString.apply(e,[n].concat(we(i)))}],[de,function(e,t){var n=t.quote;return n?e.toString():e.valueOf()}],[Z,function(e,t){var n=t.quote;return e=e.toString(),n?JSON.stringify(e).replace(/\\n/g,`
`):e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=ye(e,2),n=t[0],r=t[1];xi.set(n,r)});Cc=[x,fe,Ke,Ge,xe,Le];S.prototype.mark_cycles=function(){return Oc(this),this};S.prototype.have_cycles=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?!!(this[Ve]&&this[Ve][e]):this.have_cycles("car")||this.have_cycles("cdr")};S.prototype.is_cycle=function(){return Ei(this)};S.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.nested,r=n===void 0?!1:n,i=[];this[hn]?i.push(this[hn]+"("):r||i.push("(");var a;if(this[Ve]&&this[Ve].car?a=this[Ve].car:a=He(this.car,e,!0),a!==void 0&&i.push(a),C(this.cdr))if(this[Ve]&&this[Ve].cdr)i.push(" . "),i.push(this[Ve].cdr);else{this.cdr[hn]?i.push(" . "):i.push(" ");var u=this.cdr.toString(e,{nested:!0});i.push(u)}else $(this.cdr)||(i=i.concat([" . ",He(this.cdr,e,!0)]));return(!r||this[hn])&&i.push(")"),i.join("")};S.prototype.set=function(e,t){this[e]=t,C(t)&&this.mark_cycles()};S.prototype.append=function(e){if(e instanceof Array)return this.append(S.fromArray(e));var t=this;if(t.car===void 0)C(e)?(this.car=e.car,this.cdr=e.cdr):this.car=e;else if(!$(e)){for(;C(t)&&!$(t.cdr);)t=t.cdr;t.cdr=e}return this};S.prototype.serialize=function(){return[this.car,this.cdr]};S.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var n=e;return e=n.cdr,$(n)?{value:void 0,done:!0}:{value:n.car,done:!1}}}};Bc=function(){return Math.trunc?Math.trunc:function(e){return e===0?0:e<0?Math.ceil(e):Math.floor(e)}}();fe.defmacro=function(e,t,n,r){var i=new fe(e,t,n,r);return i.__defmacro__=!0,i};fe.prototype.invoke=function(e,t,n){var r=t.env,i=gn(t,Ss),a=se(se({},i),{},{macro_expand:n}),u=this.__fn__.call(r,e,a,this.__name__);return u};fe.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};Yu="define-macro";Ha=-1e4;Me.__merge_env__=Symbol.for("merge");Me.prototype=Object.create(fe.prototype);Me.prototype.invoke=function(e,t,n){var r=t.error,i=t.env,a=t.use_dynamic,u={error:r,env:i,use_dynamic:a,dynamic_env:this.__env__,macro_expand:n};return this.__fn__.call(i,e,u,this.__name__||"syntax")};Me.prototype.constructor=Me;Me.prototype.toString=function(){return this.__name__?"#<syntax:".concat(this.__name__,">"):"#<syntax>"};mn=Dt(function e(t){wt(this,e),X(this,"_syntax",t,{hidden:!0}),X(this._syntax,"_param",!0,{hidden:!0})});Me.Parameter=mn;to=Symbol.for("__context__"),no=Symbol.for("__fn__"),gt=Symbol.for("__data__"),hn=Symbol.for("__ref__"),Ve=Symbol.for("__cycles__"),Gc=Symbol.for("__class__"),Yc=Symbol.for("__method__"),ro=Symbol.for("__prototype__"),io=Symbol.for("__lambda__"),Wc=["name","length","caller","callee","arguments","prototype"];ln=Rr(oo,1),lr=Rr(oo,2);de.is=function(e,t){return e instanceof de&&e.__char__===t};de.__names__=Cu;de.__rev_names__={};Object.keys(de.__names__).forEach(function(e){var t=de.__names__[e];de.__rev_names__[t]=e});de.prototype.toUpperCase=function(){return de(this.__char__.toUpperCase())};de.prototype.toLowerCase=function(){return de(this.__char__.toLowerCase())};de.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};de.prototype.valueOf=de.prototype.serialize=function(){return this.__char__};{Za=["length","constructor"],Xa=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!Za.includes(e)}),eu=function(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(this.__string__,r)}},In=It(Xa);try{for(In.s();!(ri=In.n()).done;)ii=ri.value,Z.prototype[ii]=eu(String.prototype[ii])}catch(e){In.e(e)}finally{In.f()}}Z.prototype[Symbol.iterator]=ae.mark(function e(){var t,n,r,i;return ae.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=Array.from(this.__string__),n=0,r=t;case 2:if(!(n<r.length)){u.next=9;break}return i=r[n],u.next=6,de(i);case 6:n++,u.next=2;break;case 9:case"end":return u.stop()}},e,this)});Z.prototype.serialize=function(){return this.valueOf()};Z.is=function(e,t){return e instanceof Z&&e.__string__===t};Z.isString=function(e){return e instanceof Z||typeof e=="string"};Z.prototype.freeze=function(){var e=this.__string__;delete this.__string__,X(this,"__string__",e)};Z.prototype.get=function(e){return U("LString::get",e,"number"),Array.from(this.__string__)[e.valueOf()]};Z.prototype.cmp=function(e){U("LString::cmp",e,"string");var t=this.valueOf(),n=e.valueOf();return t<n?-1:t===n?0:1};Z.prototype.lower=function(){return Z(this.__string__.toLowerCase())};Z.prototype.upper=function(){return Z(this.__string__.toUpperCase())};Z.prototype.set=function(e,t){U("LString::set",e,"number"),U("LString::set",t,["string","character"]),e=e.valueOf(),t instanceof de&&(t=t.__char__);var n=[];e>0&&n.push(this.__string__.substring(0,e)),n.push(t),e<this.__string__.length-1&&n.push(this.__string__.substring(e+1)),this.__string__=n.join("")};Object.defineProperty(Z.prototype,"length",{get:function(){return this.__string__.length}});Z.prototype.clone=function(){return Z(this.valueOf())};Z.prototype.fill=function(e){U("LString::fill",e,["string","character"]),e instanceof de&&(e=e.valueOf());var t=this.__string__.length;this.__string__=e.repeat(t)};_.prototype.constant=function(e,t){_t(this,"__value__",e),_t(this,"__type__",t)};_.types={float:function(t){return new ue(t)},complex:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return _.isComplex(t)||(t={im:0,re:t}),new oe(t,n)},rational:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return _.isRational(t)||(t={num:t,denom:1}),new le(t,n)}};_.prototype.serialize=function(){return this.__value__};_.prototype.isNaN=function(){return Number.isNaN(this.__value__)};_.prototype.gcd=function(e){var t=this.abs();if(e=e.abs(),e.cmp(t)===1){var n=t;t=e,e=n}for(;;){if(t=t.rem(e),t.cmp(0)===0)return e;if(e=e.rem(t),e.cmp(0)===0)return t}};_.isFloat=function(t){return t instanceof ue||Number(t)===t&&t%1!==0};_.isNumber=function(e){return e instanceof _||_.isNative(e)||_.isBN(e)};_.isComplex=function(e){if(!e)return!1;var t=e instanceof oe||(_.isNumber(e.im)||_.isRational(e.im)||Number.isNaN(e.im))&&(_.isNumber(e.re)||_.isRational(e.re)||Number.isNaN(e.re));return t};_.isRational=function(e){return e?e instanceof le||_.isNumber(e.num)&&_.isNumber(e.denom):!1};_.isInteger=function(e){return!(!(_.isNative(e)||e instanceof _)||_.isFloat(e)||_.isRational(e)||_.isComplex(e))};_.isNative=function(e){return typeof e=="bigint"||typeof e=="number"};_.isBigInteger=function(e){return e instanceof Ee||typeof e=="bigint"||_.isBN(e)};_.isBN=function(e){return typeof yt<"u"&&e instanceof yt};_.getArgsType=function(e,t){return e instanceof ue||t instanceof ue?ue:e instanceof Ee||t instanceof Ee?Ee:_};_.prototype.toString=function(e){return Number.isNaN(this.__value__)?"+nan.0":e>=2&&e<36?this.__value__.toString(e):this.__value__.toString()};_.prototype.asType=function(e){var t=_.getType(this);return _.types[t]?_.types[t](e):_(e)};_.prototype.isBigNumber=function(){return typeof this.__value__=="bigint"||typeof yt<"u"&&!(this.value instanceof yt)};["floor","ceil","round"].forEach(function(e){_.prototype[e]=function(){return this.float||_.isFloat(this.__value__)?_(Math[e](this.__value__)):_(Math[e](this.valueOf()))}});_.prototype.valueOf=function(){if(_.isNative(this.__value__))return Number(this.__value__);if(_.isBN(this.__value__))return this.__value__.toNumber()};_r=function(){var e=function(r,i){return[r,i]};return{bigint:{bigint:e,float:function(r,i){return[ue(r.valueOf()),i]},rational:function(r,i){return[{num:r,denom:1},i]},complex:function(r,i){return[{im:0,re:r},i]}},integer:{integer:e,float:function(r,i){return[ue(r.valueOf()),i]},rational:function(r,i){return[{num:r,denom:1},i]},complex:function(r,i){return[{im:0,re:r},i]}},float:{bigint:function(r,i){return[r,i&&ue(i.valueOf())]},integer:function(r,i){return[r,i&&ue(i.valueOf())]},float:e,rational:function(r,i){return[r,i&&ue(i.valueOf())]},complex:function(r,i){return[{re:r,im:ue(0)},i]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function(r,i){var a=_.coerce(r.__re__,i.__re__),u=ye(a,2),s=u[0],o=u[1],f=_.coerce(r.__im__,i.__im__),c=ye(f,2),l=c[0],m=c[1];return[{im:l,re:s},{im:m,re:o}]}},rational:{bigint:function(r,i){return[r,i&&{num:i,denom:1}]},integer:function(r,i){return[r,i&&{num:i,denom:1}]},float:function(r,i){return[ue(r.valueOf()),i]},rational:e,complex:function(r,i){return[{im:Rt(r.__type__,i.__im__.__type__,0)[0],re:Rt(r.__type__,i.__re__.__type__,r)[0]},{im:Rt(r.__type__,i.__im__.__type__,i.__im__)[0],re:Rt(r.__type__,i.__re__.__type__,i.__re__)[0]}]}}};function t(n){return function(r,i){return[{im:Rt(n,r.__im__.__type__,0,r.__im__)[1],re:Rt(n,r.__re__.__type__,0,r.__re__)[1]},{im:Rt(n,r.__im__.__type__,0,0)[1],re:Rt(n,i.__type__,0,i)[1]}]}}}();_.coerce=function(e,t){var n=_.getType(e),r=_.getType(t);if(_r[n]){if(!_r[n][r])throw new Error("LNumber::coerce unknown rhs type ".concat(r))}else throw new Error("LNumber::coerce unknown lhs type ".concat(n));var i=_r[n][r](e,t);return i.map(function(a){return _(a,!0)})};_.prototype.coerce=function(e){if(!(typeof e=="number"||e instanceof _))throw new Error("LNumber: you can't coerce ".concat(ke(e)));return typeof e=="number"&&(e=_(e)),_.coerce(this,e)};_.getType=function(e){if(e instanceof _)return e.__type__;if(_.isFloat(e))return"float";if(_.isComplex(e))return"complex";if(_.isRational(e))return"rational";if(typeof e=="number")return"integer";if(typeof BigInt<"u"&&typeof e!="bigint"||typeof yt<"u"&&!(e instanceof yt))return"bigint"};_.prototype.isFloat=function(){return!!(_.isFloat(this.__value__)||this.float)};ai={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"},so={};Object.keys(ai).forEach(function(e){so[ai[e]]=e,_.prototype[e]=function(t){return this.op(ai[e],t)}});_._ops={"*":function(t,n){return t*n},"+":function(t,n){return t+n},"-":function(t,n){return typeof n>"u"?-t:t-n},"/":function(t,n){return t/n},"%":function(t,n){return t%n},"|":function(t,n){return t|n},"&":function(t,n){return t&n},"~":function(t){return~t},">>":function(t,n){return t>>n},"<<":function(t,n){return t<<n}};_.prototype.op=function(e,t){if(typeof t>"u")return _(_._ops[e](this.valueOf()));if(typeof t=="number"&&(t=_(t)),Number.isNaN(this.__value__)&&!_.isComplex(t)||!_.isComplex(this)&&Number.isNaN(t.__value__))return _(NaN);var n=this.coerce(t),r=ye(n,2),i=r[0],a=r[1];return i._op?i._op(e,a):_(_._ops[e](i,a))};_.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return oe({re:0,im:t})}return _(Math.sqrt(e))};Mr=function(t,n){return Math.pow(t,n)};try{ui=new Function("a,b","return a ** b"),ui(2,2)===4&&(Mr=ui)}catch{}_.prototype.pow=function(e){var t,n=this.coerce(e),r=ye(n,2),i=r[0],a=r[1];if(_.isNative(i.__value__)&&_.isNative(a.__value__))t=Mr(i.__value__,a.__value__);else if(_.isBN(i.__value__)&&_.isBN(a.__value__))t=this.__value__.pow(e.__value__);else if(i.pow)return i.pow(a);return _(t)};_.prototype.abs=function(){var e=this.__value__;return _.isNative(this.__value__)?e<0&&(e=-e):_.isBN(e)&&e.iabs(),new _(e)};_.prototype.isOdd=function(){if(_.isNative(this.__value__)){if(this.isBigNumber())return this.__value__%BigInt(2)===BigInt(1);if(this.__type__==="float")throw new Error("Invalid number float");return this.__value__%2===1}else if(_.isBN(this.__value__))return this.__value__.isOdd();throw new Error("Invalid number ".concat(this.__type__))};_.prototype.isEven=function(){return!this.isOdd()};_.prototype.cmp=function(e){var t=this.coerce(e),n=ye(t,2),r=n[0],i=n[1];function a(u,s){return u.__value__<s.__value__?-1:u.__value__===s.__value__?0:1}if(r.__type__==="bigint"){if(_.isNative(r.__value__))return a(r,i);if(_.isBN(r.__value__))return this.__value__.cmp(i.__value__)}else if(r instanceof ue)return a(r,i)};oe.prototype=Object.create(_.prototype);oe.prototype.constructor=oe;oe.prototype.constant=function(e,t){_t(this,"__im__",e),_t(this,"__re__",t),_t(this,"__type__","complex")};oe.prototype.abs=function(){return _(this.modulus())};oe.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};oe.prototype.toRational=function(e){var t=this.__im__,n=this.__re__;return _.isFloat(this.__im__)&&(t=ue(this.__im__).toRational(e)),_.isFloat(this.__re__)&&(n=ue(this.__re__).toRational(e)),oe({im:t,re:n})};oe.prototype.pow=function(e){if(e.cmp(0),e===0)return _(1);var t=_(Math.atan2(this.__im__.valueOf(),this.__re__.valueOf())),n=_(this.modulus());if(_.isComplex(e)&&e.__im__.cmp(0)!==0){var r=e.mul(Math.log(n.valueOf())).add(oe.i.mul(t).mul(e));if(!_.isComplex(r))return ue(Math.E).pow(r);var i=ue(Math.E).pow(r.__re__.valueOf());return oe({re:i.mul(Math.cos(r.__im__.valueOf())),im:i.mul(Math.sin(r.__im__.valueOf()))})}var a=e.__re__.cmp(0)>0;if(e=e.__re__.valueOf(),_.isInteger(e)&&a){for(var u=this;--e;)u=u.mul(this);return u}var s=n.pow(e),o=t.mul(e);return oe({re:s.mul(Math.cos(o)),im:s.mul(Math.sin(o))})};oe.prototype.add=function(e){return this.complex_op("add",e,function(t,n,r,i){return{re:t.add(n),im:r.add(i)}})};oe.prototype.factor=function(){if(this.__im__ instanceof ue||this.__im__ instanceof ue){var e=this.__re__,t=this.__im__,n,r;return e instanceof ue?n=e.toRational().mul(e.toRational()):n=e.mul(e),t instanceof ue?r=t.toRational().mul(t.toRational()):r=t.mul(t),n.add(r)}else return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))};oe.prototype.modulus=function(){return this.factor().sqrt()};oe.prototype.conjugate=function(){return oe({re:this.__re__,im:this.__im__.sub()})};oe.prototype.sqrt=function(){var e=this.modulus(),t,n;return e.cmp(0)===0?t=n=e:this.__re__.cmp(0)===1?(t=ue(.5).mul(e.add(this.__re__)).sqrt(),n=this.__im__.div(t).div(2)):(n=ue(.5).mul(e.sub(this.__re__)).sqrt(),this.__im__.cmp(0)===-1&&(n=n.sub()),t=this.__im__.div(n).div(2)),oe({im:n,re:t})};oe.prototype.div=function(e){if(_.isNumber(e)&&!_.isComplex(e)){e instanceof _||(e=_(e));var t=this.__re__.div(e),n=this.__im__.div(e);return oe({re:t,im:n})}else if(!_.isComplex(e))throw new Error("[LComplex::div] Invalid value");if(this.cmp(e)===0){var r=this.coerce(e),i=ye(r,2),a=i[0],u=i[1],s=a.__im__.div(u.__im__);return s.coerce(u.__re__)[0]}var o=this.coerce(e),f=ye(o,2),c=f[0],l=f[1],m=l.factor(),k=l.conjugate(),L=c.mul(k);if(!_.isComplex(L))return L.div(m);var b=L.__re__.op("/",m),g=L.__im__.op("/",m);return oe({re:b,im:g})};oe.prototype.sub=function(e){return this.complex_op("sub",e,function(t,n,r,i){return{re:t.sub(n),im:r.sub(i)}})};oe.prototype.mul=function(e){return this.complex_op("mul",e,function(t,n,r,i){var a={re:t.mul(n).sub(r.mul(i)),im:t.mul(i).add(n.mul(r))};return a})};oe.prototype.complex_op=function(e,t,n){var r=this,i=function(f,c){var l=n(r.__re__,f,r.__im__,c);return"im"in l&&"re"in l?l.im.cmp(0)===0?l.re:oe(l,!0):l};if(typeof t>"u")return i();if(_.isNumber(t)&&!_.isComplex(t)){t instanceof _||(t=_(t));var a=t.asType(0);t={__im__:a,__re__:t}}else if(!_.isComplex(t))throw new Error("[LComplex::".concat(e,"] Invalid value"));var u=t.__re__ instanceof _?t.__re__:this.__re__.asType(t.__re__),s=t.__im__ instanceof _?t.__im__:this.__im__.asType(t.__im__);return i(u,s)};oe._op={"+":"add","-":"sub","*":"mul","/":"div"};oe.prototype._op=function(e,t){var n=oe._op[e];return this[n](t)};oe.prototype.cmp=function(e){var t=this.coerce(e),n=ye(t,2),r=n[0],i=n[1],a=r.__re__.coerce(i.__re__),u=ye(a,2),s=u[0],o=u[1],f=s.cmp(o);if(f!==0)return f;var c=r.__im__.coerce(i.__im__),l=ye(c,2),m=l[0],k=l[1];return m.cmp(k)};oe.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};oe.prototype.toString=function(){var e;this.__re__.cmp(0)!==0?e=[He(this.__re__)]:e=[];var t=this.__im__.valueOf(),n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t),r=He(this.__im__);if(!n&&!Number.isNaN(t)){var i=this.__im__.cmp(0);i<0||i===0&&this.__im__._minus?e.push("-"):e.push("+"),r=r.replace(/^-/,"")}return e.push(r),e.push("i"),e.join("")};ue.prototype=Object.create(_.prototype);ue.prototype.constructor=ue;ue.prototype.toString=function(e){if(this.__value__===Number.NEGATIVE_INFINITY)return"-inf.0";if(this.__value__===Number.POSITIVE_INFINITY)return"+inf.0";if(Number.isNaN(this.__value__))return"+nan.0";e&&(e=e.valueOf());var t=this.__value__.toString(e);if(!t.match(/e[+-]?[0-9]+$/i)){var n=t.replace(/^-/,""),r=this.__value__<0?"-":"";if(t.match(/^-?0\.0{3}/)){var i=n.match(/^[.0]+/g)[0].length-1,a=n.replace(/^[.0]+/,"").replace(/^([0-9a-f])/i,"$1.");return"".concat(r).concat(a,"e-").concat(i.toString(e))}if(t.match(/^-?[0-9a-f]{7,}\.?/i)){var u=n.match(/^[0-9a-f]+/gi)[0].length-1,s=n.replace(/\./,"").replace(/^([0-9a-f])/i,"$1.").replace(/0+$/,"").replace(/\.$/,".0");return"".concat(r).concat(s,"e+").concat(u.toString(e))}if(!_.isFloat(this.__value__)){var o=t+".0";return this._minus?"-"+o:o}}return t.replace(/^([0-9]+)e/,"$1.0e")};ue.prototype._op=function(e,t){t instanceof _&&(t=t.__value__);var n=_._ops[e];return e==="/"&&this.__value__===0&&t===0?NaN:ue(n(this.__value__,t))};ue.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?ef(this.__value__.valueOf()):co(e.valueOf())(this.__value__.valueOf())};ue.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=ue(Math.sqrt(-e));return oe({re:0,im:t})}return ue(Math.sqrt(e))};ue.prototype.abs=function(){var e=this.valueOf();return e<0&&(e=-e),ue(e)};ef=co(1e-10);le.prototype=Object.create(_.prototype);le.prototype.constructor=le;le.prototype.constant=function(e,t){_t(this,"__num__",e),_t(this,"__denom__",t),_t(this,"__type__","rational")};le.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};le.prototype.pow=function(e){if(_.isRational(e))return _(Mr(this.valueOf(),e.valueOf()));var t=e.cmp(0);if(t===0)return _(1);if(t===-1){e=e.sub();var n=this.__denom__.pow(e),r=this.__num__.pow(e);return le({num:n,denom:r})}var i=this;for(e=e.valueOf();e>1;)i=i.mul(this),e--;return i};le.prototype.sqrt=function(){var e=this.__num__.sqrt(),t=this.__denom__.sqrt();return e instanceof ue||t instanceof ue?e.div(t):le({num:e,denom:t})};le.prototype.abs=function(){var e=this.__num__,t=this.__denom__;return e.cmp(0)===-1&&(e=e.sub()),t.cmp(0)!==1&&(t=t.sub()),le({num:e,denom:t})};le.prototype.cmp=function(e){return _(this.valueOf(),!0).cmp(e)};le.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__),t,n;e.cmp(1)!==0?(t=this.__num__.div(e),t instanceof le&&(t=_(t.valueOf(!0))),n=this.__denom__.div(e),n instanceof le&&(n=_(n.valueOf(!0)))):(t=this.__num__,n=this.__denom__);var r=this.cmp(0)<0;if(r){if(t.abs().cmp(n.abs())===0)return t.toString()}else if(t.cmp(n)===0)return t.toString();return t.toString()+"/"+n.toString()};le.prototype.valueOf=function(e){return this.__denom__.cmp(0)===0?this.__num__.cmp(0)<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:e?_._ops["/"](this.__num__.value,this.__denom__.value):ue(this.__num__.valueOf()).div(this.__denom__.valueOf())};le.prototype.mul=function(e){if(e instanceof _||(e=_(e)),_.isRational(e)){var t=this.__num__.mul(e.__num__),n=this.__denom__.mul(e.__denom__);return le({num:t,denom:n})}var r=_.coerce(this,e),i=ye(r,2),a=i[0],u=i[1];return a.mul(u)};le.prototype.div=function(e){if(e instanceof _||(e=_(e)),_.isRational(e)){var t=this.__num__.mul(e.__denom__),n=this.__denom__.mul(e.__num__);return le({num:t,denom:n})}var r=_.coerce(this,e),i=ye(r,2),a=i[0],u=i[1],s=a.div(u);return s};le.prototype._op=function(e,t){return this[so[e]](t)};le.prototype.sub=function(e){if(typeof e>"u")return this.mul(-1);if(e instanceof _||(e=_(e)),_.isRational(e)){var t=e.__num__.sub(),n=e.__denom__;return this.add(le({num:t,denom:n}))}e instanceof _?e=e.sub():e=_(e).sub();var r=_.coerce(this,e),i=ye(r,2),a=i[0],u=i[1];return a.add(u)};le.prototype.add=function(e){if(e instanceof _||(e=_(e)),_.isRational(e)){var t=this.__denom__,n=e.__denom__,r=this.__num__,i=e.__num__,a,u;return t!==n?(u=n.mul(r).add(i.mul(t)),a=t.mul(n)):(u=r.add(i),a=t),le({num:u,denom:a})}if(_.isFloat(e))return ue(this.valueOf()).add(e);var s=_.coerce(this,e),o=ye(s,2),f=o[0],c=o[1];return f.add(c)};Ee.prototype=Object.create(_.prototype);Ee.prototype.constructor=Ee;Ee.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};Ee.prototype.serialize=function(){return this.__value__.toString()};Ee.prototype._op=function(e,t){if(typeof t>"u")return _.isBN(this.__value__)?(e=Ee.bn_op[e],Ee(this.__value__.clone()[e](),!1)):Ee(_._ops[e](this.__value__),!0);if(_.isBN(this.__value__)&&_.isBN(t.__value__))return e=Ee.bn_op[e],Ee(this.__value__.clone()[e](t),!1);var n=_._ops[e](this.__value__,t.__value__);if(e==="/"){var r=this.op("%",t).cmp(0)===0;return r?_(n):le({num:this,denom:t})}return Ee(n,!0)};Ee.prototype.sqrt=function(){var e,t=this.cmp(0)<0;return _.isNative(this.__value__)?e=_(Math.sqrt(t?-this.valueOf():this.valueOf())):_.isBN(this.__value__)&&(e=t?this.__value__.neg().sqrt():this.__value__.sqrt()),t?oe({re:0,im:e}):e};_.NaN=_(NaN);oe.i=oe({im:1,re:0});Ke.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()}),this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()}),this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()}),this.read_string=this._with_parser(function(e,t){if(!_.isInteger(t)){var n=_.getType(t);$t("read-string",n,"integer")}return e.__lexer__.read_string(t.valueOf())}),this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Ke.prototype._with_init_parser=function(e,t){var n=this;return Oe(ae.mark(function r(){var i,a,u,s,o=arguments;return ae.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.call(n);case 2:for(i=c.sent,a=o.length,u=new Array(a),s=0;s<a;s++)u[s]=o[s];return c.abrupt("return",t.apply(void 0,[i].concat(u)));case 5:case"end":return c.stop()}},r)}))};Ke.prototype.is_open=function(){return this._with_parser!==null};Ke.prototype.close=function(){var e=this;this.__parser__=null,this._with_parser=null,["read","close","read_char","peek-char","read_line"].forEach(function(t){e[t]=function(){throw new Error("input-port: port is closed")}}),this.char_ready=function(){return!1}};Ke.prototype.toString=function(){return"#<input-port>"};Ge.prototype.is_open=function(){return this._closed!==!0};Ge.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function(){return!0},set:function(){},configurable:!1,enumerable:!1}),this.write=function(){throw new Error("output-port: port is closed")}};Ge.prototype.flush=function(){};Ge.prototype.toString=function(){return"#<output-port>"};Cr=function(e){function t(n){var r;return wt(this,t),r=Pi(this,t,[function(){var i;return(i=r)._write.apply(i,arguments)}]),U("BufferedOutputPort",n,"function"),X(r,"_fn",n,{hidden:!0}),X(r,"_buffer",[],{hidden:!0}),r}return Ci(t,e),Dt(t,[{key:"flush",value:function(){this._buffer.length&&(this._fn(this._buffer.join("")),this._buffer.length=0)}},{key:"_write",value:function(){for(var r=this,i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];if(a.length){a.forEach(function(o){r._buffer.push(o)});var s=this._buffer[this._buffer.length-1];s.match(/\n$/)&&(this._buffer[this._buffer.length-1]=s.replace(/\n$/,""),this.flush())}}}])}(Ge);Bt.prototype=Object.create(Ge.prototype);Bt.prototype.constructor=Bt;Bt.prototype.toString=function(){return"#<output-port (string)>"};Bt.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};st.prototype=Object.create(Ge.prototype);st.prototype.constructor=st;st.prototype.fs=function(){return this._fs||(this._fs=this.internal("fs")),this._fs};st.prototype.internal=function(e){return Be.get("**internal-env**").get(e)};st.prototype.close=function(){var e=this;return new Promise(function(t,n){e.fs().close(e._fd,function(r){r?n(r):(X(e,"_fd",null,{hidden:!0}),Ge.prototype.close.call(e),t())})})};st.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};pt.prototype.char_ready=function(){return!0};pt.prototype=Object.create(Ke.prototype);pt.prototype.constructor=pt;pt.prototype.toString=function(){return"#<input-port (string)>"};Yt.prototype.char_ready=function(){return!0};Yt.prototype=Object.create(Ke.prototype);Yt.prototype.constructor=Yt;Yt.prototype.toString=function(){return"#<input-port (parser)>"};et.prototype=Object.create(Ke.prototype);et.prototype.constructor=et;et.prototype.toString=function(){return"#<input-port (bytevector)>"};et.prototype.close=function(){var e=this;X(this,"__vector__",re);var t=function(){throw new Error("Input-binary-port: port is closed")};["read_u8","close","peek_u8","read_u8_vector"].forEach(function(n){e[n]=t}),this.u8_ready=this.char_ready=function(){return!1}};et.prototype.u8_ready=function(){return!0};et.prototype.peek_u8=function(){return this.__index__>=this.__vector__.length?je:this.__vector__[this.__index__]};et.prototype.skip=function(){this.__index__<=this.__vector__.length&&++this.__index__};et.prototype.read_u8=function(){var e=this.peek_u8();return this.skip(),e};et.prototype.read_u8_vector=function(e){return typeof e>"u"?e=this.__vector__.length:e>this.__index__+this.__vector__.length&&(e=this.__index__+this.__vector__.length),this.peek_u8()===je?je:this.__vector__.slice(this.__index__,e)};ct.prototype=Object.create(Ge.prototype);ct.prototype.constructor=ct;ct.prototype.close=function(){Ge.prototype.close.call(this),X(this,"_buffer",null,{hidden:!0})};ct.prototype._close_guard=function(){if(this._closed)throw new Error("output-port: binary port is closed")};ct.prototype.write_u8=function(e){U("OutputByteVectorPort::write_u8",e,"number"),this.write(e)};ct.prototype.write_u8_vector=function(e){U("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)};ct.prototype.toString=function(){return"#<output-port (bytevector)>"};ct.prototype.valueOf=function(){return this.__buffer__};Wt.prototype=Object.create(pt.prototype);Wt.prototype.constructor=Wt;Wt.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};an.prototype=Object.create(et.prototype);an.prototype.constructor=an;an.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};jt.prototype=Object.create(st.prototype);jt.prototype.constructor=jt;jt.prototype.write_u8=function(e){U("OutputByteVectorPort::write_u8",e,"number"),this.write(e)};jt.prototype.write_u8_vector=function(e){U("OutputByteVectorPort::write_u8_vector",e,"uint8array"),this.write(e)};qr=Symbol.for("binary"),xn=Symbol.for("text"),je=new ta;ta.prototype.toString=function(){return"#<eof>"};un.prototype.exec=function(){var e=Oe(function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ae.mark(function i(){var a,u,s,o,f,c;return ae.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(a=r.use_dynamic,u=a===void 0?!1:a,s=r.dynamic_env,o=r.env,U("Interpreter::exec",t,["string","array"],1),U("Interpreter::exec",u,"boolean",2),o||(o=n.__env__),s||(s=o),H.set("**interaction-environment**",n.__env__),!Array.isArray(t)){m.next=10;break}return m.abrupt("return",Kt(t,{env:o,dynamic_env:s,use_dynamic:u}));case 10:return m.prev=10,n.__parser__.prepare(t),m.next=14,Kt(n.__parser__,{env:o,dynamic_env:s,use_dynamic:u});case 14:return m.abrupt("return",m.sent);case 17:throw m.prev=17,m.t0=m.catch(10),(f=m.t0.message)!==null&&f!==void 0&&f.includes("at line")||(c=" at line ".concat(n.__parser__.get_line()+1),m.t0.message+=c),m.t0;case 21:case"end":return m.stop()}},i,null,[[10,17]])})()});return function(t){return e.apply(this,arguments)}}();un.prototype.get=function(e){var t=this.__env__.get(e);if(pe(t)){var n=new zr({env:this.__env__});return t.bind(n)}return t};un.prototype.set=function(e,t){return this.__env__.set(e,t)};un.prototype.constant=function(e,t){return this.__env__.constant(e,t)};$n.prototype=new Error;$n.prototype.constructor=$n;Ln=function(e){function t(){return wt(this,t),Pi(this,t,arguments)}return Ci(t,e),Dt(t)}(vr(Error));xe.prototype.list=function(){return Gu(this.__env__)};xe.prototype.fs=function(){return this.get("**fs**")};xe.prototype.unset=function(e){e instanceof x&&(e=e.valueOf()),e instanceof Z&&(e=e.valueOf()),delete this.__env__[e]};xe.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ge(e)==="object"&&(t=e),(!e||ge(e)==="object")&&(e="child of "+(this.__name__||"unknown")),new xe(t||{},this,e)};xe.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e instanceof x&&(e=e.__name__),e instanceof Z&&(e=e.valueOf()),t)return n||(t=Yi(t)),this.__docs__.set(e,t),this;if(this.__docs__.has(e))return this.__docs__.get(e);if(this.__parent__)return this.__parent__.doc(e)};xe.prototype.new_frame=function(e,t){var n=this.inherit("__frame__");return n.set("parent.frame",E("parent.frame",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;r=r.valueOf();var i=n.__parent__;if(!Qi(i))return re;if(r<=0)return i;var a=i.get("parent.frame");return a(r-1)},H.__env__["parent.frame"].__doc__)),t.callee=e,n.set("arguments",t),n};xe.prototype._lookup=function(e){if(e instanceof x&&(e=e.__name__),e instanceof Z&&(e=e.valueOf()),this.__env__.hasOwnProperty(e))return Je(this.__env__[e]);if(this.__parent__)return this.__parent__._lookup(e)};xe.prototype.toString=function(){return"#<environment:"+this.__name__+">"};xe.prototype.clone=function(){var e=this,t={};return Object.keys(this.__env__).forEach(function(n){t[n]=e.__env__[n]}),new xe(t,this.__parent__,this.__name__)};xe.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"merge";return U("Environment::merge",e,"environment"),this.inherit(t,e.__env__)};Je.isUndefined=function(e){return e instanceof Je&&typeof e.value>"u"};Je.prototype.valueOf=function(){return this.value};Jt.prototype.toString=function(){return this.__values__.map(function(e){return He(e)}).join(`
`)};Jt.prototype.valueOf=function(){return this.__values__};xe.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};U("Environment::get",e,["symbol","string"]);var n=t.throwError,r=n===void 0?!0:n,i=e;(i instanceof x||i instanceof Z)&&(i=i.valueOf());var a=this._lookup(i);if(a instanceof Je)return Je.isUndefined(a)?void 0:kr(a.valueOf());var u;if(e instanceof x&&e[x.object]?u=e[x.object]:typeof i=="string"&&(u=i.split(".").filter(Boolean)),u&&u.length>0){var s=u,o=mr(s),f=o[0],c=o.slice(1);if(a=this._lookup(f),c.length)try{if(a instanceof Je?a=a.valueOf():(a=Rn(St,f),pe(a)&&(a=tt(a))),typeof a<"u")return Rn.apply(void 0,[a].concat(we(c)))}catch(l){throw l}else if(a instanceof Je)return kr(a.valueOf());a=Rn(St,i)}if(typeof a<"u")return a;if(r)throw new Error("Unbound variable `"+i.toString()+"'")};xe.prototype.set=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return U("Environment::set",e,["string","symbol"]),_.isNumber(t)&&(t=_(t)),e instanceof x&&(e=e.__name__),e instanceof Z&&(e=e.valueOf()),this.__env__[e]=t,n&&this.doc(e,n,!0),this};xe.prototype.constant=function(e,t){var n=this;if(this.__env__.hasOwnProperty(e))throw new Error("Environment::constant: ".concat(e," already exists"));if(arguments.length===1&&lt(arguments[0])){var r=arguments[0];Object.keys(r).forEach(function(i){n.constant(e,r[i])})}else _t(this.__env__,e,t);return this};xe.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};xe.prototype.ref=function(e){for(var t=this;t;){if(t.has(e))return t;t=t.__parent__}};xe.prototype.parents=function(){for(var e=this,t=[];e;)t.unshift(e),e=e.__parent__;return t};nf=Gi(bn(`(lambda ()
                                        "[native code]"
                                        (throw "Invalid Invocation"))`))[0],Rn=E("get",function(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var u=i.length;i.length;){pe(t)&&ge(i[0])!=="symbol"&&(t=tt(t));var s=i.shift(),o=Gt(s);if(o==="then"&&t instanceof Le?n=Le.prototype.then:o==="__code__"&&pe(t)&&typeof t.__code__>"u"?n=nf:n=t[o],typeof n>"u"){if(i.length)throw new Error("Try to get ".concat(i[0]," from undefined"));return n}else{var f;i.length-1<u&&(f=t),n=kr(n,f)}t=n}return n},`(. obj . args)
    (get obj . args)

    This function uses an object as a base and keeps using arguments to get the
    property of JavaScript object. Arguments need to be a strings.
    e.g. \`(. console "log")\` if you use any function inside LIPS it
    will be weakly bound (can be rebound), so you can call this log function
    without problem unlike in JavaScript when you use
    \`var log = console.log\`.
    \`get\` is an alias because . doesn't work everywhere, e.g. you can't
    pass it as an argument.`);lo=new xe({stdout:new Cr(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Cr(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:Ke(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDD40-\uDD49\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDED0-\uDEE3\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59\uDFF0-\uDFF9]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD818[\uDD30-\uDD39]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDD70-\uDD79\uDE80-\uDE96]|\uD833[\uDCF0-\uDCF9]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9\uDDF1-\uDDFA]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},void 0,"internal"),Or=_(NaN),tu=se({"#t":!0,"#f":!1,"#true":!0,"#false":!1,"+inf.0":Number.POSITIVE_INFINITY,"-inf.0":Number.NEGATIVE_INFINITY,"+nan.0":Or,"-nan.0":Or},Lu),H=new xe({eof:je,undefined:void 0,"peek-char":E("peek-char",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=_n(this,"stdin")),nr("peek-char",e,"input-port"),e.peek_char()},`(peek-char port)

        This function reads and returns a character from the string
        port, or, if there is no more data in the string port, it
        returns an EOF.`),"read-line":E("read-line",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=_n(this,"stdin")),nr("read-line",e,"input-port"),e.read_line()},`(read-line port)

        This function reads and returns the next line from the input
        port.`),"read-char":E("read-char",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null&&(e=_n(this,"stdin")),nr("read-char",e,"input-port"),e.read_char()},`(read-char port)

        This function reads and returns the next character from the
        input port.`),read:E("read",function(){var e=Oe(function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return ae.mark(function i(){var a,u;return ae.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=n.env,r===null?u=_n(a,"stdin"):u=r,nr("read",u,"input-port"),o.abrupt("return",u.read.call(a));case 4:case"end":return o.stop()}},i)})()});function t(){return e.apply(this,arguments)}return t}(),`(read [port])

        This function, if called with a port, it will parse the next
        item from the port. If called without an input, it will read
        a string from standard input (using the browser's prompt or
        a user defined input method) and parse it. This function can be
        used together with \`eval\` to evaluate code from port.`),pprint:E("pprint",function(t){C(t)?(t=new bt.Formatter(t.toString(!0)).break().format(),H.get("display").call(H,t)):H.get("write").call(H,t),H.get("newline").call(H)},`(pprint expression)

        This function will pretty print its input to stdout. If it is called
        with a non-list, it will just call the print function on its
        input.`),print:E("print",function(){for(var t=H.get("display"),n=H.get("newline"),r=this.use_dynamic,i=H,a=H,u=arguments.length,s=new Array(u),o=0;o<u;o++)s[o]=arguments[o];s.forEach(function(f){dn(t,[f],{env:i,dynamic_env:a,use_dynamic:r}),dn(n,[],{env:i,dynamic_env:a,use_dynamic:r})})},`(print . args)

        This function converts each input into a string and prints
        the result to the standard output (by default it's the
        console but it can be defined in user code). This function
        calls \`(newline)\` after printing each input.`),format:E("format",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U("format",t,"string");var a=/(~[as%~])/g,u=t.match(/(~[as])/g);if(u&&u.length>r.length)throw new Error("Not enough arguments");var s=0,o=H.get("repr");if(t=t.replace(a,function(f){var c=f[1];if(c==="~")return"~";if(c==="%")return`
`;var l=r[s++];return c==="a"?o(l):o(l,!0)}),u=t.match(/~([\S])/),u)throw new Error("format: Unrecognized escape sequence ".concat(u[1]));return t},`(format string n1 n2 ...)

        This function accepts a string template and replaces any
        escape sequences in its inputs:

        * ~a value as if printed with \`display\`
        * ~s value as if printed with \`write\`
        * ~% newline character
        * ~~ literal tilde '~'

        If there are missing inputs or other escape characters it
        will error.`),newline:E("newline",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=H.get("display"),r=this.use_dynamic,i=H,a=H;dn(n,[`
`,t],{env:i,dynamic_env:a,use_dynamic:r})},`(newline [port])

        Write newline character to standard output or given port`),display:E("display",function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;n===null?n=_n(this,"stdout"):U("display",n,"output-port");var r=t;n instanceof jt||(r=H.get("repr")(t)),n.write.call(H,r)},`(display string [port])

        This function outputs the string to the standard output or
        the port if given. No newline.`),"display-error":E("display-error",function(){for(var t=_n(this,"stderr"),n=H.get("repr"),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var u=i.map(n).join(" ");t.write.call(H,u),H.get("newline").call(this,t)},`(display-error . args)

        Display an error message on stderr.`),"%foldcase-string":E("%foldcase-string",zu,`(%foldcase-string string)

         Same as string-foldcase but without typechecking`),"%same-functions":E("%same-functions",function(e,t){return!pe(e)||!pe(t)?!1:tt(e)===tt(t)},`(%same-functions a b)

        A helper function that checks if the two input functions are
        the same.`),help:E(new fe("help",function(e,t){var n=t.dynamic_env,r=t.use_dynamic,i=t.error,a;if(e.car instanceof x)a=e.car;else if(C(e.car)&&e.car.car instanceof x)a=e.car.car;else{var u=this;n=this;var s=ie(e.car,{env:u,error:i,dynamic_env:n,use_dynamic:r});return s&&s.__doc__?s.__doc__:void 0}var o,f=this.get(a);if(o=f&&f.__doc__,o)return o;var c=this.ref(a);if(c&&(o=c.doc(a),o))return o}),`(help object)

         This macro returns documentation for a function, macro, or a variable.`),cons:E("cons",function(t,n){return new S(t,n)},`(cons left right)

        This function returns a new list with the first appended
        before the second. If the second is not a list cons will
        return a dotted pair.`),car:E("car",function(t){return U("car",t,"pair"),t.car},`(car pair)

        This function returns the car (item 1) of the list.`),cdr:E("cdr",function(t){return U("cdr",t,"pair"),t.cdr},`(cdr pair)

        This function returns the cdr (all but first) of the list.`),"set!":E(new fe("set!",function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.use_dynamic,i=gn(n,js),a=this,u=this,s,o=se(se({},i),{},{env:this,dynamic_env:a,use_dynamic:r}),f=ie(e.cdr.car,o);f=En(f);function c(g,p,v){return Xe(g)?g.then(function(h){return c(g,h,v)}):Xe(p)?p.then(function(h){return c(g,h,v)}):Xe(v)?v.then(function(h){return c(g,p,h)}):(u.get("set-obj!").call(u,g,p,v),v)}if(C(e.car)&&x.is(e.car.car,".")){var l=e.car.cdr.car,m=e.car.cdr.cdr.car,k=ie(l,o),L=ie(m,o);return c(k,L,f)}if(!(e.car instanceof x))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");var b=e.car.valueOf();return s=this.ref(e.car.__name__),_e(f,function(g){if(!s){var p=b.split(".");if(p.length>1){var v=p.pop(),h=p.join("."),F=t.get(h,{throwError:!1});if(F){c(F,v,g);return}}throw new Error("Unbound variable `"+b+"'")}s.set(b,g)})}),`(set! name value)

         Macro that can be used to set the value of the variable or slot (mutate it).
         set! searches the scope chain until it finds first non empty slot and sets it.`),"unset!":E(new fe("set!",function(e){if(!(e.car instanceof x))throw new Error("unset! first argument need to be a symbol or dot accessor that evaluate to object.");var t=e.car,n=this.ref(t);n&&delete n.__env__[t.__name__]}),`(unset! name)

         Function to delete the specified name from environment.
         Trying to access the name afterwards will error.`),"set-car!":E("set-car!",function(e,t){U("set-car!",e,"pair"),e.car=t},`(set-car! obj value)

         Function that sets the car (first item) of the list/pair to specified value.
         The old value is lost.`),"set-cdr!":E("set-cdr!",function(e,t){U("set-cdr!",e,"pair"),e.cdr=t},`(set-cdr! obj value)

         Function that sets the cdr (tail) of the list/pair to specified value.
         It will destroy the list. The old tail is lost.`),"empty?":E("empty?",function(e){return typeof e>"u"||$(e)},`(empty? object)

         Function that returns #t if value is nil (an empty list) or undefined.`),gensym:E("gensym",Hi,`(gensym)

         Generates a unique symbol that is not bound anywhere,
         to use with macros as meta name.`),load:E("load",function(t,n){U("load",t,"string");var r=this;r.__name__==="__frame__"&&(r=r.__parent__),n instanceof xe||(r===H?n=r:n=this.get("**interaction-environment**"));var i="@lips",a=t.startsWith(i),u="**module-path**",s=H.get(u,{throwError:!1});t=t.valueOf(),t.match(/.[^.]+$/)||(t+=".scm");var o=t.match(/\.xcb$/);function f(g){return o?g=Fo(g):(ke(g)==="buffer"&&(g=g.toString()),g=g.replace(/^(#!.*)/,function(p,v){return Wu(v)?v:""}),g.match(/^\{/)&&(g=Do(g))),Kt(g,{env:n})}function c(g){return St.fetch(g).then(function(p){return o?p.arrayBuffer():p.text()}).then(function(p){return o&&(p=new Uint8Array(p)),p})}function l(){var g=H.get("__dirname");return g.replace(/[^/]+$/,"")}if(na())return new Promise(function(){var g=Oe(ae.mark(function p(v,h){var F,O,B,V,J;return ae.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,Ai;case 3:if(F=Mt("path"),O=Mt("fs"),B=l(),a&&(t=t.replace(i,B)),!s){R.next=12;break}s=s.valueOf(),t.startsWith("/")||(t=F.join(s,t)),R.next=19;break;case 12:if(t.startsWith("/")){R.next=19;break}if(V=r.get("command-line",{throwError:!1}),!V){R.next=18;break}return R.next=17,V();case 17:J=R.sent;case 18:J&&!$(J)&&(process.cwd(),t=F.join(F.dirname(J.car.valueOf()),t));case 19:H.set(u,F.dirname(t)),O.readFile(t,function(W,ce){if(W)h(W),H.set(u,s);else try{f(ce).then(function(){v(),H.set(u,s)}).catch(h)}catch(y){h(y)}}),R.next=26;break;case 23:R.prev=23,R.t0=R.catch(0),console.error(R.t0);case 26:case"end":return R.stop()}},p,null,[[0,23]])}));return function(p,v){return g.apply(this,arguments)}}());if(a){var m,k,L=(m=H.get("__dirname",{throwError:!1}))!==null&&m!==void 0?m:Sr;(k=L)!==null&&k!==void 0||(L=Sr);var b=L.replace(/dist\/?[^\/]*$/,"");t=t.replace(i,b)}return s&&(s=s.valueOf(),t.startsWith("/")||(t=s+"/"+t.replace(/^\.?\/?/,""))),c(t).then(function(g){return H.set(u,t.replace(/\/[^/]*$/,"")),f(g)}).then(function(){}).finally(function(){H.set(u,s)})},`(load filename)
        (load filename environment)

        Fetches the file (from disk or network) and evaluates its content as LIPS code.
        If the second argument is provided and it's an environment the evaluation
        will happen in that environment.`),while:E(new fe("while",function(e,t){var n=e.car,r=se(se({},t),{},{env:this}),i=new S(new x("begin"),e.cdr);return function a(){return _e(ie(n,r),function(u){if(u)return _e(ie(i,r),a)})}()}),`(while cond body)

         Creates a loop, it executes cond and body until cond expression is false.`),do:E(new fe("do",function(){var e=Oe(function(t,n){var r=this,i=n.use_dynamic,a=n.error;return ae.mark(function u(){var s,o,f,c,l,m,k,L,b,g;return ae.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s=r,o=s,f=s.inherit("do"),c=t.car,l=t.cdr.car,m=t.cdr.cdr,$(m)||(m=new S(x("begin"),m)),k={env:s,dynamic_env:o,use_dynamic:i,error:a},L=c;case 9:if($(L)){v.next=20;break}return b=L.car,v.t0=f,v.t1=b.car,v.next=15,ie(b.cdr.car,k);case 15:v.t2=v.sent,v.t0.set.call(v.t0,v.t1,v.t2),L=L.cdr,v.next=9;break;case 20:k={env:f,dynamic_env:o,error:a},g=ae.mark(function h(){var F,O,B,V,J;return ae.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if($(m)){R.next=3;break}return R.next=3,bt.evaluate(m,k);case 3:F=c,O={};case 5:if($(F)){R.next=15;break}if(B=F.car,$(B.cdr.cdr)){R.next=12;break}return R.next=10,ie(B.cdr.cdr.car,k);case 10:V=R.sent,O[B.car.valueOf()]=V;case 12:F=F.cdr,R.next=5;break;case 15:J=Object.getOwnPropertySymbols(O),k.env=f=s.inherit("do"),Object.keys(O).concat(J).forEach(function(W){f.set(W,O[W])});case 18:case"end":return R.stop()}},h)});case 22:return v.next=24,ie(l.car,k);case 24:if(v.t3=v.sent,v.t3!==!1){v.next=29;break}return v.delegateYield(g(),"t4",27);case 27:v.next=22;break;case 29:if($(l.cdr)){v.next=33;break}return v.next=32,ie(l.cdr.car,k);case 32:return v.abrupt("return",v.sent);case 33:case"end":return v.stop()}},u)})()});return function(t,n){return e.apply(this,arguments)}}()),`(do ((<var> <init> <next>)) (test return) . body)

         Iteration macro that evaluates the expression body in scope of the variables.
         On each loop it changes the variables according to the <next> expression and runs
         test to check if the loop should continue. If test is a single value, the macro
         will return undefined. If the test is a pair of expressions the macro will
         evaluate and return the second expression after the loop exits.`),if:E(new fe("if",function(e,t){var n=t.error,r=t.use_dynamic,i=this,a=this,u={env:a,dynamic_env:i,use_dynamic:r,error:n},s=function(c){return jn(c)?ie(e.cdr.cdr.car,u):ie(e.cdr.car,u)};if($(e))throw new Error("too few expressions for `if`");var o=ie(e.car,u);return _e(o,s)}),`(if cond true-expr false-expr)

         Macro that evaluates cond expression and if the value is true, it
         evaluates and returns true-expression, if not it evaluates and returns
         false-expression.`),"let-env":new fe("let-env",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.dynamic_env,r=t.use_dynamic,i=t.error;U("let-env",e,"pair");var a=ie(e.car,{env:this,dynamic_env:n,error:i,use_dynamic:r});return _e(a,function(u){return U("let-env",u,"environment"),ie(S(x("begin"),e.cdr),{env:u,dynamic_env:n,error:i})})},`(let-env env . body)

        Special macro that evaluates body in context of given environment
        object.`),letrec:E(er(Symbol.for("letrec")),`(letrec ((a value-a) (b value-b) ...) . body)

         Macro that creates a new environment, then evaluates and assigns values to
         names and then evaluates the body in context of that environment.
         Values are evaluated sequentially and the next value can access the
         previous values/names.`),"letrec*":E(er(Symbol.for("letrec")),`(letrec* ((a value-a) (b value-b) ...) . body)

         Same as letrec but the order of execution of the binding is guaranteed,
         so you can use recursive code as well as referencing the previous binding.

         In LIPS both letrec and letrec* behave the same.`),"let*":E(er(Symbol.for("let*")),`(let* ((a value-a) (b value-b) ...) . body)

         Macro similar to \`let\`, but the subsequent bindings after the first
         are evaluated in the environment including the previous let variables,
         so you can define one variable, and use it in the next's definition.`),let:E(er(Symbol.for("let")),`(let ((a value-a) (b value-b) ...) . body)

         Macro that creates a new environment, then evaluates and assigns values to names,
         and then evaluates the body in context of that environment.  Values are evaluated
         sequentially but you can't access previous values/names when the next are
         evaluated. You can only get them in the body of the let expression.  (If you want
         to define multiple variables and use them in each other's definitions, use
         \`let*\`.)`),"begin*":E(Qc("begin*",function(e){return e.pop()}),`(begin* . body)

         This macro is a parallel version of begin. It evaluates each expression
         in the body and if it's a promise it will await it in parallel and return
         the value of the last expression (i.e. it uses Promise.all()).`),shuffle:E("shuffle",function(e){U("shuffle",e,["pair","nil","array"]);var t=H.get("random");if($(e))return re;if(Array.isArray(e))return $a(e.slice(),t);var n=H.get("list->array")(e);return n=$a(n,t),H.get("array->list")(n)},`(shuffle obj)

        Order items in vector or list in random order.`),begin:E(new fe("begin",function(e,t){var n=se(se({},t),{},{env:this}),r=H.get("list->array")(e),i;return function a(){if(r.length){var u=r.shift(),s=ie(u,n);return _e(s,function(o){return i=o,a()})}else return i}()}),`(begin . args)

         Macro that runs a list of expressions in order and returns the value
         of the last one. It can be used in places where you can only have a
         single expression, like (if).`),ignore:new fe("ignore",function(e,t){var n=se(se({},t),{},{env:this,dynamic_env:this});ie(new S(new x("begin"),e),n)},`(ignore . body)

        Macro that will evaluate the expression and swallow any promises that may
        be created. It will discard any value that may be returned by the last body
        expression. The code should have side effects and/or when it's promise
        it should resolve to undefined.`),"call/cc":E(fe.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=se({env:this},t);return _e(ie(e.car,n),function(r){if(pe(r))return r(new yo(null))})}),`(call/cc proc)

         Call-with-current-continuation.

         NOT SUPPORTED BY LIPS RIGHT NOW`),parameterize:E(new fe("parameterize",function(e,t){var n=t.dynamic_env,r=n.inherit("parameterize").new_frame(null,{}),i=se(se({},t),{},{env:this}),a=e.car;if(!C(a)){var u=ke(a);throw new Error("Invalid syntax for parameterize expecting pair got ".concat(u))}function s(){var o=new S(new x("begin"),e.cdr);return ie(o,se(se({},i),{},{dynamic_env:r}))}return function o(){var f=a.car,c=f.car.valueOf();return _e(ie(f.cdr.car,i),function(l){var m=n.get(c,{throwError:!1});if(!vn(m))throw new Error("Unknown parameter ".concat(c));return r.set(c,m.inherit(l)),Ut(a.cdr)?s():(a=a.cdr,o())})}()}),`(parameterize ((name value) ...)

         Macro that change the dynamic variable created by make-parameter.`),"make-parameter":E(new fe("make-parameter",function(e,t){t.dynamic_env;var n=ie(e.car,t),r;return C(e.cdr.car)&&(r=ie(e.cdr.car,t)),new Ur(n,r)}),`(make-parameter init converter)

    Function creates new dynamic variable that can be custimized with parameterize
    macro. The value should be assigned to a variable e.g.:

    (define radix (make-parameter 10))

    The result value is a procedure that return the value of dynamic variable.`),"define-syntax-parameter":E(new fe("define-syntax-parameter",function(e,t){var n=e.car,r=this;if(!(n instanceof x))throw new Error("define-syntax-parameter: invalid syntax expecting symbol got ".concat(ke(n)));var i=ie(e.cdr.car,se({env:r},t));U("define-syntax-parameter",i,"syntax",2),i.__name__=n.valueOf(),i.__name__ instanceof Z&&(i.__name__=i.__name__.valueOf());var a;C(e.cdr.cdr)&&Z.isString(e.cdr.cdr.car)&&(a=e.cdr.cdr.car.valueOf()),r.set(e.car,new mn(i),a,!0)}),`(define-syntax-parameter name syntax [__doc__])

         Binds <keyword> to the transformer obtained by evaluating <transformer spec>.
         The transformer provides the default expansion for the syntax parameter,
         and in the absence of syntax-parameterize, is functionally equivalent to
         define-syntax.`),"syntax-parameterize":E(new fe("syntax-parameterize",function(e,t){for(var n=H.get("list->array")(e.car),r=this.inherit("syntax-parameterize");n.length;){var i=n.shift();if(!(C(i)||i.car instanceof x)){var a="invalid syntax for syntax-parameterize: ".concat(Tn(e,!0));throw new Error("syntax-parameterize: ".concat(a))}var u=ie(i.cdr.car,se(se({},t),{},{env:this})),s=i.car;U("syntax-parameterize",u,["syntax"]),U("syntax-parameterize",s,"symbol"),u.__name__=s.valueOf(),u.__name__ instanceof Z&&(u.__name__=u.__name__.valueOf());var o=new mn(u);if(s.is_gensym()){var f=s.literal(),c=this.get(f,{throwError:!1});c instanceof mn&&r.set(f,o)}r.set(s,o)}var l=gi([r,t.dynamic_env],e.cdr);return ie(l,se(se({},t),{},{env:r}))}),`(syntax-parameterize (bindings) body)

         Macro work similar to let-syntax but the the bindnds will be exposed to the user.
         With syntax-parameterize you can define anaphoric macros.`),define:E(fe.defmacro("define",function(e,t){var n=this;if(C(e.car)&&e.car.car instanceof x){var r=new S(new x("define"),new S(e.car.car,new S(new S(new x("lambda"),new S(e.car.cdr,e.cdr)))));return r}else if(t.macro_expand)return;t.dynamic_env=this,t.env=n;var i=e.cdr.car,a;return C(i)?(i=ie(i,t),a=!0):i instanceof x&&(i=n.get(i)),U("define",e.car,"symbol"),_e(i,function(u){n.__name__===Me.__merge_env__&&(n=n.__parent__),a&&(pe(u)&&Ht(u)||u instanceof Me||vn(u))&&(u.__name__=e.car.valueOf(),u.__name__ instanceof Z&&(u.__name__=u.__name__.valueOf()));var s;C(e.cdr.cdr)&&Z.isString(e.cdr.cdr.car)&&(s=e.cdr.cdr.car.valueOf()),n.set(e.car,u,s,!0)})}),`(define name expression)
         (define name expression "doc string")
         (define (function-name . args) . body)

         Macro for defining values. It can be used to define variables,
         or functions. If the first argument is list it will create a function
         with name being first element of the list. This form expands to
         \`(define function-name (lambda args body))\``),"set-obj!":E("set-obj!",function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=ge(e);if(Ut(e)||i!=="object"&&i!=="function"){var a=$t("set-obj!",ke(e),["object","function"]);throw new Error(a)}if(U("set-obj!",t,["string","symbol","number"]),e=tt(e),t=t.valueOf(),arguments.length===2?delete e[t]:cr(e)&&pe(n)?(e[t]=tt(n),e[t][ro]=!0):pe(n)||Zu(n)||$(n)?e[t]=n:e[t]=n&&!cr(n)?n.valueOf():n,$u){var u=e[t];Object.defineProperty(e,t,se(se({},r),{},{value:u}))}},`(set-obj! obj key value)
        (set-obj! obj key value props)

        Function set a property of a JavaScript object. props should be a vector of pairs,
        passed to Object.defineProperty.`),"null-environment":E("null-environment",function(){return H.inherit("null")},`(null-environment)

        Returns a clean environment with only the standard library.`),values:E("values",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jt(n)},`(values a1 a2 ...)

        If called with more then one element it will create a special
        Values object that can be used in the call-with-values function.`),"call-with-values":E("call-with-values",function(e,t){U("call-with-values",e,"function",1),U("call-with-values",t,"function",2);var n=e.apply(this);return n instanceof Jt?t.apply(this,n.valueOf()):t.call(this,n)},`(call-with-values producer consumer)

        Calls the producer procedure with no arguments, then calls the
        consumer procedure with the returned value as an argument -- unless
        the returned value is a special Values object created by (values), if it is
        the values are unpacked and the consumer is called with multiple arguments.`),"current-environment":E("current-environment",function(){return this.__name__==="__frame__"?this.__parent__:this},`(current-environment)

        Function that returns the current environment (they're first-class objects!)`),"parent.frame":E("parent.frame",function(){return Be},`(parent.frame)

        Returns the parent environment if called from inside a function.
        If no parent frame can be found it returns nil.`),eval:E("eval",function(e,t){return t=t||this.get("interaction-environment").call(this),new Promise(function(n,r){var i=ie(e,{env:t,dynamic_env:t,error:r});n(i)})},`(eval expr)
        (eval expr environment)

        Function that evaluates LIPS Scheme code. If the second argument is provided
        it will be the environment that the code is evaluated in.`),lambda:new fe("lambda",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.use_dynamic,r=t.error,i=this,a;C(e.cdr)&&Z.isString(e.cdr.car)&&!$(e.cdr.cdr)&&(a=e.cdr.car.valueOf());function u(){var o=Ya(this)?this:{dynamic_env:i},f=o.dynamic_env,c=i.inherit("lambda");f=f.inherit("lambda"),this&&!Ya(this)&&(this&&!this.__instance__&&Object.defineProperty(this,"__instance__",{enumerable:!1,get:function(){return!0},set:function(){},configurable:!1}),c.set("this",this));for(var l=arguments.length,m=new Array(l),k=0;k<l;k++)m[k]=arguments[k];if(this instanceof zr){var L={throwError:!1};c.set("arguments",this.env.get("arguments",L)),c.set("parent.frame",this.env.get("parent.frame",L))}else{var b=m.slice();b.callee=u,b.env=c,c.set("arguments",b)}function g(J,Y){c.__env__[J.__name__]=Y,f.__env__[J.__name__]=Y}var p=e.car,v=0;if(p instanceof x||!$(p))for(;;){if(!$(p.car)){if(p instanceof x){var h=We(S.fromArray(m.slice(v),!1));g(p,h);break}else if(C(p)){var F=m[v];g(p.car,F)}}if($(p.cdr))break;v++,p=p.cdr}var O=a?e.cdr.cdr:e.cdr,B=gi([c,f],O),V={env:c,dynamic_env:f,use_dynamic:n,error:r};return ie(B,V)}var s=C(e.car)?e.car.length():null;return u.__code__=new S(new x("lambda"),e),u[io]=!0,C(e.car)?E(Kc(u,s),a,!0):E(u,a,!0)},`(lambda (a b) body)
        (lambda args body)
        (lambda (a b . rest) body)

        The lambda macro creates a new anonymous function. If the first element of
        the body is a string and there is more elements the string is used as the
        documentation string, that can be read using (help fn).`),macroexpand:E(new fe("macroexpand",Ga()),`(macroexpand expr)

         Macro that expand all macros inside and return single expression as output.`),"macroexpand-1":E(new fe("macroexpand-1",Ga(!0)),`(macroexpand-1 expr)

         Macro similar to macroexpand but it expand macros only one level
         and return single expression as output.`),"define-macro":E(new fe(Yu,function(e,t){var n=t.use_dynamic,r=t.error,i,a,u,s;if(Ic(e)&&(i=e.car.car.__name__,u=e.cdr,s=e.car.cdr),jc(e)){i=e.car.__name__;var o=e.cdr.car;s=o.cdr.car,u=o.cdr.cdr}if(i&&u&&s){Z.isString(u.car)&&C(u.cdr)&&(a=u.car.valueOf(),u=u.cdr);var f=Pc(i,s,u,a,{use_dynamic:n,error:r});this.set(i,f)}else throw new Error("Syntax Error: Invalid `define-macro` expression")}),`(define-macro (name . args) body)

         The meta-macro, that creates new macros. If the return value is a list structure
         it will be evaluated where the macro is invoked from. You can use quasiquote \`
         and unquote , and unquote-splicing ,@ inside to create an expression that will be
         evaluated at runtime. Macros works like this: if you pass any expression to a
         macro the arguments will not be evaluated unless the macro's body explicitly
         calls (eval) on it. Because of this a macro can manipulate the expression
         (arguments) as lists.`),"syntax-rules":new fe("syntax-rules",function(e,t){var n=t.use_dynamic,r=t.error,i=this;function a(o){for(var f=[];!$(o);){var c=o.car;f.push(c.valueOf()),o=o.cdr}return f}function u(o){for(;!$(o);){var f=o.car;if(!(f instanceof x))throw new Error("syntax-rules: wrong identifier");o=o.cdr}}e.car instanceof x?u(e.cdr.car):u(e.car);var s=new Me(function(o,f){var c=f.macro_expand;G(">> SYNTAX"),G(o),G(e);var l=i.inherit("syntax"),m=l,k=this;if(k.__name__===Me.__merge_env__){var L=Object.getOwnPropertySymbols(k.__env__);L.forEach(function(W){k.__parent__.set(W,k.__env__[W])}),k=k.__parent__}var b={env:l,dynamic_env:m,use_dynamic:n,error:r},g,p,v;e.car instanceof x?(g=e.car,v=a(e.cdr.car),p=e.cdr.cdr):(g="...",v=a(e.car),p=e.cdr);try{for(;!$(p);){var h=p.car.car,F=p.car.cdr.car;G("[[[ RULE"),G(h);var O=Tc(h,o,v,g,{expansion:this,define:i});if(O){vi()&&(console.log(JSON.stringify(Hu(O),!0,2)),console.log("PATTERN: "+h.toString(!0)),console.log("MACRO: "+o.toString(!0)));var B=[],V=Rc({bindings:O,expr:F,symbols:v,scope:l,lex_scope:k,names:B,ellipsis:g});G("OUPUT>>> ",V),V&&(F=V);var J=k.merge(l,Me.__merge_env__);if(c)return{expr:F,scope:J};var Y=ie(F,se(se({},b),{},{env:J}));return Lc(Y,B)}p=p.cdr}}catch(W){var R=`
in macro:
  `.concat(e.toString(!0));throw W.message.includes(R)||(W.message+=R),W}throw new Error("syntax-rules: no matching syntax in macro ".concat(o.toString(!0)))},i);return s.__code__=e,s},`(syntax-rules () (pattern expression) ...)

        Base of hygienic macros, it will return a new syntax expander
        that works like Lisp macros.`),quote:E(new fe("quote",function(e){return We(e.car)}),`(quote expression) or 'expression

         Macro that returns a single LIPS expression as data (it won't evaluate the
         argument). It will return a list if put in front of LIPS code.
         And if put in front of a symbol it will return the symbol itself, not the value
         bound to that name.`),"unquote-splicing":E("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code) or ,@code

        Special form used in the quasiquote macro. It evaluates the expression inside and
        splices the list into quasiquote's result. If it is not the last element of the
        expression, the computed value must be a pair.`),unquote:E("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code) or ,code

        Special form used in the quasiquote macro. It evaluates the expression inside and
        substitutes the value into quasiquote's result.`),quasiquote:fe.defmacro("quasiquote",function(e,t){var n=t.use_dynamic,r=t.error,i=this,a=i;function u(p){return C(p)||lt(p)||Array.isArray(p)}function s(p,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u;if(C(p)){var F=p.car,O=p.cdr;return h(F)&&(F=v(F)),h(O)&&(O=v(O)),Xe(F)||Xe(O)?wn([F,O]).then(function(B){var V=ye(B,2),J=V[0],Y=V[1];return new S(J,Y)}):new S(F,O)}return p}function o(p,v){return C(p)?$(v)||p.append(v):p=new S(p,v),p}function f(p){return!!p.filter(function(v){return C(v)&&x.is(v.car,/^(unquote|unquote-splicing)$/)}).length}function c(p,v,h){return p.reduce(function(F,O){if(!C(O))return F.push(O),F;if(x.is(O.car,"unquote-splicing")){var B;if(v+1<h?B=L(O.cdr,v+1,h):B=ie(O.cdr.car,{env:i,use_dynamic:n,dynamic_env:a,error:r}),!C(B))throw new Error("Expecting list ".concat(ke(O)," found"));return F.concat(B.to_array())}return F.push(L(O,v,h)),F},[])}function l(p,v,h){var F={};return v++,Object.keys(p).forEach(function(O){var B=p[O];if(C(B)){if(x.is(B.car,"unquote-splicing"))throw new Error("You can't call `unquote-splicing` inside object");var V;v<h?V=L(B.cdr.car,v,h):V=ie(B.cdr.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),F[O]=V}else F[O]=B}),Object.isFrozen(p)&&Object.freeze(F),F}function m(p,v,h){if(v<h){var F=re;return $(p.cdr)||(F=L(p.cdr,v-1,h)),new S(new S(p.car.car,L(p.car.cdr,v,h)),F)}var O=[];return function B(V){var J=ie(V.car,{env:i,dynamic_env:a,use_dynamic:n,error:r});return O.push(J),C(V.cdr)?B(V.cdr):_e(O,function(Y){if(Y.some(function(y){return!C(y)})){if(C(p.cdr)&&x.is(p.cdr.car,".")&&C(p.cdr.cdr)&&$(p.cdr.cdr.cdr))return p.cdr.cdr.car;if(!($(p.cdr)||C(p.cdr))){var R="You can't splice atom inside list";throw new Error(R)}if(Y.length>1){var W="You can't splice multiple atoms inside list";throw new Error(W)}if(!(C(p.cdr)&&$(Y[0])))return Y[0]}Y=Y.map(function(y){return k.has(y)?y.clone():(k.add(y),y)});var ce=L(p.cdr,0,1);if(!($(ce)&&$(Y[0])))return _e(ce,function(y){if($(Y[0]))return y;if(Y.length===1)return o(Y[0],y);var N=Y.reduce(function(P,M){return o(P,M)});return o(N,y)})})}(p.car.cdr)}var k=new Set;function L(p,v,h){if(C(p)){if(C(p.car)){if(x.is(p.car.car,"unquote-splicing"))return m(p,v+1,h);if(x.is(p.car.car,"unquote")){if(v+2===h&&C(p.car.cdr)&&C(p.car.cdr.car)&&x.is(p.car.cdr.car.car,"unquote-splicing")){var F=p.car.cdr;return new S(new S(new x("unquote"),m(F,v+2,h)),re)}else if(C(p.car.cdr)&&!$(p.car.cdr.cdr))if(C(p.car.cdr.car)){var O=[];return function J(Y){return $(Y)?S.fromArray(O):_e(ie(Y.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),function(R){return O.push(R),J(Y.cdr)})}(p.car.cdr)}else return p.car.cdr}}if(x.is(p.car,"quasiquote")){var B=L(p.cdr,v,h+1);return new S(p.car,B)}if(x.is(p.car,"quote"))return new S(p.car,L(p.cdr,v,h));if(x.is(p.car,"unquote")){if(v++,v<h)return new S(new x("unquote"),L(p.cdr,v,h));if(v>h)throw new Error("You can't call `unquote` outside of quasiquote");if(C(p.cdr)){if($(p.cdr.cdr))return ie(p.cdr.car,{env:i,dynamic_env:a,error:r});if(C(p.cdr.car)){var V=[];return function J(Y){return $(Y)?S.fromArray(V):_e(ie(Y.car,{env:i,dynamic_env:a,use_dynamic:n,error:r}),function(R){return V.push(R),J(Y.cdr)})}(p.cdr)}else return p.cdr}else return p.cdr}return s(p,function(J){return L(J,v,h)})}else{if(lt(p))return l(p,v,h);if(p instanceof Array)return c(p,v,h)}return p}function b(p){C(p)&&(delete p[gt],p.have_cycles("car")||b(p.car),p.have_cycles("cdr")||b(p.cdr))}if(lt(e.car)&&!f(Object.values(e.car))||Array.isArray(e.car)&&!f(e.car)||C(e.car)&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote"))return We(e.car);var g=L(e.car,0,1);return _e(g,function(p){return b(p),We(p)})},`(quasiquote list)

        Similar macro to \`quote\` but inside it you can use special expressions (unquote
        x) abbreviated to ,x that will evaluate x and insert its value verbatim or
        (unquote-splicing x) abbreviated to ,@x that will evaluate x and splice the value
        into the result. Best used with macros but it can be used outside.`),clone:E("clone",function(t){return U("clone",t,"pair"),t.clone()},`(clone list)

        Function that returns a clone of the list, that does not share any pairs with the
        original, so the clone can be safely mutated without affecting the original.`),append:E("append",function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r=r.map(function(a){return C(a)?a.clone():a}),(t=H.get("append!")).call.apply(t,[this].concat(we(r)))},`(append item ...)

        Function that creates a new list with each argument appended end-to-end.
        It will always return a new list and not modify its arguments.`),"append!":E("append!",function(){for(var e=H.get("list?"),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce(function(i,a){if(U("append!",i,["nil","pair"]),(C(a)||$(a))&&!e(a))throw new Error("append!: Invalid argument, value is not a list");return $(i)?$(a)?re:a:Ut(a)?i:i.append(a)},re)},`(append! arg1 ...)

        Destructive version of append, it can modify the lists in place. It returns
        a new list where each argument is appended to the end. It may modify
        lists added as arguments.`),reverse:E("reverse",function(t){if(U("reverse",t,["array","pair","nil"]),$(t))return re;if(C(t)){var n=H.get("list->array")(t).reverse();return H.get("array->list")(n)}else{if(Array.isArray(t))return t.reverse();throw new Error($t("reverse",ke(t),"array or pair"))}},`(reverse list)

        Function that reverses the list or array. If value is not a list
        or array it will error.`),nth:E("nth",function(t,n){if(U("nth",t,"number"),U("nth",n,["array","pair"]),C(n)){for(var r=n,i=0;i<t;){if(!r.cdr||$(r.cdr)||r.have_cycles("cdr"))return re;r=r.cdr,i++}return r.car}else{if(n instanceof Array)return n[t];throw new Error($t("nth",ke(n),"array or pair",2))}},`(nth index obj)

        Function that returns the nth element of the list or array.
        If used with a non-indexable value it will error.`),list:E("list",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reverse().reduce(function(i,a){return new S(a,i)},re)},`(list . args)

        Function that creates a new list out of its arguments.`),substring:E("substring",function(t,n,r){return U("substring",t,"string"),U("substring",n,"number"),U("substring",r,["number","void"]),t.substring(n.valueOf(),r&&r.valueOf())},`(substring string start end)

        Function that returns the slice of the string starting at start and ending
        with end.`),concat:E("concat",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i,a){return U("concat",i,"string",a+1)}),n.join("")},`(concat . strings)

        Function that creates a new string by joining its arguments.`),join:E("join",function(t,n){return U("join",t,"string"),U("join",n,["pair","nil"]),H.get("list->array")(n).join(t)},`(join separator list)

        Function that returns a string by joining elements of the list using separator.`),split:E("split",function(t,n){return U("split",t,["regex","string"]),U("split",n,"string"),H.get("array->list")(n.split(t))},`(split separator string)

        Function that creates a list by splitting string by separator which can
        be a string or regular expression.`),replace:E("replace",function(t,n,r){if(U("replace",t,["regex","string"]),U("replace",n,["string","function"]),U("replace",r,"string"),pe(n)){var i=[];return r.replace(t,function(){i.push(n.apply(void 0,arguments))}),_e(i,function(a){return r.replace(t,function(){return a.shift()})})}return r.replace(t,n)},`(replace pattern replacement string)

        Function that changes pattern to replacement inside string. Pattern can be a
        string or regex and replacement can be function or string. See Javascript
        String.replace().`),match:E("match",function(t,n){U("match",t,["regex","string"]),U("match",n,"string");var r=n.match(t);return r?H.get("array->list")(r):!1},`(match pattern string)

        Function that returns a match object from JavaScript as a list or #f if
        no match.`),search:E("search",function(t,n){return U("search",t,["regex","string"]),U("search",n,"string"),n.search(t)},`(search pattern string)

        Function that returns the first found index of the pattern inside a string.`),repr:E("repr",function(t,n){return He(t,n)},`(repr obj)

        Function that returns a LIPS code representation of the object as a string.`),"escape-regex":E("escape-regex",function(e){return U("escape-regex",e,"string"),ac(e.valueOf())},`(escape-regex string)

        Function that returns a new string where all special operators used in regex,
        are escaped with backslashes so they can be used in the RegExp constructor
        to match a literal string.`),env:E("env",function(e){e=e||this.env;var t=Object.keys(e.__env__).map(x),n;return t.length?n=S.fromArray(t):n=re,e.__parent__ instanceof xe?H.get("env").call(this,e.__parent__).append(n):n},`(env)
        (env obj)

        Function that returns a list of names (functions, macros and variables)
        that are bound in the current environment or one of its parents.`),new:E("new",function(e){for(var t=tt(e),n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t[Symbol.for("__class__")]?n=dr(t,i):n=dr(t,we(i.map(function(u){return Gt(u)}))),n},`(new obj . args)

        Function that creates new JavaScript instance of an object.`),typecheck:E(U,`(typecheck label value type [position])

         Checks the type of value and errors if the type is not one allowed.  Type can be
         string or list of strings. The position optional argument is used to create a
         proper error message for the nth argument of function calls.`),"typecheck-number":E(mo,`(typecheck-number label value type [position])

         Function similar to typecheck but checks if the argument is a number
         and specific type of number e.g. complex.`),"unset-special!":E("unset-special!",function(e){U("remove-special!",e,"string"),delete Se.remove(e.valueOf())},`(unset-special! name)

        Function that removes a special symbol from parser added by \`set-special!\`,
        name must be a string.`),"set-special!":E("set-special!",function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se.LITERAL;U("set-special!",e,"string",1),U("set-special!",t,"symbol",2),Se.append(e.valueOf(),t,n)},`(set-special! symbol name [type])

        Add a special symbol to the list of transforming operators by the parser.
        e.g.: \`(add-special! "#" 'x)\` will allow to use \`#(1 2 3)\` and it will be
        transformed into (x (1 2 3)) so you can write x macro that will process
        the list. 3rd argument is optional, and it can be one of two values:
        lips.specials.LITERAL, which is the default behavior, or
        lips.specials.SPLICE which causes the value to be unpacked into the expression.
        This can be used for e.g. to make \`#(1 2 3)\` into (x 1 2 3) that is needed
        by # that defines vectors.`),get:Rn,".":Rn,unbind:E(tt,`(unbind fn)

         Function that removes the weak 'this' binding from a function so you
         can get properties from the actual function object.`),type:E(ke,`(type object)

         Function that returns the type of an object as string.`),debugger:E("debugger",function(){debugger},`(debugger)

        Function that triggers the JavaScript debugger (e.g. the browser devtools)
        using the "debugger;" statement. If a debugger is not running this
        function does nothing.`),in:E("in",function(e,t){return(e instanceof x||e instanceof Z||e instanceof _)&&(e=e.valueOf()),e in Gt(t)},`(in key value)

        Function that uses the Javascript "in" operator to check if key is
        a valid property in the value.`),"instance?":E("instance?",function(e){return Qu(e)},`(instance? obj)

        Checks if object is an instance, created with a new operator`),instanceof:E("instanceof",function(e,t){return t instanceof tt(e)},`(instanceof type obj)

        Predicate that tests if the obj is an instance of type.`),"prototype?":E("prototype?",cr,`(prototype? obj)

         Predicate that tests if value is a valid JavaScript prototype,
         i.e. calling (new) with it will not throw '<x> is not a constructor'.`),"macro?":E("macro?",function(e){return e instanceof fe},`(macro? expression)

        Predicate that tests if value is a macro.`),"continuation?":E("continuation?",Ki,`(continuation? expression)

         Predicate that tests if value is a callable continuation.`),"function?":E("function?",pe,`(function? expression)

         Predicate that tests if value is a callable function.`),"real?":E("real?",function(e){return ke(e)!=="number"?!1:e instanceof _?e.isFloat():_.isFloat(e)},`(real? number)

        Predicate that tests if value is a real number (not complex).`),"number?":E("number?",function(e){return Number.isNaN(e)||_.isNumber(e)},`(number? expression)

        Predicate that tests if value is a number or NaN value.`),"string?":E("string?",function(e){return Z.isString(e)},`(string? expression)

        Predicate that tests if value is a string.`),"pair?":E("pair?",C,`(pair? expression)

         Predicate that tests if value is a pair or list structure.`),"regex?":E("regex?",function(e){return e instanceof RegExp},`(regex? expression)

        Predicate that tests if value is a regular expression.`),"null?":E("null?",function(e){return Ut(e)},`(null? expression)

        Predicate that tests if value is null-ish (i.e. undefined, nil, or
        Javascript null).`),"boolean?":E("boolean?",function(e){return typeof e=="boolean"},`(boolean? expression)

        Predicate that tests if value is a boolean (#t or #f).`),"symbol?":E("symbol?",function(e){return e instanceof x},`(symbol? expression)

        Predicate that tests if value is a LIPS symbol.`),"array?":E("array?",function(e){return e instanceof Array},`(array? expression)

        Predicate that tests if value is an array.`),"object?":E("object?",function(e){return!$(e)&&e!==null&&!(e instanceof de)&&!(e instanceof RegExp)&&!(e instanceof Z)&&!C(e)&&!(e instanceof _)&&ge(e)==="object"&&!(e instanceof Array)},`(object? expression)

        Predicate that tests if value is an plain object (not another LIPS type).`),flatten:E("flatten",function(t){return U("flatten",t,"pair"),t.flatten()},`(flatten list)

        Returns a shallow list from tree structure (pairs).`),"vector-append":E("vector-append",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return[];Xt("vector-append",t,"array");var r=t[0],i=t.slice(1);return r.concat.apply(r,we(i))},`(vector-append v1 v2 ...)

         Returns new vector by combining it's arguments that should be vectors.`),"array->list":E("array->list",function(e){return U("array->list",e,"array"),S.fromArray(e)},`(array->list array)

        Function that converts a JavaScript array to a LIPS cons list.`),"tree->array":E("tree->array",Va("tree->array",!0),`(tree->array list)

         Function that converts a LIPS cons tree structure into a JavaScript array.`),"list->array":E("list->array",Va("list->array"),`(list->array list)

         Function that converts a LIPS list into a JavaScript array.`),apply:E("apply",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U("apply",t,"function",1);var a=r.pop();return U("apply",a,["pair","nil"],r.length+2),r=r.concat(H.get("list->array").call(this,a)),t.apply(this,vo(t,r))},`(apply fn list)

        Function that calls fn with the list of arguments.`),length:E("length",function(t){if(!t||$(t))return 0;if(C(t))return t.length();if("length"in t)return t.length},`(length expression)

        Function that returns the length of the object. The object can be a LIPS
        list or any object that has a "length" property. Returns undefined if the
        length could not be found.`),"string->number":E("string->number",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;if(U("string->number",e,"string",1),U("string->number",t,"number",2),e=e.valueOf(),t=t.valueOf(),e.match(Bu)||e.match(qi))return ju(e,t);if(e.match(Ws)||e.match(Mi))return Pu(e,t);var n=t===10&&!e.match(/e/i)||t===16;return e.match(Su)&&n||e.match(Ui)?Iu(e,t):e.match(Ir)?zi(e):!1},`(string->number number [radix])

        Function that parses a string into a number.`),try:E(new fe("try",function(e,t){var n=this,r=t.use_dynamic;return t.error,new Promise(function(i,a){var u,s;if(x.is(e.cdr.car.car,"catch")?(u=e.cdr.car,C(e.cdr.cdr)&&x.is(e.cdr.cdr.car.car,"finally")&&(s=e.cdr.cdr.car)):x.is(e.cdr.car.car,"finally")&&(s=e.cdr.car),!(s||u))throw new Error("try: invalid syntax");function o(m){throw i(m),new Ln("[CATCH]")}var f=function(k,L){L(k)};s&&(f=function(k,L){f=a,c.error=function(b){throw b},_e(ie(new S(new x("begin"),s.cdr),c),function(){L(k)})});var c={env:n,use_dynamic:r,dynamic_env:n,error:function(k){if(k instanceof Ln)throw k;if(u){var L=n.inherit("try"),b=u.cdr.car.car;if(!(b instanceof x))throw new Error("try: invalid syntax: catch require variable name");L.set(b,k);var g,p={env:L,use_dynamic:r,dynamic_env:n,error:function(F){throw g=!0,a(F),new Ln("[CATCH]")}},v=ie(new S(new x("begin"),u.cdr.cdr),p);_e(v,function(F){g||f(F,o)})}else f(void 0,function(){a(k)})}},l=ie(e.car,c);_e(l,function(m){f(m,i)},c.error)})}),`(try expr (catch (e) code))
         (try expr (catch (e) code) (finally code))
         (try expr (finally code))

         Macro that executes expr and catches any exceptions thrown. If catch is provided
         it's executed when an error is thrown. If finally is provided it's always
         executed at the end.`),raise:E("raise",function(e){throw e},`(raise obj)

        Throws the object verbatim (no wrapping an a new Error).`),throw:E("throw",function(e){throw new Error(e)},`(throw string)

        Throws a new exception.`),find:E("find",function e(t,n){if(U("find",n,["pair","nil"]),Ut(n))return!1;var r=qa("find",t);return _e(r(n.car),function(i){return i&&!$(i)?n.car:e(t,n.cdr)})},`(find fn list)
        (find regex list)
        (find atom list)

        Higher-order function that finds the first value for which fn return true.
        If called with a regex or any atom it will create a matcher function.`),"for-each":E("for-each",function(e){var t;U("for-each",e,"function");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach(function(u,s){U("for-each",u,["pair","nil"],s+1)});var a=(t=H.get("map")).call.apply(t,[this,e].concat(r));if(Xe(a))return a.then(function(){})},`(for-each fn . lists)

        Higher-order function that calls function \`fn\` on each
        value of the argument. If you provide more than one list
        it will take each value from each list and call \`fn\` function
        with that many arguments as number of list arguments.`),map:E("map",function e(t){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];U("map",t,"function");var u=H.get("list?");if(i.forEach(function(m,k){if(U("map",m,["pair","nil"],k+1),C(m)&&!u.call(n,m))throw new Error("map: argument ".concat(k+1," is not a list"))}),i.length===0||i.some($))return re;var s=i.map(function(m){return m.car}),o=this.env,f=this.dynamic_env,c=this.use_dynamic,l=dn(t,s,{env:o,dynamic_env:f,use_dynamic:c});return _e(l,function(m){return _e(e.call.apply(e,[n,t].concat(we(i.map(function(k){return k.cdr})))),function(k){return new S(m,k)})})},`(map fn . lists)

        Higher-order function that calls function \`fn\` with each
        value of the list. If you provide more then one list as argument
        it will take each value from each list and call \`fn\` function
        with that many argument as number of list arguments. The return
        values of the fn calls are accumulated in a result list and
        returned by map.`),"list?":E("list?",function(e){for(var t=e;;){if($(t))return!0;if(!C(t)||t.have_cycles("cdr"))return!1;t=t.cdr}},`(list? obj)

        Predicate that tests if value is a proper linked list structure.
        The car of each pair can be any value. It returns false on cyclic lists."`),fold:E("fold",Ka("fold",function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];if(U("fold",t,"function"),i.forEach(function(s,o){U("fold",s,["pair","nil"],o+1)}),i.some($))return n;var u=e.call.apply(e,[this,t,n].concat(we(i.map(function(s){return s.cdr}))));return _e(u,function(s){return t.apply(void 0,we(i.map(function(o){return o.car})).concat([s]))})}),`(fold fn init . lists)

         Function fold is left-to-right reversal of reduce. It call \`fn\`
         on each pair of elements of the list and returns a single value.
         e.g. it computes (fn 'a 'x (fn 'b 'y (fn 'c 'z 'foo)))
         for: (fold fn 'foo '(a b c) '(x y z))`),pluck:E("pluck",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){if(n=n.map(function(f){return f instanceof x?f.__name__:f}),n.length===0)return re;if(n.length===1){var a=n,u=ye(a,1),s=u[0];return i[s]}var o={};return n.forEach(function(f){o[f]=i[f]}),o}},`(pluck . strings)

        If called with a single string it will return a function that when
        called with an object will return that key from the object.
        If called with more then one string the returned function will
        create a new object by copying all properties from the given object.`),reduce:E("reduce",Ka("reduce",function(e,t,n){for(var r=this,i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return U("reduce",t,"function"),a.forEach(function(s,o){U("reduce",s,["pair","nil"],o+1)}),a.some($)?n:_e(t.apply(void 0,we(a.map(function(s){return s.car})).concat([n])),function(s){return e.call.apply(e,[r,t,s].concat(we(a.map(function(o){return o.cdr}))))})}),`(reduce fn init list . lists)

         Higher-order function that takes each element of the list and calls
         the fn with result of previous call or init and the next element
         of the list until each element is processed, and returns a single value
         as result of last call to \`fn\` function.
         e.g. it computes (fn 'c 'z (fn 'b 'y (fn 'a 'x 'foo)))
         for: (reduce fn 'foo '(a b c) '(x y z))`),filter:E("filter",function(t,n){U("filter",t,["regex","function"]),U("filter",n,["pair","nil"]);var r=H.get("list->array")(n),i=[],a=qa("filter",t);return function u(s){function o(c){return c&&!$(c)&&i.push(f),u(++s)}if(s===r.length)return S.fromArray(i);var f=r[s];return _e(a(f),o)}(0)},`(filter fn list)
        (filter regex list)

        Higher-order function that calls \`fn\` for each element of the list
        and return a new list for only those elements for which fn returns
        a truthy value. If called with a regex it will create a matcher function.`),compose:E(uo,`(compose . fns)

         Higher-order function that creates a new function that applies all functions
         from right to left and returns the last value. Reverse of pipe.
         e.g.:
         ((compose (curry + 2) (curry * 3)) 10) ==> (+ 2 (* 3 10)) ==> 32`),pipe:E(ao,`(pipe . fns)

         Higher-order function that creates a new function that applies all functions
         from left to right and returns the last value. Reverse of compose.
         e.g.:
         ((pipe (curry + 2) (curry * 3)) 10) ==> (* 3 (+ 2 10)) ==> 36`),curry:E(Rr,`(curry fn . args)

         Higher-order function that creates a curried version of the function.
         The result function will have partially applied arguments and it
         will keep returning one-argument functions until all arguments are provided,
         then it calls the original function with the accumulated arguments.

         e.g.:
         (define (add a b c d) (+ a b c d))
         (define add1 (curry add 1))
         (define add12 (add 2))
         (display (add12 3 4))`),gcd:E("gcd",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xt("lcm",n,"number"),n.reduce(function(i,a){return i.gcd(a)})},`(gcd n1 n2 ...)

        Function that returns the greatest common divisor of the arguments.`),lcm:E("lcm",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Xt("lcm",n,"number");for(var i=n.length,a=ni(n[0]),u=1;u<i;u++){for(var s=ni(n[u]),o=a;a&&s;)a>s?a%=s:s%=a;a=ni(o*n[u])/(a+s)}return _(a)},`(lcm n1 n2 ...)

        Function that returns the least common multiple of the arguments.`),"odd?":E("odd?",ln(function(e){return _(e).isOdd()}),`(odd? number)

         Checks if number is odd.`),"even?":E("even?",ln(function(e){return _(e).isEven()}),`(even? number)

         Checks if number is even.`),"*":E("*",Qa(function(e,t){return _(e).mul(t)},_(1)),`(* . numbers)

        Multiplies all numbers passed as arguments. If single value is passed
        it will return that value.`),"+":E("+",Qa(function(e,t){return _(e).add(t)},_(0)),`(+ . numbers)

        Sums all numbers passed as arguments. If single value is passed it will
        return that value.`),"-":E("-",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0)throw new Error("-: procedure require at least one argument");if(Xt("-",t,"number"),t.length===1)return _(t[0]).sub();if(t.length)return t.reduce(lr(function(r,i){return _(r).sub(i)}))},`(- n1 n2 ...)
        (- n)

        Subtracts n2 and subsequent numbers from n1. If only one argument is passed
        it will negate the value.`),"/":E("/",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0)throw new Error("/: procedure require at least one argument");return Xt("/",t,"number"),t.length===1?_(1).div(t[0]):t.reduce(lr(function(r,i){return _(r).div(i)}))},`(/ n1 n2 ...)
        (/ n)

        Divides n1 by n2 and subsequent arguments one by one. If single argument
        is passed it will calculate (/ 1 n).`),abs:E("abs",ln(function(e){return _(e).abs()}),`(abs number)

         Function that returns the absolute value (magnitude) of number.`),truncate:E("truncate",function(e){return U("truncate",e,"number"),_.isFloat(e)?(e instanceof _&&(e=e.valueOf()),ue(Bc(e))):e},`(truncate n)

        Function that returns the integer part (floor) of a real number.`),sqrt:E("sqrt",ln(function(e){return _(e).sqrt()}),`(sqrt number)

         Function that returns the square root of the number.`),"**":E("**",lr(function(e,t){if(e=_(e),t=_(t),_.isInteger(t)){var n=t.cmp(0)===-1;if(n&&(t=t.sub()),_.isRational(e)){if(n){var r=e.__denom__.pow(t);if(e.__num__.cmp(1)===0)return r;var i=e.__num__.pow(t);return le({num:r,denom:i})}return le({num:e.__num__.pow(t),denom:e.__denom__.pow(t)})}if(n)return le({num:1,denom:e.pow(t)})}if(_.isRational(t)&&e.cmp(0)===-1){var a=t.__denom__,u=t.__num__;if(a.cmp(2)===0){var s=e.abs().pow(le({num:1,denom:2})),o=e.coerce(s),f=ye(o,2);if(s=f[1],t.cmp(0)===1)return oe({re:_(0),im:s});if(u.cmp(0)===-1)return oe({re:_(0),im:le({num:-1,denom:s})})}var c=t.valueOf(),l=c*Math.PI,m=e.abs().pow(c),k=m.mul(Math.cos(l)),L=m.mul(Math.sin(l));return oe({re:k,im:L})}var b=e.coerce(t),g=ye(b,2);return e=g[0],t=g[1],e.pow(t)}),`(** a b)

         Function that calculates number a to to the power of b.`),"1+":E("1+",ln(function(e){return _(e).add(1)}),`(1+ number)

         Function that adds 1 to the number and return result.`),"1-":E(ln(function(e){return _(e).sub(1)}),`(1- number)

         Function that subtracts 1 from the number and return result.`),"%":E("%",function(e,t){return Xt("%",[e,t],"number"),_(e).rem(t)},`(% n1 n2)

        Function returns the remainder of n1/n2 (modulo).`),"==":E("==",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xt("==",t,"number"),Bn(function(r,i){return _(r).cmp(i)===0},t)},`(== x1 x2 ...)}

        Function that compares its numerical arguments and checks if they are
        all equal.`),">":E(">",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tr(">",t,["bigint","float","rational"]),Bn(function(r,i){return _(r).cmp(i)===1},t)},`(> x1 x2 x3 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically decreasing, i.e. x1 > x2 and x2 > x3 and so on.`),"<":E("<",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tr("<",t,["bigint","float","rational"]),Bn(function(r,i){return _(r).cmp(i)===-1},t)},`(< x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically increasing, i.e. x1 < x2 and x2 < x3 and so on.`),"<=":E("<=",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tr("<=",t,["bigint","float","rational"]),Bn(function(r,i){return[0,-1].includes(_(r).cmp(i))},t)},`(<= x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically nondecreasing, i.e. x1 <= x2 and x2 <= x3 and so on.`),">=":E(">=",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tr(">=",t,["bigint","float","rational"]),Bn(function(r,i){return[0,1].includes(_(r).cmp(i))},t)},`(>= x1 x2 ...)

        Function that compares its numerical arguments and checks if they are
        monotonically nonincreasing, i.e. x1 >= x2 and x2 >= x3 and so on.`),"eq?":E("eq?",Wi,`(eq? a b)

         Function that compares two values if they are identical.`),or:E(new fe("or",function(e,t){var n=t.use_dynamic,r=t.error,i=H.get("list->array")(e),a=this,u=a;if(!i.length)return!1;var s;return function o(){function f(m){return s=m,jn(s)?o():s}if(i.length){var c=i.shift(),l=ie(c,{env:a,dynamic_env:u,use_dynamic:n,error:r});return _e(l,f)}else return jn(s)?!1:s}()}),`(or . expressions)

         Macro that executes the values one by one and returns the first that is
         a truthy value. If there are no expressions that evaluate to true it
         returns false.`),and:E(new fe("and",function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.use_dynamic,r=t.error,i=H.get("list->array")(e),a=this,u=a;if(!i.length)return!0;var s,o={env:a,dynamic_env:u,use_dynamic:n,error:r};return function f(){function c(m){return s=m,jn(s)?s:f()}if(i.length){var l=i.shift();return _e(ie(l,o),c)}else return jn(s)?!1:s}()}),`(and . expressions)

         Macro that evaluates each expression in sequence and if any value returns false
         it will stop and return false. If each value returns true it will return the
         last value. If it's called without arguments it will return true.`),"|":E("|",function(e,t){return _(e).or(t)},`(| a b)

        Function that calculates the bitwise or operation.`),"&":E("&",function(e,t){return _(e).and(t)},`(& a b)

        Function that calculates the bitwise and operation.`),"~":E("~",function(e){return _(e).neg()},`(~ number)

        Function that calculates the bitwise inverse (flip all the bits).`),">>":E(">>",function(e,t){return _(e).shr(t)},`(>> a b)

        Function that right shifts the value a by value b bits.`),"<<":E("<<",function(e,t){return _(e).shl(t)},`(<< a b)

        Function that left shifts the value a by value b bits.`),not:E("not",function(t){return!t},`(not object)

        Function that returns the Boolean negation of its argument.`)},void 0,"global"),Be=H.inherit("user-env");_o(Be,lo);H.doc("**interaction-environment**",`**interaction-environment**

    Internal dynamic, global variable used to find interpreter environment.
    It's used so the read and write functions can locate **internal-env**
    that contains the references to stdin, stdout and stderr.`);(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var n=e[t]?e[t]:t;H.set(n,E(n,function(r){if(U(n,r,"number"),r instanceof _)return r[t]()},"(".concat(n,` number)

            Function that calculates the `).concat(n," of a number.")))})})();uf(["d","a"],2,5).forEach(function(e){var t=e.split(""),n=t.slice().reverse(),r=t.map(function(a){return"(c".concat(a,"r")}).join(" ")+" arg"+")".repeat(t.length),i="c"+e+"r";H.set(i,E(i,function(a){return n.reduce(function(u,s){return U(i,u,"pair"),s==="a"?u.car:u.cdr},a)},"(".concat(i,` arg)

        Function that calculates `).concat(r)))});ho=function(){};na()?Ai=cf():(Ai=Promise.resolve(),typeof window<"u"&&window===St?(H.set("window",window),H.set("global",void 0),H.set("self",window)):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&(H.set("self",self),H.set("window",void 0),H.set("global",void 0)));ke=ff(ke);rr=new WeakMap,Ur=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(wt(this,e),zt(this,"__value__",void 0),zt(this,"__fn__",void 0),Ns(this,rr,void 0),this.__value__=t,n){if(!pe(n))throw new Error("Section argument to Parameter need to be function "+"".concat(ke(n)," given"));this.__fn__=n}r&&ja(rr,this,r)}return Dt(e,[{key:"__name__",get:function(){return Ls(rr,this)},set:function(n){ja(rr,this,n),this.__fn__&&(this.__fn__.__name__="fn-".concat(n))}},{key:"invoke",value:function(){return pe(this.__fn__)?this.__fn__(this.__value__):this.__value__}},{key:"inherit",value:function(n){return new e(n,this.__fn__,this.__name__)}}])}(),zr=function(){function e(t){wt(this,e),zt(this,"env",void 0),zt(this,"dynamic_env",void 0),zt(this,"use_dynamic",void 0),Object.assign(this,t)}return Dt(e,[{key:"__name__",get:function(){return this.env.__name__}},{key:"__parent__",get:function(){return this.env.__parent__}},{key:"get",value:function(){var n;return(n=this.env).get.apply(n,arguments)}}])}();yo=function(){function e(t){wt(this,e),zt(this,"__value__",void 0),this.__value__=t}return Dt(e,[{key:"invoke",value:function(){if(this.__value__===null)throw new Error("Continuations are not implemented yet")}}])}();df=go(function(e){return e}),Kt=go(function(e,t){return t});Sr=yf();Br={pair:function(t){var n=ye(t,2),r=n[0],i=n[1];return S(r,i)},number:function(t){return Z.isString(t)?_([t,10]):_(t)},regex:function(t){var n=ye(t,2),r=n[0],i=n[1];return new RegExp(r,i)},nil:function(){return re},symbol:function(t){if(Z.isString(t))return x(t);if(Array.isArray(t))return x(Symbol.for(t[0]))},string:Z,character:de},bo=Object.keys(Br),wo={};for(ir=0,oi=Object.entries(bo);ir<oi.length;ir++)si=ye(oi[ir],2),iu=si[0],au=si[1],wo[au]=+iu;xo=function(){var e={pair:S,symbol:x,number:_,string:Z,character:de,nil:re.constructor,regex:RegExp};function t(l,m){return{deserialize:m,Class:l}}for(var n=new Dr,r={},i=0,a=Object.entries(Br);i<a.length;i++){var u=ye(a[i],2),s=u[0],o=u[1],f=e[s];r[s]=t(f,o)}var c=43311;return Object.keys(r).forEach(function(l){var m=r[l];if(typeof m=="function"){var k=m;Oa({Class:k,tag:c,encode:function(p,v){v(p.serialize())},decode:function(p){return new k(p)}})}else{var L=m.deserialize,b=m.Class;Oa({Class:b,tag:c,encode:function(p,v){if(p instanceof RegExp)return v([p.source,p.flags]);v(p.serialize())},decode:function(p){return L(p)}})}c++}),n}();Eo=7;su=typeof window<"u"&&window.document&&document.currentScript;typeof window<"u"&&Us(window,Af);kf=function(){var e=Z("Sat, 10 May 2025 19:46:53 +0000").valueOf(),t=e==="{{DATE}}"?new Date:new Date(e),n=function(s){return s.toString().padStart(2,"0")},r=t.getFullYear(),i=[r,n(t.getMonth()+1),n(t.getDate())].join("-"),a=`
  __ __                          __
 / / \\ \\       _    _  ___  ___  \\ \\
| |   \\ \\     | |  | || . \\/ __>  | |
| |    > \\    | |_ | ||  _/\\__ \\  | |
| |   / ^ \\   |___||_||_|  <___/  | |
 \\_\\ /_/ \\_\\                     /_/

LIPS Interpreter DEV (`.concat(i,`) <https://lips.js.org>
Copyright (c) 2018-`).concat(r,` Jakub T. Jankiewicz

Type (env) to see environment with functions macros and variables. You can also
use (help name) to display help for specific function or macro, (apropos name)
to display list of matched names in environment and (dir object) to list
properties of an object.
`).replace(/^.*\n/,"");return a}();X(Dn,"__class__","ahead");X(S,"__class__","pair");X(Pt,"__class__","nil");X(xt,"__class__","pattern");X(ze,"__class__","formatter");X(fe,"__class__","macro");X(Me,"__class__","syntax");X(Me.Parameter,"__class__","syntax-parameter");X(xe,"__class__","environment");X(Ke,"__class__","input-port");X(Ge,"__class__","output-port");X(Cr,"__class__","output-port");X(Bt,"__class__","output-string-port");X(pt,"__class__","input-string-port");X(Wt,"__class__","input-file-port");X(st,"__class__","output-file-port");X($n,"__class__","lips-error");[_,oe,le,ue,Ee].forEach(function(e){X(e,"__class__","number")});X(de,"__class__","character");X(x,"__class__","symbol");X(Z,"__class__","string");X(Le,"__class__","promise");X(Ur,"__class__","parameter");Cf="DEV",Of="Sat, 10 May 2025 19:46:53 +0000",Ao=uo(vc,Gi),bt={version:Cf,banner:kf,date:Of,exec:Kt,parse:Ao,tokenize:bn,evaluate:ie,compile:df,serialize:wf,unserialize:Do,box:Xi,unbox:Gt,serialize_bin:Ff,unserialize_bin:Fo,bootstrap:yn,Environment:xe,env:Be,Worker:gf,Interpreter:un,balanced_parenthesis:hr,balancedParenthesis:hr,balanced:hr,Macro:fe,Syntax:Me,Pair:S,Values:Jt,QuotedPromise:Le,Error:$n,quote:We,InputPort:Ke,OutputPort:Ge,BufferedOutputPort:Cr,InputFilePort:Wt,OutputFilePort:st,InputStringPort:pt,OutputStringPort:Bt,InputByteVectorPort:et,OutputByteVectorPort:ct,InputBinaryFilePort:an,OutputBinaryFilePort:jt,set_fs:af,Formatter:ze,Parser:Vt,Lexer:q,specials:Se,repr:Tn,nil:re,eof:je,LSymbol:x,LNumber:_,LFloat:ue,LComplex:oe,LRational:le,LBigInteger:Ee,LCharacter:de,LString:Z,Parameter:Ur,rationalize:tf};H.set("lips",bt)});var ia=Ye(async()=>{"use strict";ra();ra();await yn("https://cdn.jsdelivr.net/npm/@jcubic/lips/dist/std.xcb");Se.__list__={}});var ko,Co=Ye(async()=>{"use strict";kn();await ia();Gr();ft();ko=Be.get("list->array")});var Sf={};var Oo=Ye(async()=>{"use strict";kn();Hr();ft();await Co();await ia();dt();Wn("unsafe-code",new on(async e=>{let t=he("button",{},"Yes, run"),n=he("div",{},"This flow runs arbitrary code. Please confirm you want to run it: ",t);e.addConnect(n),await new Promise(r=>{t.addEventListener("click",()=>r())})},{doc:"Used by nodes that have access to all of Javascript, meaning that they could do just about anything, including executing malicious code. This feature forces the user to confirm they want to run the flow first before anything happens."}));Te({id:"fn",inputs:[new Ft("inputs","any")],outputs:[new Ft("outputs","any")],features:["unsafe-code"],doc:"Transforms the input and output values using a Scheme function. The value of the inputs is available in the variable <code>$inputs</code> (JS <code>undefined</code>), and the node object is available in the variable <code>$node</code>. Whatever array the function returns will be passed to the output. If <code>#&lt;void></code> is returned, the node will not update its outputs.",async setup({node:e,params:t,features:n}){let r=Be.get("vector->list");console.log(n["unsafe-code"]);let i=(s,o)=>new S(s,o),a=s=>new x(s),u=i(a("lambda"),i(i(a("$inputs"),i(a("$node"),re)),r(t)));console.log(u.toString()),e.state.func=(await Kt(u))[0]},async update({node:e,app:t}){let n=Be.get("vector->list");var r;try{r=await e.state.func(n(e.get("inputs",[])),e)}catch(i){t.error(i),console.error(i);return}r instanceof S&&(r=ko(r)),r!==void 0&&e.output("outputs",r)}})});var Bf={};var So=Ye(()=>{"use strict";ft();dt();Te({id:"clock",argTypes:["number"],inputs:[],outputs:[new be("clock","signal")],doc:"Updates connected nodes every N milliseconds.",setup({node:e,params:t}){setInterval(()=>e.output("clock"),t[0].valueOf())}});Te({id:"clock",argTypes:["number"],inputs:[new be("enabled","boolean")],outputs:[new be("clock","signal")],doc:"Updates connected nodes every N milliseconds, unless :enabled is false. When :enables changes to true again, the timer starts counting from 0.",setup({node:e,params:t}){e.state.interval=t[0].valueOf(),e.update("enabled",!1,void 0)},update({node:e,changes:t}){e.state.tid&&clearInterval(e.state.tid),t.enabled&&(e.state.tid=setInterval(()=>e.output("clock"),e.state.interval))}});Te({id:"clock",argTypes:[],inputs:[new be("interval","number")],outputs:[new be("clock","signal")],doc:"Updates connected nodes every N milliseconds.",setup({node:e}){e.state.lastTime=Date.now(),e.state.interval=1/0},update({node:e,changes:t}){e.state.interval=t.interval},tick({node:e}){let t=Date.now();e.state.lastTime+e.state.interval<=t&&(e.state.lastTime=t,e.output("clock"))}})});function Te(e){aa.push(e)}function Wn(e,t){ua.push([e,t])}var Bo,aa,ua,dt=Ye(()=>{"use strict";Bo=Promise.all([Promise.resolve().then(()=>(ca(),Mo)),Promise.resolve().then(()=>(fa(),qo)),Promise.resolve().then(()=>(la(),Uo)),Promise.resolve().then(()=>(_a(),zo)),Promise.resolve().then(()=>(pa(),$o)),Promise.resolve().then(()=>(ha(),Vo)),Oo().then(()=>Sf),Promise.resolve().then(()=>(So(),Bf))]),aa=[],ua=[]});kn();ft();dt();await Bo;var jf=Vr("#features-container"),jo=Vr("#nodes-container");function If(e,t,n){let r=he("li");if(t.append(r),r.append(he("p",{},he("code",{},"(",e.id,...e.argTypes?e.argTypes.map(c=>he("em",{},` <${c}>`)):[" ..."],")"))),e.features){r.append(he("p",{},"Uses features ",...e.features.flatMap(c=>[", ",he("a",{href:"#feature-"+encodeURIComponent(c)},he("strong",{},he("em",{},he("code",{},c))))].slice(1))));for(var i of e.features)n[i]??=new Set,n[i].add(e.id)}let a=he("table");r.append(a);let u=he("tr",{},he("th",{},"Inputs")),s=he("tr",{},he("th",{},"Outputs"));a.append(u,s);for(var o of e.inputs){let c=e.generics&&o.type in e.generics?`type of argument ${e.generics[o.type]}`:o.type,l=o instanceof Ft?", bussed":"";u.append(he("td",{},":",o.name," (",c,l,")"))}for(var f of e.outputs){let c=e.generics&&f.type in e.generics?`type of argument ${e.generics[f.type]}`:f.type,l=f instanceof Ft?", bussed":"";s.append(he("td",{},":",f.name," (",c,l,")"))}e.doc&&r.append(he("p",{},$r(e.doc)))}var Io=Object.groupBy(aa,e=>e.id),To={};for(Qt of Object.keys(Io).sort()){jo.append(he("h3",{id:"node-"+Qt},he("code",{},Qt)));let e=he("ul");jo.append(e);for(Po of Io[Qt])If(Po,e,To)}var Po,Qt;function Pf(e,t,n,r=new Set){let i=he("dt",{id:"feature-"+e},he("h3",{},he("code",{},e))),a=he("dd",{},he("p",{},he("em",{},"Used by: ",...Array.from(r).flatMap(u=>[", ",he("a",{href:"#node-"+encodeURIComponent(u)},he("code",{},u))]).slice(1))),he("p",{},$r(t.doc)));n.append(i,a)}var Lo=he("dl");jf.append(Lo);for([Qt,No]of ua.sort())Pf(Qt,No,Lo,To[Qt]);var Qt,No;
/*! Bundled license information:

@jcubic/lips/dist/lips.esm.min.js:
  (**@license
   *   __ __                          __
   *  / / \ \       _    _  ___  ___  \ \
   * | |   \ \     | |  | || . \/ __>  | |
   * | |    > \    | |_ | ||  _/\__ \  | |
   * | |   / ^ \   |___||_||_|  <___/  | |
   *  \_\ /_/ \_\                     /_/ v. DEV
   *
   * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
   *
   * Copyright (c) 2018-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>
   * Released under the MIT license
   *
   * includes:
   *
   * unfetch by Jason Miller (@developit) MIT License
   *
   * contentloaded.js
   *
   * Author: Diego Perini (diego.perini at gmail.com)
   * Summary: cross-browser wrapper for DOMContentLoaded
   * Updated: 20101020
   * License: MIT
   * Version: 1.2
   *
   * URL:
   * http://javascript.nwbox.com/ContentLoaded/
   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
   *
   * dist file generated by Babel includes code
   * Copyright (c) 2014-present, Facebook, Inc.
   * released under MIT license
   *
   * build: Sat, 10 May 2025 19:46:53 +0000
   *)
  (**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   *)
*/
//# sourceMappingURL=refpage_main.js.map
